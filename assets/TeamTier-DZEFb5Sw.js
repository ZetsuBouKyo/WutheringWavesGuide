import{u as I}from"./resonator-Be-vQPVU.js";import{u as j}from"./damageAnalysis-Dkyp5dzw.js";import{d as A,y as P,k as F,s as z,aa as $,e as k,o as n,V as b,w as c,a as f,j as t,c as o,l as D,u as T,t as r,n as _,h as y,F as w,ae as q,ab as O,m as H,z as L,b as G}from"./index-DBOlYmFe.js";import{V as J}from"./VTooltip-CukyjGQv.js";const K={key:0},N={class:"d-flex flex-column align-start"},Q={class:"d-flex flex-row mb-1"},U={class:"d-flex flex-row justify-center mr-2"},W=["src"],X={class:"d-flex flex-row w-100"},Y={class:"header"},Z=["href"],ee={class:"d-flex flex-row w-100"},te={class:"header text-truncater"},se={class:"value text-truncate"},ae={class:"d-flex flex-row w-100"},ne={class:"header text-truncate"},re={class:"value text-truncate"},oe={class:"d-flex flex-row align-center w-100"},le={key:0,class:"mr-4 text-truncate text-end w-100"},ce={class:"team d-flex flex-row justify-end h-100"},de=A({__name:"TeamTier",props:{title:{type:String,default:""},affixPolicy:{type:String,required:!0},templateIds:{type:Object,required:!0}},setup(R){const x=R,S=x.title,V=x.affixPolicy,m=x.templateIds,B=I(),M=j(),p=P({}),d=P([]),g=F(0);async function v(s){s.length!==0&&s.forEach(async u=>{const e=await M.getDamageAnalysisByTemplateId(u,V);if(e){const l=e.getTeamDamageDistribution();d.push(l),l.getResonatorNames().forEach(async i=>{if(!p[i]){const h=await B.getElementEnByName(i);p[i]=h}})}})}function E(){d.length>0&&(d.sort((s,u)=>{const e=parseFloat(s.getMaxTeamDPS()),l=parseFloat(u.getMaxTeamDPS());return!e||!l?0:l-e}),g.value=parseFloat(d[0].getMaxTeamDPS()))}function C(s){return s<2?"divide":""}return z(async()=>{await v(m)}),$(()=>m.length,async()=>{await v(m)}),$(()=>d.length,()=>{E()}),(s,u)=>(n(),k(b,{class:"h-100"},{default:c(()=>[f(_,{class:"mb-2 text-truncate"},{default:c(()=>[T(S)?(n(),o("h1",K,r(T(S)),1)):D("",!0)]),_:1}),t("div",N,[(n(!0),o(w,null,y(d,(e,l)=>(n(),o("div",{class:"d-flex flex-column w-100 my-2",key:l},[t("div",Q,[t("div",U,[(n(!0),o(w,null,y(e.getResonatorIconSources(),a=>(n(),o("img",{class:"resonator mr-2",src:a},null,8,W))),256))]),f(q,null,{default:c(()=>[f(_,{class:"text-grey-darken-1"},{default:c(()=>[t("div",X,[t("span",Y,r(s.$t("general.template_id"))+": ",1),t("a",{class:"value text-decoration-none text-truncate w-100",href:`/template/${e.getHashedTemplateID()}`},r(s.$t(e.template_id)),9,Z)])]),_:2},1024),f(_,{class:"text-grey-darken-1"},{default:c(()=>[t("div",ee,[t("span",te,r(s.$t("general.monster_id"))+": ",1),t("span",se,r(s.$t(e.monster_id)),1)])]),_:2},1024),f(_,{class:"text-grey-darken-1"},{default:c(()=>[t("div",ae,[t("span",ne,r(s.$t("general.team_dps"))+": ",1),t("span",re,r(e.getTeamDPSString()),1)])]),_:2},1024)]),_:2},1024)]),t("div",oe,[(n(),o("div",{class:"d-flex flex-row align-start w-100 bg-grey-darken-4",key:g.value},[t("div",{class:"d-flex flex-row align-start",style:O(`width: ${e.getTeamDPSPercentageString(g.value)};`)},[(n(!0),o(w,null,y(Object.keys(e.resonators),(a,i)=>(n(),k(J,{text:`${s.$t(a)} DPS: ${e.getResonatorDPSString(a)}
            (${e.getResonatorMaxDPSPercentageString(a)})`,location:"bottom"},{activator:c(({props:h})=>[t("div",H({class:"d-flex",ref_for:!0},h,{style:`width: ${e.getResonatorMaxDPSPercentageString(a)};`}),[t("div",{class:L(`barh w-100 d-flex flex-row-reverse align-center bg-${p[a]} ${C(i)}`)},[e.getResonatorMaxDPSPercentage(a)>.1?(n(),o("span",le,r(e.getResonatorMaxDPSPercentageString(a)),1)):D("",!0)],2)],16)]),_:2},1032,["text"]))),256))],4)])),t("div",ce,r(e.getTeamDPSPercentageString(g.value)),1)])]))),128))])]),_:1}))}}),_e=G(de,[["__scopeId","data-v-52f2e179"]]);export{_e as _};

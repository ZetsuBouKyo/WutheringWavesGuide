import{V as W,m as ie}from"./VOverlay-DPlGYtTC.js";import{z as J,A as K,as as q,aF as re,s as F,aG as Q,av as ue,ae as w,ap as D,D as X,m as b,a as r,O as se,ay as Y,aH as ce,M as A,ar as de,aI as fe,p as ve,aJ as me,F as L,E as $,N as ge,aK as xe,aL as he,aM as Ve,aN as we}from"./index-qc7TtUQv.js";import{h as ye}from"./VDataTable-W60AEyox.js";import{a as Pe,b as j,f as Ee,c as Fe,d as be,e as Ce,g as Ie}from"./VTextField-DWlMpamU.js";import{I as Se}from"./index-CAdZ2mtg.js";const Re=K({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...ie({origin:"center center",scrollStrategy:"block",transition:{component:ye},zIndex:2400})},"VDialog"),Ne=J()({name:"VDialog",props:Re(),emits:{"update:modelValue":e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,B){let{emit:y,slots:h}=B;const l=q(e,"modelValue"),{scopeId:u}=re(),a=F();function C(o){var s,m;const d=o.relatedTarget,v=o.target;if(d!==v&&((s=a.value)!=null&&s.contentEl)&&((m=a.value)!=null&&m.globalTop)&&![document,a.value.contentEl].includes(v)&&!a.value.contentEl.contains(v)){const n=ce(a.value.contentEl);if(!n.length)return;const V=n[0],I=n[n.length-1];d===V?I.focus():V.focus()}}Q(()=>{document.removeEventListener("focusin",C)}),ue&&w(()=>l.value&&e.retainFocus,o=>{o?document.addEventListener("focusin",C):document.removeEventListener("focusin",C)},{immediate:!0});function H(){var o;y("afterEnter"),(o=a.value)!=null&&o.contentEl&&!a.value.contentEl.contains(document.activeElement)&&a.value.contentEl.focus({preventScroll:!0})}function M(){y("afterLeave")}return w(l,async o=>{var d;o||(await D(),(d=a.value.activatorEl)==null||d.focus({preventScroll:!0}))}),X(()=>{const o=W.filterProps(e),d=b({"aria-haspopup":"dialog"},e.activatorProps),v=b({tabindex:-1},e.contentProps);return r(W,b({ref:a,class:["v-dialog",{"v-dialog--fullscreen":e.fullscreen,"v-dialog--scrollable":e.scrollable},e.class],style:e.style},o,{modelValue:l.value,"onUpdate:modelValue":s=>l.value=s,"aria-modal":"true",activatorProps:d,contentProps:v,height:e.fullscreen?void 0:e.height,width:e.fullscreen?void 0:e.width,maxHeight:e.fullscreen?void 0:e.maxHeight,maxWidth:e.fullscreen?void 0:e.maxWidth,role:"dialog",onAfterEnter:H,onAfterLeave:M},u),{activator:h.activator,default:function(){for(var s=arguments.length,m=new Array(s),n=0;n<s;n++)m[n]=arguments[n];return r(se,{root:"VDialog"},{default:()=>{var V;return[(V=h.default)==null?void 0:V.call(h,...m)]}})}})}),Y({},a)}}),ke=K({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,modelModifiers:Object,...Ie(),...Ce()},"VTextarea"),Te=J()({name:"VTextarea",directives:{Intersect:Se},inheritAttrs:!1,props:ke(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,B){let{attrs:y,emit:h,slots:l}=B;const u=q(e,"modelValue"),{isFocused:a,focus:C,blur:H}=Pe(e),M=A(()=>typeof e.counterValue=="function"?e.counterValue(u.value):(u.value||"").toString().length),o=A(()=>{if(y.maxlength)return y.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter});function d(t,c){var i,f;!e.autofocus||!t||(f=(i=c[0].target)==null?void 0:i.focus)==null||f.call(i)}const v=F(),s=F(),m=de(""),n=F(),V=A(()=>e.persistentPlaceholder||a.value||e.active);function I(){var t;n.value!==document.activeElement&&((t=n.value)==null||t.focus()),a.value||C()}function Z(t){I(),h("click:control",t)}function p(t){h("mousedown:control",t)}function ee(t){t.stopPropagation(),I(),D(()=>{u.value="",we(e["onClick:clear"],t)})}function te(t){var i;const c=t.target;if(u.value=c.value,(i=e.modelModifiers)!=null&&i.trim){const f=[c.selectionStart,c.selectionEnd];D(()=>{c.selectionStart=f[0],c.selectionEnd=f[1]})}}const P=F(),S=F(+e.rows),N=A(()=>["plain","underlined"].includes(e.variant));fe(()=>{e.autoGrow||(S.value=+e.rows)});function E(){e.autoGrow&&D(()=>{if(!P.value||!s.value)return;const t=getComputedStyle(P.value),c=getComputedStyle(s.value.$el),i=parseFloat(t.getPropertyValue("--v-field-padding-top"))+parseFloat(t.getPropertyValue("--v-input-padding-top"))+parseFloat(t.getPropertyValue("--v-field-padding-bottom")),f=P.value.scrollHeight,R=parseFloat(t.lineHeight),T=Math.max(parseFloat(e.rows)*R+i,parseFloat(c.getPropertyValue("--v-input-control-height"))),z=parseFloat(e.maxRows)*R+i||1/0,x=Ve(f??0,T,z);S.value=Math.floor((x-i)/R),m.value=he(x)})}ve(E),w(u,E),w(()=>e.rows,E),w(()=>e.maxRows,E),w(()=>e.density,E);let g;return w(P,t=>{t?(g=new ResizeObserver(E),g.observe(P.value)):g==null||g.disconnect()}),Q(()=>{g==null||g.disconnect()}),X(()=>{const t=!!(l.counter||e.counter||e.counterValue),c=!!(t||l.details),[i,f]=me(y),{modelValue:R,...T}=j.filterProps(e),z=Ee(e);return r(j,b({ref:v,modelValue:u.value,"onUpdate:modelValue":x=>u.value=x,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-input--plain-underlined":N.value},e.class],style:e.style},i,T,{centerAffix:S.value===1&&!N.value,focused:a.value}),{...l,default:x=>{let{id:k,isDisabled:G,isDirty:O,isReadonly:ae,isValid:ne}=x;return r(be,b({ref:s,style:{"--v-textarea-control-height":m.value},onClick:Z,onMousedown:p,"onClick:clear":ee,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},z,{id:k.value,active:V.value||O.value,centerAffix:S.value===1&&!N.value,dirty:O.value||e.dirty,disabled:G.value,focused:a.value,error:ne.value===!1}),{...l,default:le=>{let{props:{class:U,..._}}=le;return r(L,null,[e.prefix&&r("span",{class:"v-text-field__prefix"},[e.prefix]),$(r("textarea",b({ref:n,class:U,value:u.value,onInput:te,autofocus:e.autofocus,readonly:ae.value,disabled:G.value,placeholder:e.placeholder,rows:e.rows,name:e.name,onFocus:I,onBlur:H},_,f),null),[[ge("intersect"),{handler:d},null,{once:!0}]]),e.autoGrow&&$(r("textarea",{class:[U,"v-textarea__sizer"],id:`${_.id}-sizer`,"onUpdate:modelValue":oe=>u.value=oe,ref:P,readonly:!0,"aria-hidden":"true"},null),[[xe,u.value]]),e.suffix&&r("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:c?x=>{var k;return r(L,null,[(k=l.details)==null?void 0:k.call(l,x),t&&r(L,null,[r("span",null,null),r(Fe,{active:e.persistentCounter||a.value,value:M.value,max:o.value,disabled:e.disabled},l.counter)])])}:void 0})}),Y({},v,s,n)}});export{Ne as V,Te as a};

import{u as I}from"./resonator-CI3wZnhI.js";import{u as A}from"./damageAnalysis-C5QgBrL8.js";import{a5 as j,a6 as P,ag as F,a7 as q,am as $,G as D,H as n,L as z,J as c,c as f,a8 as t,ad as u,aa as o,ah as T,ac as k,a9 as r,M as y,ab as S,ai as H,an as L,Z as O,ao as b,_ as G}from"./index-xWvqgTdL.js";import{V as J}from"./VTooltip-DBp6MmYy.js";const Z={key:0},K={class:"d-flex flex-column align-start"},N={class:"d-flex flex-row mb-1"},Q={class:"d-flex flex-row justify-center mr-2"},U=["src"],W={class:"d-flex flex-row w-100"},X={class:"header"},Y=["href"],ee={class:"d-flex flex-row w-100"},te={class:"header text-truncater"},ae={class:"text-truncate"},se={class:"d-flex flex-row w-100"},ne={class:"header text-truncate"},re={class:"text-truncate"},oe={class:"d-flex flex-row align-center w-100"},le={key:0,class:"mr-4 text-truncate"},ce={class:"team d-flex flex-row justify-end h-100"},de=j({__name:"TeamTier",props:{title:{type:String,default:""},affixPolicy:{type:String,required:!0},templateIds:{type:Object,required:!0}},setup(M){const m=M,w=m.title,R=m.affixPolicy,x=m.templateIds,B=I(),V=A(),p=P({}),d=P([]),g=F(0);async function v(a){a.length!==0&&a.forEach(async _=>{const e=await V.getDamageAnalysisByTemplateId(_,R);if(e){const l=e.getTeamDamageDistribution();d.push(l),l.getResonatorNames().forEach(async i=>{if(!p[i]){const h=await B.getElementEnByName(i);p[i]=h}})}})}function E(){d.length>0&&(d.sort((a,_)=>{const e=parseFloat(a.getMaxTeamDPS()),l=parseFloat(_.getMaxTeamDPS());return!e||!l?0:l-e}),g.value=parseFloat(d[0].getMaxTeamDPS()))}function C(a){return a<2?"divide":""}return q(async()=>{await v(x)}),$(()=>x.length,async()=>{await v(x)}),$(()=>d.length,()=>{E()}),(a,_)=>(n(),D(z,{class:"h-100"},{default:c(()=>[f(u,{class:"mb-2 text-truncate"},{default:c(()=>[k(w)?(n(),o("h1",Z,r(k(w)),1)):T("",!0)]),_:1}),t("div",K,[(n(!0),o(y,null,S(d,(e,l)=>(n(),o("div",{class:"d-flex flex-column w-100 my-2",key:l},[t("div",N,[t("div",Q,[(n(!0),o(y,null,S(e.getResonatorIconSources(),s=>(n(),o("img",{class:"resonator mr-2",src:s},null,8,U))),256))]),f(H,null,{default:c(()=>[f(u,{class:"text-grey-darken-1"},{default:c(()=>[t("div",W,[t("span",X,r(a.$t("general.template_id"))+": ",1),t("a",{class:"text-decoration-none text-truncate",href:`/template/${e.getHashedTemplateID()}`},r(a.$t(e.template_id)),9,Y)])]),_:2},1024),f(u,{class:"text-grey-darken-1"},{default:c(()=>[t("div",ee,[t("span",te,r(a.$t("general.monster_id"))+": ",1),t("span",ae,r(a.$t(e.monster_id)),1)])]),_:2},1024),f(u,{class:"text-grey-darken-1"},{default:c(()=>[t("div",se,[t("span",ne,r(a.$t("general.team_dps"))+": ",1),t("span",re,r(e.getTeamDPSString()),1)])]),_:2},1024)]),_:2},1024)]),t("div",oe,[(n(),o("div",{class:"d-flex flex-row align-start w-100 bg-grey-darken-4",key:g.value},[t("div",{class:"d-flex flex-row align-start",style:L(`width: ${e.getTeamDPSPercentageString(g.value)};`)},[(n(!0),o(y,null,S(Object.keys(e.resonators),(s,i)=>(n(),D(J,{text:`${a.$t(s)} DPS: ${e.getResonatorDPSString(s)}
            (${e.getResonatorMaxDPSPercentageString(s)})`,location:"bottom"},{activator:c(({props:h})=>[t("div",O({class:"d-flex",ref_for:!0},h,{style:`width: ${e.getResonatorMaxDPSPercentageString(s)};`}),[t("div",{class:b(`barh w-100 d-flex flex-row-reverse align-center bg-${p[s]} ${C(i)}`)},[e.getResonatorMaxDPSPercentage(s)>.1?(n(),o("span",le,r(e.getResonatorMaxDPSPercentageString(s)),1)):T("",!0)],2)],16)]),_:2},1032,["text"]))),256))],4)])),t("div",ce,r(e.getTeamDPSPercentageString(g.value)),1)])]))),128))])]),_:1}))}}),ue=G(de,[["__scopeId","data-v-18ef5f14"]]);export{ue as _};

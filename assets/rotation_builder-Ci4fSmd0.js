import{_ as Be}from"./Explorer-Bob585fA.js";import{g as de,p as ce,ak as fe,al as Ae,a8 as f,am as xe,an as Ee,ae as j,ao as ne,b as ve,a5 as L,a,l as Ue,ap as me,aq as De,ar as ze,as as ke,j as E,at as ge,au as Ce,F as ee,av as Se,aw as Te,ax as Me,a0 as Oe,w as Ve,k as He,ay as je,az as Le,aA as Ge,d as Je,ac as We,Z as qe,N as W,o as q,O as i,a9 as Y,Q as ae,a1 as T,ah as R,ai as P,a2 as _,n as Qe,a4 as he,M as Ze}from"./index-D_UKwKBy.js";import{W as Ke}from"./Rotation-yYTffOLf.js";import{u as Xe}from"./resonator-BMEUadlQ.js";import{g as Ye,a as et}from"./rotation-Bc5cNI9Y.js";import{s as tt}from"./utils-CKOygh4Q.js";import{V as we,m as lt}from"./VOverlay-BFuWu1sH.js";import{a as at,u as Ie,b as ie,f as Pe,c as _e,d as $e,e as nt,m as Ne,g as Re,h as re,V as ot,i as ye}from"./VDataTable-vynbB3Ni.js";import{V as oe}from"./VCard-CGTKW7EZ.js";import{I as ut}from"./VAvatar-DLGjh_c-.js";import{V as pe}from"./VCombobox-D0X-mKo4.js";import{b as be}from"./route-block-B_A1xBdJ.js";import"./VTooltip-BWJ1mprC.js";import"./VList-C1hTlaGd.js";const it=ce({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...lt({origin:"center center",scrollStrategy:"block",transition:{component:at},zIndex:2400})},"VDialog"),ue=de()({name:"VDialog",props:it(),emits:{"update:modelValue":e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,F){let{emit:M,slots:b}=F;const d=fe(e,"modelValue"),{scopeId:w}=Ae(),o=f();function $(v){var g,x;const y=v.relatedTarget,p=v.target;if(y!==p&&((g=o.value)!=null&&g.contentEl)&&((x=o.value)!=null&&x.globalTop)&&![document,o.value.contentEl].includes(p)&&!o.value.contentEl.contains(p)){const m=De(o.value.contentEl);if(!m.length)return;const S=m[0],V=m[m.length-1];y===S?V.focus():S.focus()}}xe(()=>{document.removeEventListener("focusin",$)}),Ee&&j(()=>d.value&&e.retainFocus,v=>{v?document.addEventListener("focusin",$):document.removeEventListener("focusin",$)},{immediate:!0});function U(){var v;M("afterEnter"),(v=o.value)!=null&&v.contentEl&&!o.value.contentEl.contains(document.activeElement)&&o.value.contentEl.focus({preventScroll:!0})}function O(){M("afterLeave")}return j(d,async v=>{var y;v||(await ne(),(y=o.value.activatorEl)==null||y.focus({preventScroll:!0}))}),ve(()=>{const v=we.filterProps(e),y=L({"aria-haspopup":"dialog"},e.activatorProps),p=L({tabindex:-1},e.contentProps);return a(we,L({ref:o,class:["v-dialog",{"v-dialog--fullscreen":e.fullscreen,"v-dialog--scrollable":e.scrollable},e.class],style:e.style},v,{modelValue:d.value,"onUpdate:modelValue":g=>d.value=g,"aria-modal":"true",activatorProps:y,contentProps:p,height:e.fullscreen?void 0:e.height,width:e.fullscreen?void 0:e.width,maxHeight:e.fullscreen?void 0:e.maxHeight,maxWidth:e.fullscreen?void 0:e.maxWidth,role:"dialog",onAfterEnter:U,onAfterLeave:O},w),{activator:b.activator,default:function(){for(var g=arguments.length,x=new Array(g),m=0;m<g;m++)x[m]=arguments[m];return a(Ue,{root:"VDialog"},{default:()=>{var S;return[(S=b.default)==null?void 0:S.call(b,...x)]}})}})}),me({},o)}}),st=ce({chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},hideInput:Boolean,multiple:Boolean,showSize:{type:[Boolean,Number,String],default:!1,validator:e=>typeof e=="boolean"||[1e3,1024].includes(Number(e))},...Re({prependIcon:"$file"}),modelValue:{type:[Array,Object],default:e=>e.multiple?[]:null,validator:e=>ke(e).every(F=>F!=null&&typeof F=="object")},...Ne({clearable:!0})},"VFileInput"),rt=de()({name:"VFileInput",inheritAttrs:!1,props:st(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,F){let{attrs:M,emit:b,slots:d}=F;const{t:w}=ze(),o=fe(e,"modelValue",e.modelValue,u=>ke(u),u=>!e.multiple&&Array.isArray(u)?u[0]:u),{isFocused:$,focus:U,blur:O}=Ie(e),v=E(()=>typeof e.showSize!="boolean"?e.showSize:void 0),y=E(()=>(o.value??[]).reduce((u,r)=>{let{size:s=0}=r;return u+s},0)),p=E(()=>ge(y.value,v.value)),g=E(()=>(o.value??[]).map(u=>{const{name:r="",size:s=0}=u;return e.showSize?`${r} (${ge(s,v.value)})`:r})),x=E(()=>{var r;const u=((r=o.value)==null?void 0:r.length)??0;return e.showSize?w(e.counterSizeString,u,p.value):w(e.counterString,u)}),m=f(),S=f(),V=f(),H=E(()=>$.value||e.active),K=E(()=>["plain","underlined"].includes(e.variant));function c(){var u;V.value!==document.activeElement&&((u=V.value)==null||u.focus()),$.value||U()}function Q(u){var r;(r=V.value)==null||r.click()}function D(u){b("mousedown:control",u)}function G(u){var r;(r=V.value)==null||r.click(),b("click:control",u)}function Z(u){u.stopPropagation(),c(),ne(()=>{o.value=[],Se(e["onClick:clear"],u)})}return j(o,u=>{(!Array.isArray(u)||!u.length)&&V.value&&(V.value.value="")}),ve(()=>{const u=!!(d.counter||e.counter),r=!!(u||d.details),[s,I]=Ce(M),{modelValue:k,...N}=ie.filterProps(e),J=Pe(e);return a(ie,L({ref:m,modelValue:o.value,"onUpdate:modelValue":B=>o.value=B,class:["v-file-input",{"v-file-input--chips":!!e.chips,"v-file-input--hide":e.hideInput,"v-input--plain-underlined":K.value},e.class],style:e.style,"onClick:prepend":Q},s,N,{centerAffix:!K.value,focused:$.value}),{...d,default:B=>{let{id:z,isDisabled:l,isDirty:t,isReadonly:h,isValid:n}=B;return a($e,L({ref:S,"prepend-icon":e.prependIcon,onMousedown:D,onClick:G,"onClick:clear":Z,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},J,{id:z.value,active:H.value||t.value,dirty:t.value||e.dirty,disabled:l.value,focused:$.value,error:n.value===!1}),{...d,default:C=>{var le;let{props:{class:X,...te}}=C;return a(ee,null,[a("input",L({ref:V,type:"file",readonly:h.value,disabled:l.value,multiple:e.multiple,name:e.name,onClick:A=>{A.stopPropagation(),h.value&&A.preventDefault(),c()},onChange:A=>{if(!A.target)return;const se=A.target;o.value=[...se.files??[]]},onFocus:c,onBlur:O},te,I),null),a("div",{class:X},[!!((le=o.value)!=null&&le.length)&&!e.hideInput&&(d.selection?d.selection({fileNames:g.value,totalBytes:y.value,totalBytesReadable:p.value}):e.chips?g.value.map(A=>a(nt,{key:A,size:"small",text:A},null)):g.value.join(", "))])])}})},details:r?B=>{var z,l;return a(ee,null,[(z=d.details)==null?void 0:z.call(d,B),u&&a(ee,null,[a("span",null,null),a(_e,{active:!!((l=o.value)!=null&&l.length),value:x.value,disabled:e.disabled},d.counter)])])}:void 0})}),me({},m,S,V)}}),dt=ce({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,modelModifiers:Object,...Re(),...Ne()},"VTextarea"),ct=de()({name:"VTextarea",directives:{Intersect:ut},inheritAttrs:!1,props:dt(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,F){let{attrs:M,emit:b,slots:d}=F;const w=fe(e,"modelValue"),{isFocused:o,focus:$,blur:U}=Ie(e),O=E(()=>typeof e.counterValue=="function"?e.counterValue(w.value):(w.value||"").toString().length),v=E(()=>{if(M.maxlength)return M.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter});function y(s,I){var k,N;!e.autofocus||!s||(N=(k=I[0].target)==null?void 0:k.focus)==null||N.call(k)}const p=f(),g=f(),x=Te(""),m=f(),S=E(()=>e.persistentPlaceholder||o.value||e.active);function V(){var s;m.value!==document.activeElement&&((s=m.value)==null||s.focus()),o.value||$()}function H(s){V(),b("click:control",s)}function K(s){b("mousedown:control",s)}function c(s){s.stopPropagation(),V(),ne(()=>{w.value="",Se(e["onClick:clear"],s)})}function Q(s){var k;const I=s.target;if(w.value=I.value,(k=e.modelModifiers)!=null&&k.trim){const N=[I.selectionStart,I.selectionEnd];ne(()=>{I.selectionStart=N[0],I.selectionEnd=N[1]})}}const D=f(),G=f(+e.rows),Z=E(()=>["plain","underlined"].includes(e.variant));Me(()=>{e.autoGrow||(G.value=+e.rows)});function u(){e.autoGrow&&ne(()=>{if(!D.value||!g.value)return;const s=getComputedStyle(D.value),I=getComputedStyle(g.value.$el),k=parseFloat(s.getPropertyValue("--v-field-padding-top"))+parseFloat(s.getPropertyValue("--v-input-padding-top"))+parseFloat(s.getPropertyValue("--v-field-padding-bottom")),N=D.value.scrollHeight,J=parseFloat(s.lineHeight),B=Math.max(parseFloat(e.rows)*J+k,parseFloat(I.getPropertyValue("--v-input-control-height"))),z=parseFloat(e.maxRows)*J+k||1/0,l=Ge(N??0,B,z);G.value=Math.floor((l-k)/J),x.value=Le(l)})}Oe(u),j(w,u),j(()=>e.rows,u),j(()=>e.maxRows,u),j(()=>e.density,u);let r;return j(D,s=>{s?(r=new ResizeObserver(u),r.observe(D.value)):r==null||r.disconnect()}),xe(()=>{r==null||r.disconnect()}),ve(()=>{const s=!!(d.counter||e.counter||e.counterValue),I=!!(s||d.details),[k,N]=Ce(M),{modelValue:J,...B}=ie.filterProps(e),z=Pe(e);return a(ie,L({ref:p,modelValue:w.value,"onUpdate:modelValue":l=>w.value=l,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-input--plain-underlined":Z.value},e.class],style:e.style},k,B,{centerAffix:G.value===1&&!Z.value,focused:o.value}),{...d,default:l=>{let{id:t,isDisabled:h,isDirty:n,isReadonly:C,isValid:X}=l;return a($e,L({ref:g,style:{"--v-textarea-control-height":x.value},onClick:H,onMousedown:K,"onClick:clear":c,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},z,{id:t.value,active:S.value||n.value,centerAffix:G.value===1&&!Z.value,dirty:n.value||e.dirty,disabled:h.value,focused:o.value,error:X.value===!1}),{...d,default:te=>{let{props:{class:le,...A}}=te;return a(ee,null,[e.prefix&&a("span",{class:"v-text-field__prefix"},[e.prefix]),Ve(a("textarea",L({ref:m,class:le,value:w.value,onInput:Q,autofocus:e.autofocus,readonly:C.value,disabled:h.value,placeholder:e.placeholder,rows:e.rows,name:e.name,onFocus:V,onBlur:U},A,N),null),[[He("intersect"),{handler:y},null,{once:!0}]]),e.autoGrow&&Ve(a("textarea",{class:[le,"v-textarea__sizer"],id:`${A.id}-sizer`,"onUpdate:modelValue":se=>w.value=se,ref:D,readonly:!0,"aria-hidden":"true"},null),[[je,w.value]]),e.suffix&&a("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:I?l=>{var t;return a(ee,null,[(t=d.details)==null?void 0:t.call(d,l),s&&a(ee,null,[a("span",null,null),a(_e,{active:e.persistentCounter||o.value,value:O.value,max:v.value,disabled:e.disabled},d.counter)])])}:void 0})}),me({},p,g,m)}}),ft={class:"d-flex flex-column"},vt={class:"d-flex flex-row ml-auto"},mt={class:"d-flex flex-column"},gt={class:"d-flex flex-row ml-auto"},Vt={class:"d-flex flex-column"},ht={class:"d-flex flex-row ml-auto"},wt={class:"d-flex flex-column"},yt={class:"d-flex flex-row ml-auto"},pt={class:"container d-flex flex-column"},bt={class:"d-flex flex-row ml-auto mb-2"},Fe=Je({__name:"rotation_builder",setup(e){const{t:F}=We();let b=qe().query.spoiler;b==="true"||b===!0?b=!0:b=!1;const w=Xe().getNames(b),o=f(void 0),$=f([]),U=f(!1),O=f([]),v=f(!1),y=f(void 0),p=f(!1),g=f(void 0),x=f(!1),m=f(void 0),S=f(""),V=f(!1),H=f(void 0),K=[{title:F("general.row"),key:"id",width:"100px"},{title:F("general.resonator"),key:"resonator_name",width:"200px"},{title:F("general.action"),key:"action",width:"200px"},{title:"",key:"tools"}],c=f([{id:0,resonator_name:"",action:"",selected:!1,comment:""}]);function Q(){c.value.forEach((l,t)=>{l.id=t})}function D(){let l;U.value?l=!0:l=!1,c.value.forEach(t=>{t.selected=l}),o.value=void 0}function G(){let l=0;return c.value.forEach(t=>{t.selected&&(l+=1)}),l}function Z(l){const t=l.selected;t&&(o.value=l.id),!t&&l.id===o.value&&(o.value=void 0),U.value=!1}function u(){const l=c.value[H.value];l.id===H.value&&(l.comment=S.value.toString(),V.value=!1,S.value="")}function r(l,t){const h=[];for(let C=0;C<t;C++)h.push({id:0,resonator_name:"",action:"",selected:!1,comment:""});const n=[...c.value.slice(0,l),...h,...c.value.slice(l)];c.value=n,Q()}function s(){const l=Number(o.value);if(isNaN(l))return;const t=Number(y.value);isNaN(t)||(r(l,t),v.value=!1,y.value=void 0)}function I(){let l=Number(o.value);if(isNaN(l))return;const t=Number(g.value);isNaN(t)||(l+=1,r(l,t),p.value=!1,g.value=void 0)}function k(){Q();const l=c.value.length,t=l+Number(m.value);if(typeof t=="number"){for(let h=l;h<t;h++)c.value.push({id:h,resonator_name:"",action:"",selected:!1,comment:""});x.value=!1,m.value=void 0}}function N(){const l=[];c.value.forEach((t,h)=>{t.selected||l.push(t)}),c.value=l,Q()}function J(){tt(c.value)}const B=f("");function z(l){const t=l.target;if(!t.files||t.files.length===0)return;const h=t.files[0];B.value=h.name;const n=new FileReader;n.onload=C=>{var X;try{c.value=JSON.parse((X=C.target)==null?void 0:X.result)}catch(te){console.error("Invalid JSON file",te)}},n.readAsText(h)}return j(()=>JSON.stringify(c.value),()=>{const l=[];c.value.forEach(t=>{t.resonator_name&&t.action&&l.push(t)}),l.length>0?O.value=Ye(l):l.length===0&&(O.value=[])}),(l,t)=>{const h=Be;return q(),W(h,null,{default:i(()=>[o.value!==void 0?(q(),W(ue,{key:0,modelValue:v.value,"onUpdate:modelValue":t[2]||(t[2]=n=>v.value=n),width:"auto"},{default:i(()=>[a(oe,{"min-width":"400",title:l.$t("general.insert_above_at_n",{n:o.value+1})},{default:i(()=>[a(ae,null,{default:i(()=>[T("div",ft,[a(re,{modelValue:y.value,"onUpdate:modelValue":t[0]||(t[0]=n=>y.value=n),label:l.$t("general.row"),placeholder:"0"},null,8,["modelValue","label"]),T("div",vt,[a(R,{class:"mr-2",onClick:t[1]||(t[1]=n=>v.value=!1)},{default:i(()=>[P(_(l.$t("general.cancel")),1)]),_:1}),a(R,{onClick:s},{default:i(()=>[P(_(l.$t("general.confirm")),1)]),_:1})])])]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"])):Y("",!0),o.value!==void 0?(q(),W(ue,{key:1,modelValue:p.value,"onUpdate:modelValue":t[5]||(t[5]=n=>p.value=n),width:"auto"},{default:i(()=>[a(oe,{"min-width":"400",title:l.$t("general.insert_below_at_n",{n:o.value+1})},{default:i(()=>[a(ae,null,{default:i(()=>[T("div",mt,[a(re,{modelValue:g.value,"onUpdate:modelValue":t[3]||(t[3]=n=>g.value=n),label:l.$t("general.row"),placeholder:"0"},null,8,["modelValue","label"]),T("div",gt,[a(R,{class:"mr-2",onClick:t[4]||(t[4]=n=>p.value=!1)},{default:i(()=>[P(_(l.$t("general.cancel")),1)]),_:1}),a(R,{onClick:I},{default:i(()=>[P(_(l.$t("general.confirm")),1)]),_:1})])])]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"])):Y("",!0),a(ue,{modelValue:x.value,"onUpdate:modelValue":t[8]||(t[8]=n=>x.value=n),width:"auto"},{default:i(()=>[a(oe,{"min-width":"400",title:l.$t("general.insert_bottom")},{default:i(()=>[a(ae,null,{default:i(()=>[T("div",Vt,[a(re,{modelValue:m.value,"onUpdate:modelValue":t[6]||(t[6]=n=>m.value=n),label:l.$t("general.row"),placeholder:"0"},null,8,["modelValue","label"]),T("div",ht,[a(R,{class:"mr-2",onClick:t[7]||(t[7]=n=>x.value=!1)},{default:i(()=>[P(_(l.$t("general.cancel")),1)]),_:1}),a(R,{onClick:k},{default:i(()=>[P(_(l.$t("general.confirm")),1)]),_:1})])])]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"]),H.value!==void 0?(q(),W(ue,{key:2,modelValue:V.value,"onUpdate:modelValue":t[11]||(t[11]=n=>V.value=n),width:"auto"},{default:i(()=>[a(oe,{"min-width":"400",title:l.$t("general.nth_row_comment",{n:H.value+1})},{default:i(()=>[a(ae,null,{default:i(()=>[T("div",wt,[a(ct,{modelValue:S.value,"onUpdate:modelValue":t[9]||(t[9]=n=>S.value=n)},null,8,["modelValue"]),T("div",yt,[a(R,{class:"mr-2",onClick:t[10]||(t[10]=n=>{V.value=!1})},{default:i(()=>[P(_(l.$t("general.cancel")),1)]),_:1}),a(R,{onClick:u},{default:i(()=>[P(_(l.$t("general.confirm")),1)]),_:1})])])]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"])):Y("",!0),a(ae,{class:"mb-12"},{default:i(()=>[T("div",pt,[T("div",bt,[a(rt,{"max-width":"200","min-width":"200",label:l.$t("general.load_file"),class:"mr-2",accept:".json",variant:"outlined",density:"compact",onChange:z},null,8,["label"]),G()>0?(q(),W(R,{key:0,class:"mr-2",onClick:N},{default:i(()=>[P(_(l.$t("general.delete")),1)]),_:1})):Y("",!0),o.value!==void 0?(q(),W(R,{key:1,class:"mr-2",onClick:t[12]||(t[12]=n=>v.value=!0)},{default:i(()=>[P(_(l.$t("general.insert_above")),1)]),_:1})):Y("",!0),o.value!==void 0?(q(),W(R,{key:2,class:"mr-2",onClick:t[13]||(t[13]=n=>p.value=!0)},{default:i(()=>[P(_(l.$t("general.insert_below")),1)]),_:1})):Y("",!0),a(R,{class:"mr-2",onClick:t[14]||(t[14]=n=>x.value=!0)},{default:i(()=>[P(_(l.$t("general.insert_bottom")),1)]),_:1}),a(R,{onClick:J},{default:i(()=>[P(_(l.$t("general.download_json")),1)]),_:1})]),a(ot,{class:"table mb-2",headers:K,items:c.value,"items-per-page":c.value.length,"show-select":"",selected:$.value,"onUpdate:selected":t[17]||(t[17]=n=>$.value=n),"disable-sort":"","hide-default-footer":""},{"item.id":i(({item:n})=>[P(_(l.$t("general.nth_row",{n:n.id+1})),1)]),"header.data-table-select":i(()=>[a(ye,{modelValue:U.value,"onUpdate:modelValue":[t[15]||(t[15]=n=>U.value=n),t[16]||(t[16]=n=>D())],color:"primary"},null,8,["modelValue"])]),"item.data-table-select":i(({item:n})=>[a(ye,{modelValue:n.selected,"onUpdate:modelValue":[C=>n.selected=C,C=>Z(n)]},null,8,["modelValue","onUpdate:modelValue"])]),"item.resonator_name":i(({item:n})=>[a(pe,{modelValue:n.resonator_name,"onUpdate:modelValue":C=>n.resonator_name=C,items:he(w),variant:"outlined",width:"180px",density:"compact","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),"item.action":i(({item:n})=>[a(pe,{modelValue:n.action,"onUpdate:modelValue":C=>n.action=C,items:he(et)(),variant:"outlined",width:"180px",density:"compact","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),"item.tools":i(({item:n})=>[a(Qe,{class:"me-2",size:"small",onClick:C=>{V.value=!0,H.value=n.id}},{default:i(()=>t[18]||(t[18]=[P(" mdi-pencil ")])),_:2},1032,["onClick"])]),_:1},8,["items","items-per-page","selected"]),(q(),W(Ke,{rotation:O.value,key:JSON.stringify(c.value)},null,8,["rotation"]))])]),_:1})]),_:1})}}});typeof be=="function"&&be(Fe);const Ut=Ze(Fe,[["__scopeId","data-v-4e5bd9d9"]]);export{Ut as default};

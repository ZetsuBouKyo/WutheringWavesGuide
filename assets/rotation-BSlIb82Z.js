import{_ as be}from"./Explorer-D7LzBKl_.js";import{g as ce,p as fe,T as me,U as ke,W as f,X as ve,Y as Ce,Z as I,$ as O,b as ge,a0 as D,a as o,l as _e,a1 as Ve,a2 as Ee,j as z,a3 as Pe,a4 as Se,a5 as Ie,a6 as Fe,F as Q,w as ae,k as Re,a7 as Be,a8 as $e,a9 as Ue,aa as Ne,d as De,ab as Ae,ac as Te,N as A,o as T,O as u,ad as X,Q as Y,ae as N,af as B,S as b,ag as S,n as He,ah as le,M as Me}from"./index-DkUckFSw.js";import{_ as ze}from"./Rotation-DGDU4ihd.js";import{u as Oe}from"./resonator-CoHLwm5u.js";import{g as Le,a as Ge}from"./rotation-C1hpsLpc.js";import{V as oe,m as We}from"./VOverlay-BZiYT6xW.js";import{V as je,u as Je,a as ne,f as qe,b as Qe,c as Xe,m as Ye,d as Ze,e as Ke,g as et,h as ue,i as ie}from"./VDataTable-OhqoLtZ2.js";import{V as se}from"./VCard-C4tFH19Y.js";import{I as tt}from"./VAvatar-CvSwq5Jc.js";import{b as re}from"./route-block-B_A1xBdJ.js";import"./utils-CBNJlnqw.js";import"./VTooltip-C-KzMpo6.js";import"./VList-D2o6ZNzm.js";const at=fe({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...We({origin:"center center",scrollStrategy:"block",transition:{component:je},zIndex:2400})},"VDialog"),de=ce()({name:"VDialog",props:at(),emits:{"update:modelValue":e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,$){let{emit:F,slots:x}=$;const v=me(e,"modelValue"),{scopeId:g}=ke(),n=f();function k(s){var d,V;const h=s.relatedTarget,w=s.target;if(h!==w&&((d=n.value)!=null&&d.contentEl)&&((V=n.value)!=null&&V.globalTop)&&![document,n.value.contentEl].includes(w)&&!n.value.contentEl.contains(w)){const c=Ee(n.value.contentEl);if(!c.length)return;const i=c[0],_=c[c.length-1];h===i?_.focus():i.focus()}}ve(()=>{document.removeEventListener("focusin",k)}),Ce&&I(()=>v.value&&e.retainFocus,s=>{s?document.addEventListener("focusin",k):document.removeEventListener("focusin",k)},{immediate:!0});function C(){var s;F("afterEnter"),(s=n.value)!=null&&s.contentEl&&!n.value.contentEl.contains(document.activeElement)&&n.value.contentEl.focus({preventScroll:!0})}function R(){F("afterLeave")}return I(v,async s=>{var h;s||(await O(),(h=n.value.activatorEl)==null||h.focus({preventScroll:!0}))}),ge(()=>{const s=oe.filterProps(e),h=D({"aria-haspopup":"dialog"},e.activatorProps),w=D({tabindex:-1},e.contentProps);return o(oe,D({ref:n,class:["v-dialog",{"v-dialog--fullscreen":e.fullscreen,"v-dialog--scrollable":e.scrollable},e.class],style:e.style},s,{modelValue:v.value,"onUpdate:modelValue":d=>v.value=d,"aria-modal":"true",activatorProps:h,contentProps:w,height:e.fullscreen?void 0:e.height,width:e.fullscreen?void 0:e.width,maxHeight:e.fullscreen?void 0:e.maxHeight,maxWidth:e.fullscreen?void 0:e.maxWidth,role:"dialog",onAfterEnter:C,onAfterLeave:R},g),{activator:x.activator,default:function(){for(var d=arguments.length,V=new Array(d),c=0;c<d;c++)V[c]=arguments[c];return o(_e,{root:"VDialog"},{default:()=>{var i;return[(i=x.default)==null?void 0:i.call(x,...V)]}})}})}),Ve({},n)}}),lt=fe({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,modelModifiers:Object,...Ze(),...Ye()},"VTextarea"),ot=ce()({name:"VTextarea",directives:{Intersect:tt},inheritAttrs:!1,props:lt(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,$){let{attrs:F,emit:x,slots:v}=$;const g=me(e,"modelValue"),{isFocused:n,focus:k,blur:C}=Je(e),R=z(()=>typeof e.counterValue=="function"?e.counterValue(g.value):(g.value||"").toString().length),s=z(()=>{if(F.maxlength)return F.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter});function h(t,r){var y,p;!e.autofocus||!t||(p=(y=r[0].target)==null?void 0:y.focus)==null||p.call(y)}const w=f(),d=f(),V=Pe(""),c=f(),i=z(()=>e.persistentPlaceholder||n.value||e.active);function _(){var t;c.value!==document.activeElement&&((t=c.value)==null||t.focus()),n.value||k()}function L(t){_(),x("click:control",t)}function G(t){x("mousedown:control",t)}function W(t){t.stopPropagation(),_(),O(()=>{g.value="",Ne(e["onClick:clear"],t)})}function j(t){var y;const r=t.target;if(g.value=r.value,(y=e.modelModifiers)!=null&&y.trim){const p=[r.selectionStart,r.selectionEnd];O(()=>{r.selectionStart=p[0],r.selectionEnd=p[1]})}}const E=f(),U=f(+e.rows),l=z(()=>["plain","underlined"].includes(e.variant));Se(()=>{e.autoGrow||(U.value=+e.rows)});function a(){e.autoGrow&&O(()=>{if(!E.value||!d.value)return;const t=getComputedStyle(E.value),r=getComputedStyle(d.value.$el),y=parseFloat(t.getPropertyValue("--v-field-padding-top"))+parseFloat(t.getPropertyValue("--v-input-padding-top"))+parseFloat(t.getPropertyValue("--v-field-padding-bottom")),p=E.value.scrollHeight,H=parseFloat(t.lineHeight),J=Math.max(parseFloat(e.rows)*H+y,parseFloat(r.getPropertyValue("--v-input-control-height"))),q=parseFloat(e.maxRows)*H+y||1/0,P=Ue(p??0,J,q);U.value=Math.floor((P-y)/H),V.value=$e(P)})}Ie(a),I(g,a),I(()=>e.rows,a),I(()=>e.maxRows,a),I(()=>e.density,a);let m;return I(E,t=>{t?(m=new ResizeObserver(a),m.observe(E.value)):m==null||m.disconnect()}),ve(()=>{m==null||m.disconnect()}),ge(()=>{const t=!!(v.counter||e.counter||e.counterValue),r=!!(t||v.details),[y,p]=Fe(F),{modelValue:H,...J}=ne.filterProps(e),q=qe(e);return o(ne,D({ref:w,modelValue:g.value,"onUpdate:modelValue":P=>g.value=P,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-input--plain-underlined":l.value},e.class],style:e.style},y,J,{centerAffix:U.value===1&&!l.value,focused:n.value}),{...v,default:P=>{let{id:M,isDisabled:Z,isDirty:K,isReadonly:he,isValid:we}=P;return o(Xe,D({ref:d,style:{"--v-textarea-control-height":V.value},onClick:L,onMousedown:G,"onClick:clear":W,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},q,{id:M.value,active:i.value||K.value,centerAffix:U.value===1&&!l.value,dirty:K.value||e.dirty,disabled:Z.value,focused:n.value,error:we.value===!1}),{...v,default:ye=>{let{props:{class:ee,...te}}=ye;return o(Q,null,[e.prefix&&o("span",{class:"v-text-field__prefix"},[e.prefix]),ae(o("textarea",D({ref:c,class:ee,value:g.value,onInput:j,autofocus:e.autofocus,readonly:he.value,disabled:Z.value,placeholder:e.placeholder,rows:e.rows,name:e.name,onFocus:_,onBlur:C},te,p),null),[[Re("intersect"),{handler:h},null,{once:!0}]]),e.autoGrow&&ae(o("textarea",{class:[ee,"v-textarea__sizer"],id:`${te.id}-sizer`,"onUpdate:modelValue":pe=>g.value=pe,ref:E,readonly:!0,"aria-hidden":"true"},null),[[Be,g.value]]),e.suffix&&o("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:r?P=>{var M;return o(Q,null,[(M=v.details)==null?void 0:M.call(v,P),t&&o(Q,null,[o("span",null,null),o(Qe,{active:e.persistentCounter||n.value,value:R.value,max:s.value,disabled:e.disabled},v.counter)])])}:void 0})}),Ve({},w,d,c)}}),nt={class:"d-flex flex-column"},ut={class:"d-flex flex-row ml-auto"},it={class:"d-flex flex-column"},st={class:"d-flex flex-row ml-auto"},rt={class:"container d-flex flex-column"},dt={class:"d-flex flex-row ml-auto mb-2"},xe=De({__name:"rotation",setup(e){const{t:$}=Ae();let x=Te().query.spoiler;x==="true"||x===!0?x=!0:x=!1;const g=Oe().getNames(x),n=f(void 0),k=f([]),C=f(!1),R=f([]),s=f(!1),h=f(0),w=f(""),d=f(!1),V=f(void 0),c=[{title:"ID",key:"id",width:"100px"},{title:$("general.resonator"),key:"resonator_name",width:"200px"},{title:$("general.action"),key:"action",width:"200px"},{title:"",key:"tools"}],i=f([{id:0,resonator_name:"",action:"",selected:!1,comment:""}]);function _(){i.value.forEach((l,a)=>{l.id=a})}function L(){let l;C.value?l=!0:l=!1,i.value.forEach(a=>{a.selected=l}),n.value=void 0}function G(){let l=0;return i.value.forEach(a=>{a.selected&&(l+=1)}),l}function W(l){const a=l.selected;a&&(n.value=l.id),!a&&l.id===n.value&&(n.value=void 0),C.value=!1}function j(){const l=i.value[V.value];l.id===V.value&&(l.comment=w.value.toString(),d.value=!1,w.value="")}function E(){_();const l=i.value.length,a=l+Number(h.value);if(typeof a=="number"){for(let m=l;m<a;m++)i.value.push({id:m,resonator_name:"",action:"",selected:!1,comment:""});s.value=!1}}function U(){const l=[];i.value.forEach((a,m)=>{a.selected||l.push(a)}),i.value=l,_()}return I(()=>JSON.stringify(i.value),()=>{const l=[];i.value.forEach(a=>{a.resonator_name&&a.action&&l.push(a)}),l.length>0?R.value=Le(l):l.length===0&&(R.value=[])}),(l,a)=>{const m=be;return T(),A(m,null,{default:u(()=>[o(de,{modelValue:s.value,"onUpdate:modelValue":a[2]||(a[2]=t=>s.value=t),width:"auto"},{default:u(()=>[o(se,{"min-width":"400",title:l.$t("general.insert_bottom")},{default:u(()=>[o(Y,null,{default:u(()=>[N("div",nt,[o(Ke,{modelValue:h.value,"onUpdate:modelValue":a[0]||(a[0]=t=>h.value=t),label:l.$t("general.row")},null,8,["modelValue","label"]),N("div",ut,[o(B,{class:"mr-2",onClick:a[1]||(a[1]=t=>s.value=!1)},{default:u(()=>[b(S(l.$t("general.cancel")),1)]),_:1}),o(B,{onClick:E},{default:u(()=>[b(S(l.$t("general.confirm")),1)]),_:1})])])]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"]),V.value!==void 0?(T(),A(de,{key:0,modelValue:d.value,"onUpdate:modelValue":a[5]||(a[5]=t=>d.value=t),width:"auto"},{default:u(()=>[o(se,{"min-width":"400",title:l.$t("general.nth_row_comment",{n:V.value+1})},{default:u(()=>[o(Y,null,{default:u(()=>[N("div",it,[o(ot,{modelValue:w.value,"onUpdate:modelValue":a[3]||(a[3]=t=>w.value=t)},null,8,["modelValue"]),N("div",st,[o(B,{class:"mr-2",onClick:a[4]||(a[4]=t=>{d.value=!1})},{default:u(()=>[b(S(l.$t("general.cancel")),1)]),_:1}),o(B,{onClick:j},{default:u(()=>[b(S(l.$t("general.confirm")),1)]),_:1})])])]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"])):X("",!0),o(Y,{class:"mb-12"},{default:u(()=>[N("div",rt,[N("div",dt,[G()>0?(T(),A(B,{key:0,class:"mr-2",onClick:U},{default:u(()=>[b(S(l.$t("general.delete")),1)]),_:1})):X("",!0),n.value!==void 0?(T(),A(B,{key:1,class:"mr-2",onClick:a[6]||(a[6]=()=>{})},{default:u(()=>[b(S(l.$t("general.insert_below")),1)]),_:1})):X("",!0),o(B,{onClick:a[7]||(a[7]=t=>s.value=!0)},{default:u(()=>[b(S(l.$t("general.insert_bottom")),1)]),_:1})]),o(et,{class:"table mb-2",headers:c,items:i.value,"items-per-page":i.value.length,"show-select":"",selected:k.value,"onUpdate:selected":a[10]||(a[10]=t=>k.value=t),"disable-sort":"","hide-default-footer":""},{"item.id":u(({item:t})=>[b(S(l.$t("general.nth_row",{n:t.id+1})),1)]),"header.data-table-select":u(()=>[o(ie,{modelValue:C.value,"onUpdate:modelValue":[a[8]||(a[8]=t=>C.value=t),a[9]||(a[9]=t=>L())],color:"primary"},null,8,["modelValue"])]),"item.data-table-select":u(({item:t})=>[o(ie,{modelValue:t.selected,"onUpdate:modelValue":[r=>t.selected=r,r=>W(t)]},null,8,["modelValue","onUpdate:modelValue"])]),"item.resonator_name":u(({item:t})=>[o(ue,{modelValue:t.resonator_name,"onUpdate:modelValue":r=>t.resonator_name=r,items:le(g),variant:"outlined",width:"180px",density:"compact","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),"item.action":u(({item:t})=>[o(ue,{modelValue:t.action,"onUpdate:modelValue":r=>t.action=r,items:le(Ge)(),variant:"outlined",width:"180px",density:"compact","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),"item.tools":u(({item:t})=>[o(He,{class:"me-2",size:"small",onClick:r=>{d.value=!0,V.value=t.id}},{default:u(()=>a[11]||(a[11]=[b(" mdi-pencil ")])),_:2},1032,["onClick"])]),_:1},8,["items","items-per-page","selected"]),(T(),A(ze,{rotation:R.value,key:JSON.stringify(i.value)},null,8,["rotation"]))])]),_:1})]),_:1})}}});typeof re=="function"&&re(xe);const Ct=Me(xe,[["__scopeId","data-v-88be687c"]]);export{Ct as default};

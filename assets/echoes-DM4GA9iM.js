var Is=Object.defineProperty;var Ns=(E,s,t)=>s in E?Is(E,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):E[s]=t;var i=(E,s,t)=>Ns(E,typeof s!="symbol"?s+"":s,t);import{d,c as L,D as u,m as Bs,t as p}from"./utils-CVNhfOQy.js";import{t as m,v as ws,r as w,S as h,w as R,x as Y,B as r,u as ss,k as T,l as c,y as Os,W as ys,z as C,d as vs,h as F,j as k,A as bs,g as J,C as M,E as f,D as l,F as b}from"./resonator-Clxzse8a.js";import{aZ as $,ai as xs}from"./index-CLIljLmA.js";import{A as B}from"./affix-NmzP8Gk5.js";class y{constructor(s={}){i(this,"id","");i(this,"type","");i(this,"level","");i(this,"base_attr","");i(this,"bonus_types",[]);i(this,"elment_zh_tw","");i(this,"dmg","");i(this,"hit","1");!s||Object.keys(s).length===0||Object.assign(this,s)}duplicate(){const s=new y;return s.id=this.id,s.type=this.type,s.level=this.level,s.base_attr=this.base_attr,s.bonus_types=this.bonus_types,s.elment_zh_tw=this.elment_zh_tw,s.dmg=this.dmg,s}getBonusTypesString(){return this.bonus_types.join(", ")}}class G{constructor(s={}){i(this,"id","");i(this,"no","");i(this,"name","");i(this,"element_en","");i(this,"element_zh_tw","");i(this,"level","90");i(this,"chain","0");i(this,"hp","");i(this,"atk","");i(this,"def","");i(this,"energy_regen","100.00%");i(this,"normal_attack_lv","10");i(this,"resonance_skill_lv","10");i(this,"forte_circuit_lv","10");i(this,"resonance_liberation_lv","10");i(this,"intro_skill_lv","10");i(this,"inherent_skill_1",!0);i(this,"inherent_skill_2",!0);i(this,"stat_bonus",new m);i(this,"skill",new y);i(this,"_skill_item",{title:"",value:void 0});i(this,"_info");if(!s||Object.keys(s).length===0)return;const{stat_bonus:t,skill:e,_skill_item:a,_info:o,...n}=s;Object.assign(this,n),this.stat_bonus=new m(t),this.skill=new y(e),s._skill_item.title&&(this._skill_item.title=s._skill_item.title),s._skill_item.value&&(this._skill_item.value=new y(s._skill_item.value)),this._info=new ws(o)}duplicate(){const s=new G;return s.id=this.id,s.no=this.no,s.name=this.name,s.element_zh_tw=this.element_zh_tw,s.level=this.level,s.chain=this.chain,s.hp=this.hp,s.atk=this.atk,s.def=this.def,s.energy_regen=this.energy_regen,s.normal_attack_lv=this.normal_attack_lv,s.resonance_skill_lv=this.resonance_skill_lv,s.forte_circuit_lv=this.forte_circuit_lv,s.resonance_liberation_lv=this.resonance_liberation_lv,s.intro_skill_lv=this.intro_skill_lv,s.inherent_skill_1=this.inherent_skill_1,s.inherent_skill_2=this.inherent_skill_2,s.stat_bonus=this.stat_bonus.duplicate(),s.skill=this.skill.duplicate(),s._skill_item={title:this._skill_item.title,value:void 0},this._skill_item.value!==void 0&&(s._skill_item.value=this._skill_item.value.duplicate()),this._info!==void 0&&(s._info=this._info.duplicate()),s}getId(){return`+${this.chain}${this.name}`}getJson(){return JSON.parse(JSON.stringify(this))}getBaseAttrs(){const s=[],t=new w;t.stack="1";let e,a=this.skill.base_attr;switch(this.skill.base_attr){case h.HP:e=d(this.hp).toString();break;case h.DEF:e=d(this.def).toString();break;case h.ATK:default:e=d(this.atk).toString(),a=h.ATK;break}return this.name&&(a=`${this.name}-${a}`),t.category=R.ATTR,t.source=a,t.value=e,t.type=Y.ATTR,t.updateId(),s.push(t),s}getRowBuffs(){return this.stat_bonus.getRowBuffs(this.name)}getSkillRowBuffs(){const s=[],t=new w;t.category=R.RESONATOR,t.type=r.SKILL_DMG_ADDITION,t.value=d(this.skill.dmg).toString(),t.stack="1";let e="";return this.name&&(e=this.name),this.skill.type&&(e=`${e}-${this.skill.type}`),this.skill.id&&(e=`${e}-${this.skill.id}`),t.source=e,t.updateId(),t.value&&s.push(t),s}async updateByLevel(s=""){var t;if(s?this.level=s:s=this.level,!!s&&this.name){if(!((t=this._info)!=null&&t.attrs.length)){const a=await ss().getInfoByName(this.name);this._info=a}this.hp=this._info.getHp(s),this.atk=this._info.getAtk(s),this.def=this._info.getDef(s)}}async updateByName(){const s=ss();this.stat_bonus=new m,this.skill=new y,this._skill_item={title:"",value:void 0};const t=this.name,e=s.getNoByName(t);if(!e)return;this.no=e;const a=await s.getInfoByName(t);this._info=a,this.element_en=a.element_en,this.element_zh_tw=a.element_zh_tw,this.updateByLevel();const o=a.stat_bonus;Object.keys(o).forEach(n=>{const g=o[n];this.stat_bonus[n]=g})}updateSkillDmg(s){if(s.dmg){this.skill.dmg=s.dmg;return}const t=this.skill.type;let e;switch(t){case T.NORMAL_ATTACK:e=this.normal_attack_lv;break;case T.RESONANCE_SKILL:e=this.resonance_skill_lv;break;case T.FORTE_CIRCUIT:e=this.forte_circuit_lv;break;case T.RESONANCE_LIBERATION:e=this.resonance_liberation_lv;break;case T.INTRO_SKILL:e=this.intro_skill_lv;break;default:e="10"}this.skill.level=e,this.skill.dmg=s[`lv${e}`]}updateSkill(s=void 0){if(!s){if(!this._skill_item)return;s=this._skill_item.value}s&&(this.skill=new y,this.skill.id=s.id,this.skill.type=s.skill_type,this.skill.base_attr=s.base_attr,s.element&&(this.skill.elment_zh_tw=s.element,this.skill.bonus_types.push(s.element)),s.bonus_type&&this.skill.bonus_types.push(s.bonus_type),s.coordinated&&this.skill.bonus_types.push(c.COORDINATED_ATTACK),this.updateSkillDmg(s))}updateSkillById(s){var e;let t=(e=this._info)==null?void 0:e.getDamageSkillItemById(s);t||(t=Os(s)),t&&this.updateSkill(t.value)}}class U{constructor(s={}){i(this,"no","");i(this,"name","");i(this,"star","");i(this,"type","");i(this,"level","90");i(this,"tune","1");i(this,"atk","");i(this,"stat_bonus",new m);i(this,"passive_stat_bonus",new m);i(this,"_info");if(!s||Object.keys(s).length===0)return;const{stat_bonus:t,passive_stat_bonus:e,_info:a,...o}=s;Object.assign(this,o),this.stat_bonus=new m(t),this.passive_stat_bonus=new m(e),this._info=new ys(a)}duplicate(){const s=new U;return s.no=this.no,s.name=this.name,s.star=this.star,s.type=this.type,s.level=this.level,s.tune=this.tune,s.atk=this.atk,s.stat_bonus=this.stat_bonus.duplicate(),s.passive_stat_bonus=this.passive_stat_bonus.duplicate(),this._info!==void 0&&(s._info=this._info.duplicate()),s}getId(){return`+${this.tune}${this.name}`}getJson(){return JSON.parse(JSON.stringify(this))}getBaseAttrs(){const s=[],t=new w;let e=h.ATK;return this.name&&(e=`${this.name}-${e}`),t.source=e,t.category=R.ATTR,t.value=this.atk,t.stack="1",t.type=Y.ATTR,t.updateId(),t.value&&s.push(t),s}getRowBuffs(){let s="";this.name&&(s=this.name),this.tune&&(s=`${s}-${this.tune}${C.TUNE}`);let t=`${s}-${C.PASSIVE}`;const e=this.passive_stat_bonus.getRowBuffs(t);return[...this.stat_bonus.getRowBuffs(s),...e]}getMaxLevel(){return this._info?this._info.getMaxLevel():"90"}getLevels(){const s=new Array("1","20","20+","40","40+","50","50+","60","60+","70","70+","80","80+","90"),t=[],e=d(this.getMaxLevel());s.forEach(o=>{d(o)<=e&&t.push(o)});const a=t.at(-1);return a&&a.includes("+")&&t.pop(),t}async updateRowWeaponByName(){const s=this.name;if(!s)return;const t=vs();this.stat_bonus=new m,this.passive_stat_bonus=new m;const e=t.getNoByName(s);if(this.no=e,!this.no)return;const a=await t.getInfoByNo(e);if(!a)return;this._info=a,this.star=a.star,this.type=a.type;const o=a.getMaxLevel(),n=d(this.level),g=d(o);n>g?this.level=o:n===g&&this.level.includes("+")&&(this.level=o);const N=this.level;if(N){this.atk=a.getAtk(N);const S=a.getStatBonus(N);Object.keys(S).forEach(I=>{const O=S[I];this.stat_bonus[I]=d(O).toString()})}if(this.tune){const S=a.getPassiveStatBonus(this.tune);Object.keys(S).forEach(I=>{const O=S[I];this.passive_stat_bonus[I]=d(O).toString()})}}}const A={HECATE:"赫卡忒",SENTRY_CONSTRUCT:"異構武裝",LORELEI:"羅蕾萊",NIGHTMARE_INFERNO_RIDER:"夢魘·燎照之騎",NIGHTMARE_THUNDERING_MEPHIS:"夢魘·雲閃之鱗",NIGHTMARE_TEMPEST_MEPHIS:"夢魘·朔雷之鱗",DRAGON_OF_DIRGE:"嘆息古龍",NIGHTMARE_CROWNLESS:"夢魘·無冠者",NIGHTMARE_MOURNING_AIX:"夢魘·哀聲鷙",NIGHTMARE_IMPERMANENCE_HERON:"夢魘·無常凶鷺",NIGHTMARE_FEILIAN_BERINGAL:"夢魘·飛廉之猩",CAPITANEUS:"榮光節使"},_={FREEZING_FROST:"凝夜白霜",MOLTEN_RIFT:"熔山裂谷",VOID_THUNDER:"徹空冥雷",SIERRA_GALE:"嘯谷長風",CELESTIAL_LIGHT:"浮星祛暗",SUN_SINKING_ECLIPSE:"沉日劫明",REJUVENATING_GLOW:"隱世回光",MOONLIT_CLOUDS:"輕雲出月",LINGERING_TUNES:"不絕餘音",FROSTY_RESOLVE:"凌冽決斷之心",ETERNAL_RADIANCE:"此間永駐之光",MIDNIGHT_VEIL:"幽夜隱匿之帷",EMPYREAN_ANTHEM:"高天共奏之曲",TIDEBREAKING_COURAGE:"無懼浪濤之勇"};class H{constructor(s={}){i(this,"no","");i(this,"name","");i(this,"sonata","");i(this,"cost","");i(this,"abbr","");i(this,"main_affix",new m);i(this,"sub_affix",new m);i(this,"_fixed_main_affix_key","");i(this,"_main_affix_item",{title:"",value:void 0});i(this,"_main_affix_items",[]);i(this,"_item",{title:"",value:void 0});i(this,"_sonatas",this.getSonataNames());if(!s||Object.keys(s).length===0)return;const{main_affix:t,sub_affix:e,...a}=s;Object.assign(this,a),this.main_affix=new m(t),this.sub_affix=new m(e)}duplicate(){const s=new H;return s.no=this.no,s.name=this.name,s.sonata=this.sonata,s.main_affix=this.main_affix.duplicate(),s.sub_affix=this.sub_affix.duplicate(),s._fixed_main_affix_key=this._fixed_main_affix_key,s._main_affix_item=JSON.parse(JSON.stringify(this._main_affix_item)),s._main_affix_items=JSON.parse(JSON.stringify(this._main_affix_items)),s._item=JSON.parse(JSON.stringify(this._item)),s._sonatas=JSON.parse(JSON.stringify(this._sonatas)),s}reset(){this.cost="",this._item={title:"",value:void 0},this.resetMainAffix(),this.resetSubAffix()}resetMainAffix(){this.main_affix=new m,this._fixed_main_affix_key="",this._main_affix_item={title:"",value:void 0}}resetSubAffix(){this.sub_affix=new m}getId(){return`${this.cost}${this.abbr}`}getCosts(){return F().getCosts()}getEchoItems(){return F().getEchoItemsForCalculation()}getSonataNames(){return F().getSonataNames()}getSubAffixKeys(){return F().getSubAffixKeys()}updateByCost(s){if(!s)return;switch(this.cost=s,this.updateMainAffixKeysByCost(),this.resetMainAffix(),this.cost){case"4":case"3":this._fixed_main_affix_key=k.ATK;break;case"1":this._fixed_main_affix_key=k.HP;break}const t=bs(this.cost);this.main_affix[this._fixed_main_affix_key]=t[this._fixed_main_affix_key],this._main_affix_item={title:"",value:void 0}}updateByEchoItem(s){(!s||!s.title||!s.value)&&(s=this._item),!(!s||!s.title||!s.value)&&(this.name=s.value.name,s.value.sonatas&&s.value.sonatas.length>0?this._sonatas=s.value.sonatas:this._sonatas=this.getSonataNames(),this.sonata="",this._sonatas.length===1&&(this.sonata=this._sonatas[0]),this._item=s,this.updateByCost(s.value.cost))}updateMainAffix(s){const t=this.cost;if(!s||!t)return;this._main_affix_item={title:J(s),value:s};const e=M(t);this.main_affix[s]=e[s]}updateMainAffixKeysByCost(){const s=this.cost;if(!s)return;const t=M(s);this._main_affix_items=Object.keys(t).map((e,a,o)=>({title:J(e),value:e}))}}class K{constructor(s={}){i(this,"name1","");i(this,"sonatas",[]);i(this,"total_cost",0);i(this,"main_affix",new m);i(this,"sub_affix",new m);i(this,"stat_bonus",new m);if(!s||Object.keys(s).length===0)return;const{main_affix:t,sub_affix:e,...a}=s;Object.assign(this,a),this.main_affix=new m(t),this.sub_affix=new m(e)}duplicate(){const s=new K;return s.name1=this.name1,s.sonatas=JSON.parse(JSON.stringify(this.sonatas)),s.total_cost=this.total_cost,s.main_affix=this.main_affix.duplicate(),s.sub_affix=this.sub_affix.duplicate(),s}getRowBuffs(){const s=this.main_affix.getRowBuffs(`${R.ECHO}-${C.MAIN_AFFIX}`),t=this.sub_affix.getRowBuffs(`${R.ECHO}-${C.SUB_AFFIX}`);return[...s,...t]}getStat(s){return L(this.main_affix[s]).plus(L(this.sub_affix[s])).plus(L(this.stat_bonus[s])).toString()}}class D{constructor(s={}){i(this,"policy","");i(this,"base_attr","");i(this,"main_skill_bonus","");i(this,"echoes",[]);i(this,"summary",new K);if(!s||Object.keys(s).length===0){this.echoes=Array.from({length:5},(o,n)=>new H);return}const{echoes:t,summary:e,...a}=s;Object.assign(this,a),this.echoes=[],t.forEach(o=>{this.echoes.push(new H(o))}),this.summary=new K(e)}duplicate(){const s=new D;return s.policy=this.policy,s.base_attr=this.base_attr,this.echoes.forEach((t,e)=>{s.echoes[e]=t.duplicate()}),s.summary=this.summary.duplicate(),s}getId(){let s="";return this.echoes.forEach(t=>{s=`${s}${t.getId()}`}),s}getJson(){return JSON.parse(JSON.stringify(this))}getRowBuffs(){return this.summary.getRowBuffs()}getPassiveSkillRowBuff(s,t,e,a,o){const n=new w;return n.category=R.ECHO,n.source=s,n.type=t,n.value=o,n.stack="1",n.element=e,n.skill_bonus_type=a,n.updateId(),n}getPassiveSkillRowBuffs(){const s=[],t=this.summary.name1;if(!t)return s;const e=`${t}-${C.MAIN_SLOT}`;switch(t){case A.HECATE:s.push(this.getPassiveSkillRowBuff(e,r.BONUS,"",c.COORDINATED_ATTACK,"0.4"));break;case A.SENTRY_CONSTRUCT:s.push(this.getPassiveSkillRowBuff(e,r.BONUS,f.GLACIO,"","0.12")),s.push(this.getPassiveSkillRowBuff(e,r.BONUS,"",c.SKILL,"0.12"));break;case A.LORELEI:s.push(this.getPassiveSkillRowBuff(e,r.BONUS,f.HAVOC,"","0.12")),s.push(this.getPassiveSkillRowBuff(e,r.BONUS,"",c.BASIC,"0.12"));break;case A.NIGHTMARE_INFERNO_RIDER:s.push(this.getPassiveSkillRowBuff(e,r.BONUS,f.FUSION,"","0.12")),s.push(this.getPassiveSkillRowBuff(e,r.BONUS,"",c.SKILL,"0.12"));break;case A.NIGHTMARE_THUNDERING_MEPHIS:s.push(this.getPassiveSkillRowBuff(e,r.BONUS,f.ELECTRO,"","0.12")),s.push(this.getPassiveSkillRowBuff(e,r.BONUS,"",c.LIBERATION,"0.12"));break;case A.NIGHTMARE_TEMPEST_MEPHIS:s.push(this.getPassiveSkillRowBuff(e,r.BONUS,f.ELECTRO,"","0.12")),s.push(this.getPassiveSkillRowBuff(e,r.BONUS,"",c.SKILL,"0.12"));break;case A.DRAGON_OF_DIRGE:s.push(this.getPassiveSkillRowBuff(e,r.BONUS,f.FUSION,"","0.12")),s.push(this.getPassiveSkillRowBuff(e,r.BONUS,"",c.BASIC,"0.12"));break;case A.NIGHTMARE_CROWNLESS:s.push(this.getPassiveSkillRowBuff(e,r.BONUS,f.HAVOC,"","0.12")),s.push(this.getPassiveSkillRowBuff(e,r.BONUS,"",c.BASIC,"0.12"));break;case A.NIGHTMARE_MOURNING_AIX:s.push(this.getPassiveSkillRowBuff(e,r.BONUS,f.SPECTRO,"","0.12"));break;case A.NIGHTMARE_IMPERMANENCE_HERON:s.push(this.getPassiveSkillRowBuff(e,r.BONUS,f.HAVOC,"","0.12")),s.push(this.getPassiveSkillRowBuff(e,r.BONUS,"",c.HEAVY,"0.12"));break;case A.NIGHTMARE_FEILIAN_BERINGAL:s.push(this.getPassiveSkillRowBuff(e,r.BONUS,f.AERO,"","0.12")),s.push(this.getPassiveSkillRowBuff(e,r.BONUS,"",c.HEAVY,"0.12"));break;case A.CAPITANEUS:s.push(this.getPassiveSkillRowBuff(e,r.BONUS,f.SPECTRO,"","0.12")),s.push(this.getPassiveSkillRowBuff(e,r.BONUS,"",c.HEAVY,"0.12"));break;default:return s}return s}getSonatas(){if(this.summary.sonatas.length>0)return this.summary.sonatas;const s=[];return this.echoes.forEach(t=>{s.push(t.sonata)}),s}getSonataRowBuff(s,t,e,a,o){const n=new w;return n.category=R.SONATA,n.source=`${s}-2/2`,n.type=t,n.value=o,n.stack="1",n.element=e,n.skill_bonus_type=a,n.updateId(),n}getSonataRowBuffs(){const s=[],t={[_.FREEZING_FROST]:0,[_.MOLTEN_RIFT]:0,[_.VOID_THUNDER]:0,[_.SIERRA_GALE]:0,[_.CELESTIAL_LIGHT]:0,[_.SUN_SINKING_ECLIPSE]:0,[_.REJUVENATING_GLOW]:0,[_.MOONLIT_CLOUDS]:0,[_.LINGERING_TUNES]:0,[_.FROSTY_RESOLVE]:0,[_.ETERNAL_RADIANCE]:0,[_.MIDNIGHT_VEIL]:0,[_.EMPYREAN_ANTHEM]:0,[_.TIDEBREAKING_COURAGE]:0};if(this.echoes.forEach(e=>{const a=e.sonata;a&&(t[a]+=1)}),t[_.FREEZING_FROST]>=2){const e=this.getSonataRowBuff(_.FREEZING_FROST,r.BONUS,f.GLACIO,"","0.1");s.push(e)}if(t[_.MOLTEN_RIFT]>=2){const e=this.getSonataRowBuff(_.MOLTEN_RIFT,r.BONUS,f.FUSION,"","0.1");s.push(e)}if(t[_.VOID_THUNDER]>=2){const e=this.getSonataRowBuff(_.VOID_THUNDER,r.BONUS,f.ELECTRO,"","0.1");s.push(e)}if(t[_.SIERRA_GALE]>=2){const e=this.getSonataRowBuff(_.SIERRA_GALE,r.BONUS,f.AERO,"","0.1");s.push(e)}if(t[_.CELESTIAL_LIGHT]>=2){const e=this.getSonataRowBuff(_.CELESTIAL_LIGHT,r.BONUS,f.SPECTRO,"","0.1");s.push(e)}if(t[_.SUN_SINKING_ECLIPSE]>=2){const e=this.getSonataRowBuff(_.SUN_SINKING_ECLIPSE,r.BONUS,f.HAVOC,"","0.1");s.push(e)}if(t[_.REJUVENATING_GLOW]>=2){const e=this.getSonataRowBuff(_.REJUVENATING_GLOW,r.BONUS,"",c.HEALING,"0.1");s.push(e)}if(t[_.MOONLIT_CLOUDS]>=2){const e=this.getSonataRowBuff(_.MOONLIT_CLOUDS,r.ENERGY_REGEN,"","","0.1");s.push(e)}if(t[_.LINGERING_TUNES]>=2){const e=this.getSonataRowBuff(_.LINGERING_TUNES,r.ATK_P,"","","0.1");s.push(e)}if(t[_.FROSTY_RESOLVE]>=2){const e=this.getSonataRowBuff(_.FROSTY_RESOLVE,r.BONUS,"",c.SKILL,"0.12");s.push(e)}if(t[_.ETERNAL_RADIANCE]>=2){const e=this.getSonataRowBuff(_.ETERNAL_RADIANCE,r.BONUS,f.SPECTRO,"","0.1");s.push(e)}if(t[_.MIDNIGHT_VEIL]>=2){const e=this.getSonataRowBuff(_.MIDNIGHT_VEIL,r.BONUS,f.HAVOC,"","0.1");s.push(e)}if(t[_.EMPYREAN_ANTHEM]>=2){const e=this.getSonataRowBuff(_.EMPYREAN_ANTHEM,r.ENERGY_REGEN,"","","0.1");s.push(e)}if(t[_.TIDEBREAKING_COURAGE]>=2){const e=this.getSonataRowBuff(_.TIDEBREAKING_COURAGE,r.ENERGY_REGEN,"","","0.1");s.push(e)}return s}getEchoPolicyItems(){return[{title:$.global.t(`general.${B.AFFIXES_15_1}`),value:B.AFFIXES_15_1},{title:$.global.t(`general.${B.AFFIXES_20_SMALL}`),value:B.AFFIXES_20_SMALL},{title:$.global.t(`general.${B.AFFIXES_20_SKILL_BONUS}`),value:B.AFFIXES_20_SKILL_BONUS}]}resetPolicy(){this.policy=""}resetSummary(){this.summary.name1="",this.summary.sonatas=[],this.summary.total_cost=0,this.summary.main_affix=new m,this.summary.sub_affix=new m,this.summary.stat_bonus=new m}getEcho(s){return this.echoes[s]}updateEchoByCost(s,t){this.resetPolicy(),this.getEcho(s).updateByCost(t)}updateEchoByEchoItem(s,t){this.resetPolicy(),this.getEcho(s).updateByEchoItem(t)}updateEchoMainAffix(s,t){this.resetPolicy(),this.getEcho(s).updateMainAffix(t)}updateSummaryByEchoes(){this.resetSummary();const s=this.echoes[0].name;s&&(this.summary.name1=s),this.echoes.forEach(e=>{this.summary.total_cost+=parseFloat(e.cost);const a=e.sonata;a&&this.summary.sonatas.push(a),this.summary.main_affix.addStatBuff(e.main_affix),this.summary.sub_affix.addStatBuff(e.sub_affix)}),[...this.getPassiveSkillRowBuffs(),...this.getSonataRowBuffs()].forEach(e=>{const a=e.type,o=L(e.stack).times(L(e.value));let n;switch(a){case r.BONUS:switch(e.element){case f.GLACIO:n=k.BONUS_GLACIO;break;case f.FUSION:n=k.BONUS_FUSION;break;case f.ELECTRO:n=k.BONUS_ELECTRO;break;case f.AERO:n=k.BONUS_AERO;break;case f.SPECTRO:n=k.BONUS_SPECTRO;break;case f.HAVOC:n=k.BONUS_HAVOC;break}switch(e.skill_bonus_type){case c.BASIC:n=k.BONUS_BASIC_ATTACK;break;case c.HEAVY:n=k.BONUS_HEAVY_ATTACK;break;case c.SKILL:n=k.BONUS_RESONANCE_SKILL;break;case c.LIBERATION:n=k.BONUS_RESONANCE_LIBERATION;break;case c.HEALING:n=k.BONUS_HEALING;break}break;case r.ENERGY_REGEN:n=k.ENERGY_REGEN;break}n&&this.summary.stat_bonus.addByKey(n,o)})}}var is,as,ns,rs,os,_s,fs,us,ls,hs,cs,ms,ps,ds;ds=l.SKILL_DMG_ADDITION,ps=l.MAGNIFIER,ms=l.AMPLIFIER,cs=l.BONUS,hs=l.HP_P,ls=l.HP,us=l.ATK_P,fs=l.ATK,_s=l.DEF_P,os=l.DEF,rs=l.CRIT_RATE,ns=l.CRIT_DMG,as=l.IGNORE_DEF,is=l.REDUCE_RES;class ts{constructor(s={}){i(this,ds,"");i(this,ps,"");i(this,ms,"");i(this,cs,"");i(this,hs,"");i(this,ls,"");i(this,us,"");i(this,fs,"");i(this,_s,"");i(this,os,"");i(this,rs,"");i(this,ns,"");i(this,as,"");i(this,is,"");!s||Object.keys(s).length===0||Object.assign(this,s)}reset(){this[l.SKILL_DMG_ADDITION]="",this[l.MAGNIFIER]="",this[l.AMPLIFIER]="",this[l.BONUS]="",this[l.HP_P]="",this[l.HP]="",this[l.ATK_P]="",this[l.ATK]="",this[l.DEF_P]="",this[l.DEF]="",this[l.CRIT_RATE]="",this[l.CRIT_DMG]="",this[l.IGNORE_DEF]="",this[l.REDUCE_RES]=""}getKeys(){const s=[];return Object.values(l).forEach(t=>{const e=this[t];d(e)>0&&s.push(t)}),s}getRowBuffs(){const s=[];return this.getKeys().forEach(e=>{const a=r[e.toUpperCase()],o=d(this[e]).toString(),n=new w;n.category=R.MANUAL,n.source=R.MANUAL,n.type=a,n.value=o,n.stack="1",n.updateId(),s.push(n)}),s}}class j{constructor(s={}){i(this,"buffs",[]);i(this,"manual",new ts);if(!s||Object.keys(s).length===0)return;const{manual:t,...e}=s;Object.assign(this,e),this.manual=new ts(t)}getJson(){return JSON.parse(JSON.stringify(this))}getRowBuffs(){return[...this.buffs,...this.manual.getRowBuffs()]}}const Ts=[{name:"90等抗性10白板",level:"90",def:"1512",res_physics:"10.00%",res_glacio:"10.00%",res_fusion:"10.00%",res_electro:"10.00%",res_aero:"10.00%",res_spectro:"10.00%",res_havoc:"10.00%"},{name:"90等抗性20白板",level:"90",def:"1512",res_physics:"20.00%",res_glacio:"20.00%",res_fusion:"20.00%",res_electro:"20.00%",res_aero:"20.00%",res_spectro:"20.00%",res_havoc:"20.00%"},{name:"90等抗性30白板",level:"90",def:"1512",res_physics:"30.00%",res_glacio:"30.00%",res_fusion:"30.00%",res_electro:"30.00%",res_aero:"30.00%",res_spectro:"30.00%",res_havoc:"30.00%"},{name:"90等抗性40白板",level:"90",def:"1512",res_physics:"40.00%",res_glacio:"40.00%",res_fusion:"40.00%",res_electro:"40.00%",res_aero:"40.00%",res_spectro:"40.00%",res_havoc:"40.00%"},{name:"90等抗性50白板",level:"90",def:"1512",res_physics:"50.00%",res_glacio:"50.00%",res_fusion:"50.00%",res_electro:"50.00%",res_aero:"50.00%",res_spectro:"50.00%",res_havoc:"50.00%"},{name:"90等抗性60白板",level:"90",def:"1512",res_physics:"60.00%",res_glacio:"60.00%",res_fusion:"60.00%",res_electro:"60.00%",res_aero:"60.00%",res_spectro:"60.00%",res_havoc:"60.00%"},{name:"90等抗性70白板",level:"90",def:"1512",res_physics:"70.00%",res_glacio:"70.00%",res_fusion:"70.00%",res_electro:"70.00%",res_aero:"70.00%",res_spectro:"70.00%",res_havoc:"70.00%"},{name:"90等抗性80白板",level:"90",def:"1512",res_physics:"80.00%",res_glacio:"80.00%",res_fusion:"80.00%",res_electro:"80.00%",res_aero:"80.00%",res_spectro:"80.00%",res_havoc:"80.00%"},{name:"100等抗性10白板",level:"100",def:"1592",res_physics:"10.00%",res_glacio:"10.00%",res_fusion:"10.00%",res_electro:"10.00%",res_aero:"10.00%",res_spectro:"10.00%",res_havoc:"10.00%"},{name:"100等抗性20白板",level:"100",def:"1592",res_physics:"20.00%",res_glacio:"20.00%",res_fusion:"20.00%",res_electro:"20.00%",res_aero:"20.00%",res_spectro:"20.00%",res_havoc:"20.00%"},{name:"100等抗性30白板",level:"100",def:"1592",res_physics:"30.00%",res_glacio:"30.00%",res_fusion:"30.00%",res_electro:"30.00%",res_aero:"30.00%",res_spectro:"30.00%",res_havoc:"30.00%"},{name:"100等抗性40白板",level:"100",def:"1592",res_physics:"40.00%",res_glacio:"40.00%",res_fusion:"40.00%",res_electro:"40.00%",res_aero:"40.00%",res_spectro:"40.00%",res_havoc:"40.00%"},{name:"100等抗性50白板",level:"100",def:"1592",res_physics:"50.00%",res_glacio:"50.00%",res_fusion:"50.00%",res_electro:"50.00%",res_aero:"50.00%",res_spectro:"50.00%",res_havoc:"50.00%"},{name:"100等抗性60白板",level:"100",def:"1592",res_physics:"60.00%",res_glacio:"60.00%",res_fusion:"60.00%",res_electro:"60.00%",res_aero:"60.00%",res_spectro:"60.00%",res_havoc:"60.00%"},{name:"100等抗性70白板",level:"100",def:"1592",res_physics:"70.00%",res_glacio:"70.00%",res_fusion:"70.00%",res_electro:"70.00%",res_aero:"70.00%",res_spectro:"70.00%",res_havoc:"70.00%"},{name:"100等抗性80白板",level:"100",def:"1592",res_physics:"80.00%",res_glacio:"80.00%",res_fusion:"80.00%",res_electro:"80.00%",res_aero:"80.00%",res_spectro:"80.00%",res_havoc:"80.00%"}],es=Ts,Ls=xs("monster",{state:()=>({}),actions:{getMonsterItems(){return es.map((s,t,e)=>({title:s.name,value:s}))},getMonsterItemByName(E){for(const s of es)if(s.name===E)return{title:s.name,value:s}}}});class W{constructor(s={}){i(this,"name","");i(this,"level","");i(this,"def","");i(this,"res_physics","");i(this,"res_glacio","");i(this,"res_fusion","");i(this,"res_electro","");i(this,"res_aero","");i(this,"res_spectro","");i(this,"res_havoc","");i(this,"_item",{title:"",value:void 0});!s||Object.keys(s).length===0||Object.assign(this,s)}getJson(){return JSON.parse(JSON.stringify(this))}updateByMonsterItem(s){if(!s)return;const t=s;this.name=t.name,this.level=t.level,this.def=t.def,this.res_physics=t.res_physics,this.res_glacio=t.res_glacio,this.res_fusion=t.res_fusion,this.res_electro=t.res_electro,this.res_aero=t.res_aero,this.res_spectro=t.res_spectro,this.res_havoc=t.res_havoc}updateByName(s){const e=Ls().getMonsterItemByName(s);e&&this.updateByMonsterItem(e.value)}}class Ms{constructor(s={}){i(this,"resonator",new G);i(this,"weapon",new U);i(this,"echoes",new D);i(this,"buffs",new j);i(this,"monster",new W);if(!s||Object.keys(s).length===0)return;const{resonator:t,weapon:e,echoes:a,buffs:o,monster:n}=s;this.resonator=new G(t),this.weapon=new U(e),this.echoes=new D(a),this.buffs=new j(o),this.monster=new W(n)}}class Cs{constructor(){i(this,"base_attr",[]);i(this,"base_attr_p",[]);i(this,"base_attr_a",[]);i(this,"skill_dmg_addition",[]);i(this,"magnifier",[]);i(this,"amplifier",[]);i(this,"bonus",[]);i(this,"crit_rate",[]);i(this,"crit_dmg",[]);i(this,"ignore_def",[]);i(this,"reduce_res",[])}reset(){this.base_attr=[],this.base_attr_p=[],this.base_attr_a=[],this.skill_dmg_addition=[],this.magnifier=[],this.amplifier=[],this.bonus=[],this.crit_rate=[],this.crit_dmg=[],this.ignore_def=[],this.reduce_res=[]}}class Gs{constructor(){i(this,"labels",[]);i(this,"resonator_name","");i(this,"skill_id","");i(this,"resonator_level","");i(this,"resonator_skill_level","");i(this,"resonator_skill_element","");i(this,"resonator_skill_base_attr","");i(this,"resonator_skill_type","");i(this,"resonator_skill_type_bonus","");i(this,"resonator_skill_dmg","");i(this,"resonator_skill_dmg_addition","");i(this,"echo_element","");i(this,"echo_skill_base_attr","");i(this,"echo_skill_dmg","");i(this,"damage_no_crit","");i(this,"damage_crit","");i(this,"damage","");i(this,"result_element","");i(this,"result_bonus_type","");i(this,"result_bonus_types",[]);i(this,"result_skill_base_attribute","");i(this,"result_skill_dmg","");i(this,"result_skill_hit","1");i(this,"result_hp","");i(this,"result_hp_addition","");i(this,"result_hp_p","");i(this,"result_atk","");i(this,"result_atk_addition","");i(this,"result_atk_p","");i(this,"result_def","");i(this,"result_def_addition","");i(this,"result_def_p","");i(this,"result_crit_rate","");i(this,"result_crit_dmg","");i(this,"result_magnifier","");i(this,"result_amplifier","");i(this,"result_bonus","");i(this,"result_ignore_def","");i(this,"result_reduce_res","");i(this,"monster_level","");i(this,"monster_def","");i(this,"monster_res","");i(this,"hits","");i(this,"real_dmg_no_crit","");i(this,"real_dmg_crit","");i(this,"action","");i(this,"time_start","");i(this,"time_end","");i(this,"buffs",[])}}class $s{constructor(s=new G,t=new U,e=new D,a=new j,o=new W){i(this,"id","");i(this,"data",new Ms);i(this,"regions",new Cs);i(this,"result",new Gs);this.data.resonator=s,this.data.weapon=t,this.data.echoes=e,this.data.buffs=a,this.data.monster=o}reset(){this.regions.reset()}getBaseRowBuffs(){const s=[],t=new w;t.category=R.BASE,t.source=R.BASE,t.type=r.CRIT_RATE,t.value="0.05",t.stack="1",t.updateId(),s.push(t);const e=new w;return e.category=R.BASE,e.source=R.BASE,e.type=r.CRIT_DMG,e.value="1.5",e.stack="1",e.updateId(),s.push(e),s}getRowBuffs(){this.data.echoes.updateSummaryByEchoes();let s=this.data.resonator.getBaseAttrs(),t=[];this.data.resonator.skill.base_attr===h.ATK&&(t=this.data.weapon.getBaseAttrs());const e=this.getBaseRowBuffs(),a=this.getMonsterResRowBuffs(),o=this.data.resonator.getRowBuffs(),n=this.data.resonator.getSkillRowBuffs(),g=this.data.weapon.getRowBuffs(),N=this.data.echoes.getRowBuffs(),S=this.data.echoes.getSonataRowBuffs(),I=this.data.echoes.getPassiveSkillRowBuffs(),O=this.data.buffs.getRowBuffs();return[...e,...a,...s,...t,...o,...n,...g,...N,...S,...I,...O]}getMonsterRes(){const s=this.data.resonator.skill.elment_zh_tw;let t;switch(s){case f.GLACIO:t=this.data.monster.res_glacio;break;case f.FUSION:t=this.data.monster.res_fusion;break;case f.ELECTRO:t=this.data.monster.res_electro;break;case f.AERO:t=this.data.monster.res_aero;break;case f.SPECTRO:t=this.data.monster.res_spectro;break;case f.HAVOC:t=this.data.monster.res_havoc;break;default:t="0.2";break}return d(t)}getFinalMonsterRes(){const s=this.regions.reduce_res;let t=new u(0);return s.forEach((e,a)=>{const o=new u(d(e.value)),n=new u(d(e.stack)),g=o.times(n);a===0?t=g:(t||(t=new u(d(t))),t=t.minus(g))}),t}getMonsterResRowBuffs(){const s=[],t=new w;return t.category=R.MONSTER,t.source=this.data.monster.name,t.type=r.REDUCE_RES,t.value=this.getMonsterRes().toString(),t.stack="1",t.element=this.data.resonator.skill.elment_zh_tw,t.updateId(),s.push(t),s}updateId(){this.id=Bs(JSON.stringify(this.data))}updateRegions(s){const t=this.data.resonator.skill.base_attr;s.forEach(e=>{switch(e.type){case Y.ATTR:this.regions.base_attr.push(e);break;case r.SKILL_DMG_ADDITION:this.regions.skill_dmg_addition.push(e);break;case r.MAGNIFIER:this.regions.magnifier.push(e);break;case r.AMPLIFIER:this.regions.amplifier.push(e);break;case r.BONUS:if(!e.element&&!e.skill_bonus_type){this.regions.bonus.push(e);break}if(e.element&&e.skill_bonus_type)throw new Error("`element` and `skill_bonus_type` should not have values at the same time.");if(this.data.resonator.skill.bonus_types.includes(e.element)||this.data.resonator.skill.bonus_types.includes(e.skill_bonus_type)){this.regions.bonus.push(e);break}break;case r.HP_P:t===h.HP&&this.regions.base_attr_p.push(e);break;case r.HP:t===h.HP&&this.regions.base_attr_a.push(e);break;case r.ATK_P:t===h.ATK&&this.regions.base_attr_p.push(e);break;case r.ATK:t===h.ATK&&this.regions.base_attr_a.push(e);break;case r.DEF_P:t===h.DEF&&this.regions.base_attr_p.push(e);break;case r.DEF:t===h.DEF&&this.regions.base_attr_a.push(e);break;case r.CRIT_RATE:this.regions.crit_rate.push(e);break;case r.CRIT_DMG:this.regions.crit_dmg.push(e);break;case r.IGNORE_DEF:this.regions.ignore_def.push(e);break;case r.REDUCE_RES:this.regions.reduce_res.push(e);break}})}sumRegion(s){let t=new u(0);return s.forEach(e=>{const a=new u(d(e.value)),o=new u(d(e.stack));t=t.plus(a.times(o))}),t}calculate(){this.updateId(),this.reset();const s=this.getRowBuffs();this.updateRegions(s);const t=this.sumRegion(this.regions.base_attr),e=this.sumRegion(this.regions.base_attr_p),a=this.sumRegion(this.regions.base_attr_a),o=t.times(e.plus(new u(1))).plus(a),n=this.sumRegion(this.regions.skill_dmg_addition),g=this.sumRegion(this.regions.magnifier),N=g.plus(new u(1)),S=this.sumRegion(this.regions.amplifier),I=S.plus(new u(1)),O=this.sumRegion(this.regions.bonus),Es=O.plus(new u(1)),z=this.sumRegion(this.regions.crit_dmg);let x=this.sumRegion(this.regions.crit_rate);x.gte(new u(1))&&(x=new u(1));const X=new u(d(this.data.resonator.level)),Z=new u(d(this.data.monster.level)).times(new u(8)).plus(new u(792)),q=this.sumRegion(this.regions.ignore_def),gs=X.times(new u(8)).plus(new u(800)).dividedBy(X.times(new u(8)).plus(new u(800)).plus(Z.times(new u(1).minus(q)))),v=this.getFinalMonsterRes(),ks=new u(this.getMonsterRes()).minus(v);let P;v.lt(new u(0))?P=new u(1).minus(v.dividedBy(new u(2))):v.gte(new u(.8))?P=new u(1).dividedBy(v.times(new u(5)).plus(new u(1))):P=new u(1).minus(v);const Rs=new u(this.data.resonator.skill.hit),V=o.times(n).times(N).times(I).times(Es).times(gs).times(P).times(Rs),Q=V.times(z),Ss=Q.times(x).plus(new u(1).minus(x).times(V));if(this.result.resonator_name=this.data.resonator.name,this.result.skill_id=this.data.resonator.skill.id,this.result.resonator_level=this.data.resonator.level,this.result.resonator_skill_level=this.data.resonator.skill.level,this.result.resonator_skill_element=this.data.resonator.skill.elment_zh_tw,this.result.resonator_skill_base_attr=this.data.resonator.skill.base_attr,this.result.resonator_skill_type=this.data.resonator.skill.type,this.result.resonator_skill_dmg=this.data.resonator.skill.dmg,this.regions.skill_dmg_addition.length>1){let As=this.sumRegion(this.regions.skill_dmg_addition.slice(1));this.result.resonator_skill_dmg_addition=As.toString()}switch(this.result.damage=p(Ss),this.result.damage_crit=p(Q),this.result.damage_no_crit=p(V),this.result.result_element=this.data.resonator.skill.elment_zh_tw,this.result.result_bonus_types=this.data.resonator.skill.bonus_types,this.result.result_skill_base_attribute=this.data.resonator.skill.base_attr,this.result.result_skill_dmg=this.data.resonator.skill.dmg,this.result.result_skill_hit=this.data.resonator.skill.hit,this.data.resonator.skill.base_attr){case h.HP:this.result.result_hp=p(t),this.result.result_hp_addition=p(a),this.result.result_hp_p=p(e);break;case h.DEF:this.result.result_def=p(t),this.result.result_def_addition=p(a),this.result.result_def_p=p(e);break;case h.ATK:default:this.result.result_atk=p(t),this.result.result_atk_addition=p(a),this.result.result_atk_p=p(e);break}this.result.result_crit_rate=p(x),this.result.result_crit_dmg=p(z),this.result.result_magnifier=p(g),this.result.result_amplifier=p(S),this.result.result_bonus=p(O),this.result.result_ignore_def=p(q),this.result.result_reduce_res=p(ks),this.result.monster_level=this.data.monster.level,this.result.monster_def=p(Z),this.result.monster_res=p(this.getMonsterRes()),this.result.hits=this.data.resonator.skill.hit,this.result.action}}class Us{constructor(s,t,e){i(this,"resonator");i(this,"weapon");i(this,"echoes");if(this.resonator=s,this.weapon=t,this.echoes=e,e.echoes.length!==5)throw new Error("`echoStores` length must be exactly 5")}getBaseAbbr(){const s=this.echoes.base_attr;let t;switch(s){case h.HP:t=b.HP;break;case h.DEF:t=b.DEF;break;case h.ATK:default:t=b.ATK;break}return t}getCritAttr(){const s=parseFloat(this.weapon.stat_bonus.crit_rate),t=parseFloat(this.weapon.stat_bonus.crit_dmg);return!s&&t?b.CRIT_RATE:s&&!t?b.CRIT_DMG:b.CRIT_DMG}updateSubAffixesWithAffixes151(s){switch(this.echoes.base_attr){case h.HP:s.sub_affix.hp="270",s.sub_affix.hp_p="0.054";break;case h.DEF:s.sub_affix.def="30",s.sub_affix.def_p="0.068325";break;case h.ATK:default:s.sub_affix.atk="24",s.sub_affix.atk_p="0.054";break}s.sub_affix.crit_rate="0.084",s.sub_affix.crit_dmg="0.1008",s.sub_affix.bonus_resonance_skill="0.016",s.sub_affix.bonus_basic_attack="0.016",s.sub_affix.bonus_heavy_attack="0.016",s.sub_affix.bonus_resonance_liberation="0.016"}updateSubAffixesWithAffixes20Small(s){switch(this.echoes.base_attr){case h.HP:s.sub_affix.hp="450",s.sub_affix.hp_p="0.09";break;case h.DEF:s.sub_affix.def="50",s.sub_affix.def_p="0.113875";break;case h.ATK:default:s.sub_affix.atk="40",s.sub_affix.atk_p="0.09";break}s.sub_affix.crit_rate="0.084",s.sub_affix.crit_dmg="0.168"}updateSubAffixesWithAffixes20SkillBonus(s){switch(this.echoes.base_attr){case h.HP:s.sub_affix.hp_p="0.09";break;case h.DEF:s.sub_affix.def_p="0.113875";break;case h.ATK:default:s.sub_affix.atk_p="0.09";break}switch(s.sub_affix.crit_rate="0.084",s.sub_affix.crit_dmg="0.168",this.echoes.main_skill_bonus){case c.SKILL:s.sub_affix.bonus_resonance_skill="0.09";break;case c.BASIC:s.sub_affix.bonus_basic_attack="0.09";break;case c.HEAVY:s.sub_affix.bonus_heavy_attack="0.09";break;case c.LIBERATION:s.sub_affix.bonus_resonance_liberation="0.09";break}}updateBase(){this.echoes.echoes.forEach((s,t)=>{switch(s.resetMainAffix(),s.resetSubAffix(),this.echoes.policy){case B.AFFIXES_15_1:this.updateSubAffixesWithAffixes151(s);break;case B.AFFIXES_20_SMALL:this.updateSubAffixesWithAffixes20Small(s);break;case B.AFFIXES_20_SKILL_BONUS:this.updateSubAffixesWithAffixes20SkillBonus(s);break}})}updateFixedMainAffix(s,t){const e=bs(t);for(const[a,o]of Object.entries(e))s.main_affix[a]=o,s._fixed_main_affix_key=a}updateMainAffixItem(s,t){s._main_affix_item={title:J(t),value:t}}updateCost4Echo(s,t){const e="4";s.cost=e,s.abbr=t,s.updateMainAffixKeysByCost(),this.updateFixedMainAffix(s,e);const a=M(e);switch(t){case b.HP:s.main_affix.hp_p=a.hp_p,this.updateMainAffixItem(s,"hp_p");break;case b.ATK:s.main_affix.atk_p=a.atk_p,this.updateMainAffixItem(s,"atk_p");break;case b.DEF:s.main_affix.def_p=a.def_p,this.updateMainAffixItem(s,"def_p");break;case b.BONUS_HEALING:s.main_affix.bonus_healing=a.bonus_healing,this.updateMainAffixItem(s,"bonus_healing");break;case b.CRIT_RATE:s.main_affix.crit_rate=a.crit_rate,this.updateMainAffixItem(s,"crit_rate");break;case b.CRIT_DMG:default:s.main_affix.crit_dmg=a.crit_dmg,this.updateMainAffixItem(s,"crit_dmg");break}}updateCost3Echo(s,t){const e="3";s.cost=e,s.abbr=t,s.updateMainAffixKeysByCost(),this.updateFixedMainAffix(s,e);const a=M(e);switch(t){case b.HP:s.main_affix.hp_p=a.hp_p,this.updateMainAffixItem(s,"hp_p");break;case b.ATK:s.main_affix.atk_p=a.atk_p,this.updateMainAffixItem(s,"atk_p");break;case b.DEF:s.main_affix.def_p=a.def_p,this.updateMainAffixItem(s,"def_p");break;case b.ENERGY_REGEN:s.main_affix.energy_regen=a.energy_regen,this.updateMainAffixItem(s,"energy_regen");break;case f.GLACIO:s.main_affix.bonus_glacio=a.bonus_glacio,this.updateMainAffixItem(s,"bonus_glacio");break;case f.FUSION:s.main_affix.bonus_fusion=a.bonus_fusion,this.updateMainAffixItem(s,"bonus_fusion");break;case f.ELECTRO:s.main_affix.bonus_electro=a.bonus_electro,this.updateMainAffixItem(s,"bonus_electro");break;case f.AERO:s.main_affix.bonus_aero=a.bonus_aero,this.updateMainAffixItem(s,"bonus_aero");break;case f.SPECTRO:s.main_affix.bonus_spectro=a.bonus_spectro,this.updateMainAffixItem(s,"bonus_spectro");break;case f.HAVOC:s.main_affix.bonus_havoc=a.bonus_havoc,this.updateMainAffixItem(s,"bonus_havoc");break}}updateCost1Echo(s,t){const e="1";s.cost=e,s.abbr=t,s.updateMainAffixKeysByCost(),this.updateFixedMainAffix(s,e);const a=M(e);switch(t){case b.HP:s.main_affix.hp_p=a.hp_p,this.updateMainAffixItem(s,"hp_p");break;case b.ATK:s.main_affix.atk_p=a.atk_p,this.updateMainAffixItem(s,"atk_p");break;case b.DEF:s.main_affix.def_p=a.def_p,this.updateMainAffixItem(s,"def_p");break}}updateEcho(s,t,e){switch(t=t.toString(),t){case"4":e||(e=this.getCritAttr()),this.updateCost4Echo(this.echoes.echoes[s],e);break;case"3":e||(e=this.resonator.element_zh_tw),this.updateCost3Echo(this.echoes.echoes[s],e);break;case"1":e||(e=this.getBaseAbbr()),this.updateCost1Echo(this.echoes.echoes[s],e);break;default:return}}update(s,t,e,a,o,n,g,N,S,I){!this.echoes.policy||this.echoes.echoes.length===0||(this.updateBase(),this.updateEcho(0,s,n),this.updateEcho(1,t,g),this.updateEcho(2,e,N),this.updateEcho(3,a,S),this.updateEcho(4,o,I))}update43311(s="",t="",e="",a="",o=""){this.update("4","3","3","1","1",s,t,e,a,o)}update43311With2Elem(){this.echoes.base_attr,this.resonator.element_zh_tw}update43311With1Elem1Attr(){this.resonator.element_zh_tw}update43311With2Attr(){}update43311With2EnergyRegen(){}update43311With1EnergyRegen1Elem(){this.resonator.element_zh_tw}update43311With1EnergyRegen1Attr(){}}function Js(E,s,t){new Us(E,s,t).update43311()}export{j as R,W as a,D as b,U as c,G as d,Js as e,Us as f,$s as g,Ms as h,Ls as u};

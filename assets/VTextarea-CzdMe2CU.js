import{V as W,m as ie}from"./VOverlay-C-twnjrH.js";import{B as q,C as Q,an as J,aA as ue,k as F,aB as K,aq as re,aa as w,ak as B,G as X,m as C,a as u,Q as se,at as Y,aC as ce,O as A,am as de,aD as fe,s as ve,aE as me,F as G,H as $,P as ge,aF as xe,aG as he,aH as Ve,aI as we}from"./index-DBOlYmFe.js";import{h as ye}from"./VDataTable-BXqoPsQ7.js";import{a as Pe,b as j,f as Ee,c as Fe,d as Ce,e as be,g as Ie}from"./VTextField-3J0dxVMv.js";import{I as Se}from"./index-DdL2vDM8.js";const ke=Q({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...ie({origin:"center center",scrollStrategy:"block",transition:{component:ye},zIndex:2400})},"VDialog"),Me=q()({name:"VDialog",props:ke(),emits:{"update:modelValue":e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,D){let{emit:y,slots:h}=D;const l=J(e,"modelValue"),{scopeId:r}=ue(),a=F();function b(o){var s,m;const d=o.relatedTarget,v=o.target;if(d!==v&&((s=a.value)!=null&&s.contentEl)&&((m=a.value)!=null&&m.globalTop)&&![document,a.value.contentEl].includes(v)&&!a.value.contentEl.contains(v)){const n=ce(a.value.contentEl);if(!n.length)return;const V=n[0],I=n[n.length-1];d===V?I.focus():V.focus()}}K(()=>{document.removeEventListener("focusin",b)}),re&&w(()=>l.value&&e.retainFocus,o=>{o?document.addEventListener("focusin",b):document.removeEventListener("focusin",b)},{immediate:!0});function H(){var o;y("afterEnter"),(o=a.value)!=null&&o.contentEl&&!a.value.contentEl.contains(document.activeElement)&&a.value.contentEl.focus({preventScroll:!0})}function T(){y("afterLeave")}return w(l,async o=>{var d;o||(await B(),(d=a.value.activatorEl)==null||d.focus({preventScroll:!0}))}),X(()=>{const o=W.filterProps(e),d=C({"aria-haspopup":"dialog"},e.activatorProps),v=C({tabindex:-1},e.contentProps);return u(W,C({ref:a,class:["v-dialog",{"v-dialog--fullscreen":e.fullscreen,"v-dialog--scrollable":e.scrollable},e.class],style:e.style},o,{modelValue:l.value,"onUpdate:modelValue":s=>l.value=s,"aria-modal":"true",activatorProps:d,contentProps:v,height:e.fullscreen?void 0:e.height,width:e.fullscreen?void 0:e.width,maxHeight:e.fullscreen?void 0:e.maxHeight,maxWidth:e.fullscreen?void 0:e.maxWidth,role:"dialog",onAfterEnter:H,onAfterLeave:T},r),{activator:h.activator,default:function(){for(var s=arguments.length,m=new Array(s),n=0;n<s;n++)m[n]=arguments[n];return u(se,{root:"VDialog"},{default:()=>{var V;return[(V=h.default)==null?void 0:V.call(h,...m)]}})}})}),Y({},a)}}),Re=Q({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,modelModifiers:Object,...Ie(),...be()},"VTextarea"),Ne=q()({name:"VTextarea",directives:{Intersect:Se},inheritAttrs:!1,props:Re(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,D){let{attrs:y,emit:h,slots:l}=D;const r=J(e,"modelValue"),{isFocused:a,focus:b,blur:H}=Pe(e),T=A(()=>typeof e.counterValue=="function"?e.counterValue(r.value):(r.value||"").toString().length),o=A(()=>{if(y.maxlength)return y.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter});function d(t,c){var i,f;!e.autofocus||!t||(f=(i=c[0].target)==null?void 0:i.focus)==null||f.call(i)}const v=F(),s=F(),m=de(""),n=F(),V=A(()=>e.persistentPlaceholder||a.value||e.active);function I(){var t;n.value!==document.activeElement&&((t=n.value)==null||t.focus()),a.value||b()}function Z(t){I(),h("click:control",t)}function p(t){h("mousedown:control",t)}function ee(t){t.stopPropagation(),I(),B(()=>{r.value="",we(e["onClick:clear"],t)})}function te(t){var i;const c=t.target;if(r.value=c.value,(i=e.modelModifiers)!=null&&i.trim){const f=[c.selectionStart,c.selectionEnd];B(()=>{c.selectionStart=f[0],c.selectionEnd=f[1]})}}const P=F(),S=F(+e.rows),M=A(()=>["plain","underlined"].includes(e.variant));fe(()=>{e.autoGrow||(S.value=+e.rows)});function E(){e.autoGrow&&B(()=>{if(!P.value||!s.value)return;const t=getComputedStyle(P.value),c=getComputedStyle(s.value.$el),i=parseFloat(t.getPropertyValue("--v-field-padding-top"))+parseFloat(t.getPropertyValue("--v-input-padding-top"))+parseFloat(t.getPropertyValue("--v-field-padding-bottom")),f=P.value.scrollHeight,k=parseFloat(t.lineHeight),N=Math.max(parseFloat(e.rows)*k+i,parseFloat(c.getPropertyValue("--v-input-control-height"))),z=parseFloat(e.maxRows)*k+i||1/0,x=Ve(f??0,N,z);S.value=Math.floor((x-i)/k),m.value=he(x)})}ve(E),w(r,E),w(()=>e.rows,E),w(()=>e.maxRows,E),w(()=>e.density,E);let g;return w(P,t=>{t?(g=new ResizeObserver(E),g.observe(P.value)):g==null||g.disconnect()}),K(()=>{g==null||g.disconnect()}),X(()=>{const t=!!(l.counter||e.counter||e.counterValue),c=!!(t||l.details),[i,f]=me(y),{modelValue:k,...N}=j.filterProps(e),z=Ee(e);return u(j,C({ref:v,modelValue:r.value,"onUpdate:modelValue":x=>r.value=x,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-input--plain-underlined":M.value},e.class],style:e.style},i,N,{centerAffix:S.value===1&&!M.value,focused:a.value}),{...l,default:x=>{let{id:R,isDisabled:L,isDirty:O,isReadonly:ae,isValid:ne}=x;return u(Ce,C({ref:s,style:{"--v-textarea-control-height":m.value},onClick:Z,onMousedown:p,"onClick:clear":ee,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},z,{id:R.value,active:V.value||O.value,centerAffix:S.value===1&&!M.value,dirty:O.value||e.dirty,disabled:L.value,focused:a.value,error:ne.value===!1}),{...l,default:le=>{let{props:{class:U,..._}}=le;return u(G,null,[e.prefix&&u("span",{class:"v-text-field__prefix"},[e.prefix]),$(u("textarea",C({ref:n,class:U,value:r.value,onInput:te,autofocus:e.autofocus,readonly:ae.value,disabled:L.value,placeholder:e.placeholder,rows:e.rows,name:e.name,onFocus:I,onBlur:H},_,f),null),[[ge("intersect"),{handler:d},null,{once:!0}]]),e.autoGrow&&$(u("textarea",{class:[U,"v-textarea__sizer"],id:`${_.id}-sizer`,"onUpdate:modelValue":oe=>r.value=oe,ref:P,readonly:!0,"aria-hidden":"true"},null),[[xe,r.value]]),e.suffix&&u("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:c?x=>{var R;return u(G,null,[(R=l.details)==null?void 0:R.call(l,x),t&&u(G,null,[u("span",null,null),u(Fe,{active:e.persistentCounter||a.value,value:T.value,max:o.value,disabled:e.disabled},l.counter)])])}:void 0})}),Y({},v,s,n)}});export{Me as V,Ne as a};

import{a as fe,V as yl,_ as wl}from"./VFileInput-Yu__rMEq.js";import{m as xl,u as Oe,g as je,a as kl,b as cl,c as fl,d as _l,f as Ul,h as Sl}from"./resonator-CtkKFE8i.js";import{ai as Cl,d as be,a7 as pl,ac as De,a8 as j,$ as al,a0 as Rl,N as X,o as c,ab as Tl,O as o,a9 as J,a4 as l,Q as ee,a as t,a1 as e,c as x,a6 as z,a2 as a,F as Q,a3 as le,a5 as ae,ae as ie,af as ue,ag as H,ah as P,M as We,ad as Ue,Z as ze,g as Il,p as Bl,aq as Dl,ar as Te,as as Qe,j as ce,at as Pl,au as Al,ap as ol,av as El,b as Nl,n as Ie,aw as Fl,ax as Ml,l as ql,ay as Ll,az as jl,aA as Kl,aB as nl,aC as Ol,aD as sl,aj as dl,ak as il,al as Ze,am as $e,an as Xe,ao as Ve}from"./index-DpMHeTO-.js";import{T as el,a as ul,b as Wl}from"./template-BTz52NWi.js";import{D as zl}from"./damage-BQDoqskR.js";import{_ as vl,V as Ke}from"./RowDetailedDamage-CH2xXiGD.js";import{_ as gl}from"./Rotation-B2GX5hIa.js";import{_ as Hl}from"./ResonatorInfo-Dk6yp0cP.js";import{_ as Jl}from"./DocHeaders-lqtcV7Bl.js";import{t as rl,j as oe,s as ml}from"./utils-CVNhfOQy.js";import{V as de}from"./VTooltip-wfI9Fv_l.js";import{V as Be,c as K,a as T,u as Gl,d as Ql,e as Zl,f as Xl,g as Yl,b as ll,h as et,m as lt,i as tt,j as at}from"./VDataTable-9_fHP8G8.js";import{V as se,u as ot,a as nt}from"./VList-DFj2vXXH.js";import{e as Ye,u as st}from"./echoes-MUW5O59n.js";import{g as dt,a as it}from"./rotation-CK9FtsQb.js";import{V as ve,a as bl}from"./VTextarea-DFHytdi9.js";import{V as ge}from"./VCard-CNRt4b4j.js";import{a as ut}from"./VAvatar-CknRbOOr.js";import{b as Se}from"./route-block-B_A1xBdJ.js";import{u as rt}from"./template-BlrTYSh2.js";import"./affix-NmzP8Gk5.js";import"./VOverlay-JbpJOW4h.js";const ye=p=>{const A=`template-${p}`,m=Cl(A,{state:()=>({data:new el}),actions:{async initTemplateByHashedId(I){if(I||(I=this.data.hashed_id),!I)return;const _=await xl(`/data/templates/${I}.json`).get();Object.keys(_).length!==0&&(this.data=new el(_),await this.data.init())},getRowBuffsForSelect(){return this.data.getRowBuffsForSelect()},async updateByResonatorName(I){await this.data.updateByResonatorName(I)},updateResonatorByCalculation(I){this.data.updateResonatorByCalculation(I)},calculateRow(I){this.data.calculateRow(I)},calculate(){this.data.calculate()}}});return new m},mt={class:"d-flex flex-column"},ct={class:"ml-4 text-truncate"},ft={class:"ml-8 text-truncate"},_t={class:"ml-8 text-truncate"},pt={class:"ml-8 text-truncate"},vt={class:"ml-4 text-truncate"},gt={class:"ml-4 text-truncate"},bt={id:"team_damage_distribution"},ht={class:"d-flex flex-column my-1 mb-4"},$t={class:"d-flex flex-column bg-blue-grey-darken-4"},Vt={class:"team-damage-distribution-header"},yt={class:"team-damage-distribution-header-value text-truncate"},wt={class:"team-damage-distribution-header"},xt={class:"team-damage-distribution-header-value text-truncate"},kt={class:"team-damage-distribution-header"},Ut={class:"team-damage-distribution-header-value text-truncate"},St={key:0,class:"d-flex flex-row align-center ma-1"},Ct=["src"],Rt={class:"d-flex flex-column"},Tt={class:"d-flex flex-row"},It={class:"d-flex flex-row"},Bt={class:"team-damage-distribution-tooltip-header"},Dt={class:"d-flex flex-row"},Pt={class:"team-damage-distribution-tooltip-header"},At={class:"d-flex flex-row"},Et={class:"team-damage-distribution-tooltip-header"},Nt={class:"mr-4 text-truncate"},Ft={key:1,class:"d-flex flex-row align-center w-100"},Mt={class:"ml-4 text-truncate"},qt={id:"buff_damage_distribution"},Lt={class:"d-flex flex-column my-1 mb-4"},jt={class:"d-flex flex-column bg-blue-grey-darken-4 text-truncate"},Kt={class:"team-damage-distribution-header"},Ot={class:"team-damage-distribution-header-value text-truncate"},Wt={class:"team-damage-distribution-header"},zt={class:"team-damage-distribution-header-value text-truncate"},Ht={class:"team-damage-distribution-header"},Jt={class:"team-damage-distribution-header-value text-truncate"},Gt={class:"d-flex flex-row align-center ma-1"},Qt={class:"d-flex flex-column"},Zt={class:"d-flex flex-row"},Xt={class:"team-damage-distribution-tooltip-header"},Yt={class:"d-flex flex-row"},ea={class:"team-damage-distribution-tooltip-header"},la={class:"d-flex flex-row"},ta={class:"team-damage-distribution-tooltip-header"},aa={class:"mr-4 text-truncate"},oa={key:1,class:"d-flex flex-row align-center w-100"},na={class:"ml-4 text-truncate"},sa={id:"resonator"},da={class:"d-flex flex-column"},ia=["id"],ua=["id"],ra={class:"d-flex flex-column my-1 mb-4 w-100"},ma={class:"d-flex flex-column bg-blue-grey-darken-4 text-truncate"},ca={class:"team-damage-distribution-header"},fa={class:"team-damage-distribution-header-value text-truncate"},_a={class:"team-damage-distribution-header"},pa={class:"team-damage-distribution-header-value text-truncate"},va={class:"team-damage-distribution-header"},ga={class:"team-damage-distribution-header-value text-truncate"},ba={class:"d-flex flex-row align-center ma-1"},ha={class:"d-flex flex-column"},$a={class:"d-flex flex-row"},Va={class:"d-flex flex-row"},ya={class:"team-damage-distribution-tooltip-header"},wa={class:"d-flex flex-row"},xa={class:"team-damage-distribution-tooltip-header"},ka={class:"d-flex flex-row"},Ua={class:"team-damage-distribution-tooltip-header"},Sa={class:"mr-4 text-truncate"},Ca={key:1,class:"d-flex flex-row align-center w-100"},Ra={class:"ml-4 text-truncate"},Ta=["id"],Ia={class:"d-flex flex-column my-1 mb-4 w-100"},Ba={class:"d-flex flex-column bg-blue-grey-darken-4 text-truncate"},Da={class:"team-damage-distribution-header"},Pa={class:"team-damage-distribution-header-value text-truncate"},Aa={class:"team-damage-distribution-header"},Ea={class:"team-damage-distribution-header-value text-truncate"},Na={class:"team-damage-distribution-header"},Fa={class:"team-damage-distribution-header-value text-truncate"},Ma={class:"d-flex flex-row align-center ma-1"},qa={class:"d-flex flex-column"},La={class:"d-flex flex-row"},ja={class:"d-flex flex-row"},Ka={class:"team-damage-distribution-tooltip-header"},Oa={class:"d-flex flex-row"},Wa={class:"team-damage-distribution-tooltip-header"},za={class:"mr-4 text-truncate"},Ha={key:1,class:"d-flex flex-row align-center w-100"},Ja={class:"ml-4 text-truncate"},Ga=["id"],Qa={class:"d-flex flex-column my-1 mb-4 w-100"},Za={class:"d-flex flex-column bg-blue-grey-darken-4 text-truncate"},Xa={class:"team-damage-distribution-header"},Ya={class:"team-damage-distribution-header-value text-truncate"},eo={class:"team-damage-distribution-header"},lo={class:"team-damage-distribution-header-value text-truncate"},to={class:"team-damage-distribution-header"},ao={class:"team-damage-distribution-header-value text-truncate"},oo={class:"d-flex flex-row align-center ma-1"},no={class:"d-flex flex-column"},so={class:"d-flex flex-row"},io={class:"d-flex flex-row"},uo={class:"team-damage-distribution-tooltip-header"},ro={class:"d-flex flex-row"},mo={class:"team-damage-distribution-tooltip-header"},co={class:"mr-4 text-truncate"},fo={key:1,class:"d-flex flex-row align-center w-100"},_o={class:"ml-4 text-truncate"},po={id:"rotation"},vo={class:"d-flex flex-column my-1 mb-4 w-100"},go={id:"rotation_damage"},bo={key:0,class:"d-flex flex-column my-1 mb-4 w-100"},ho={class:"d-flex flex-column bg-blue-grey-darken-4 text-truncate"},$o={class:"team-damage-distribution-header"},Vo={class:"team-damage-distribution-header-value text-truncate"},yo={class:"team-damage-distribution-header"},wo={class:"team-damage-distribution-header-value text-truncate"},xo={class:"team-damage-distribution-header"},ko={class:"team-damage-distribution-header-value text-truncate"},Uo={class:"d-flex flex-row align-center ma-1"},So=["src"],Co={class:"d-flex flex-column"},Ro={class:"d-flex flex-row"},To={class:"d-flex flex-row"},Io={class:"tooltip-header"},Bo={class:"d-flex flex-row"},Do={class:"tooltip-header"},Po={class:"text-truncate"},Ao={class:"d-flex flex-row"},Eo={class:"tooltip-header"},No={class:"d-flex flex-row"},Fo={class:"tooltip-header"},Mo={class:"d-flex flex-row"},qo={class:"tooltip-header"},Lo={class:"d-flex flex-row"},jo={class:"tooltip-header"},Ko=["id","onClick"],Oo={class:"mr-4 text-truncate"},Wo={key:1,class:"d-flex flex-row align-center w-100"},zo={class:"ml-4 text-truncate"},Ho={key:1,class:"d-flex flex-column"},Jo={id:"detailed_damage",class:"mb-2"},Go=["id"],Qo={class:"d-flex flex-row my-1 align-center"},Zo=["src"],Xo={class:"mr-4"},Yo={class:"d-flex flex-row ml-auto"},en={class:"d-flex flex-column"},ln={class:"d-flex flex-column"},tn={class:"d-flex flex-column"},an=be({__name:"DamageAnalysis",props:{damageAnalysis:{type:Object,required:!0},affixPolicy:{type:String,default:""}},setup(p){const A=pl(),{t:m}=De(),I=p,L=I.affixPolicy,_=I.damageAnalysis,F=Oe(),R=j(""),h=al([]),w=al([]),S=j([]);async function k(){S.value=_.resonator_template.getRotationIndices();const s=[];Object.keys(_.resonator_models).forEach(B=>{const V=_.resonator_models[B],f=V.name;w.push(V),h.push(f),s.push(m(f))});const O=s.join(" | ");if(L){const B=m(`general.${L}`);R.value=`${O} â€” ${B}`}else R.value=O}function E(s){return[{[m("general.action")]:s.action,[m("general.resonator_skill_id")]:s.skill_id,[m("general.skill_base_attr")]:s.calculation.data.resonator.skill.base_attr,[m("general.skill_bonus_type")]:s.calculation.data.resonator.skill.getBonusTypesString(),[m("general.hits")]:m("general.n_hits",{n:s.calculation.data.resonator.skill.hit})}]}function te(s){return[{[m("general.real_damage")]:s.calculation.result.real_dmg_no_crit,[m("general.calculated_damage")]:s.calculation.result.damage_no_crit,[m("general.real_crit_damage")]:s.calculation.result.real_dmg_crit,[m("general.calculated_crit_damage")]:s.calculation.result.damage_crit}]}function v(s){const O=s.buffs,B=[];for(const V of O){const f={[m("general.name")]:V.name,[m("general.buff_type")]:V.type,[m("general.stack")]:V.stack,[m("general.value")]:V.value};B.push(f)}return B}return Rl(async()=>{await k()}),(s,O)=>{const B=Jl,V=Hl,f=gl,u=vl,N=Tl;return c(),X(N,null,{left:o(()=>[t(B,null,{default:o(()=>[t(se,{title:s.$t("template.damage_analysis.team_damage_distribution"),onClick:O[0]||(O[0]=g=>l(oe)(l(A),"#team_damage_distribution"))},null,8,["title"]),t(se,{title:s.$t("template.damage_analysis.buff_damage_distribution"),onClick:O[1]||(O[1]=g=>l(oe)(l(A),"#buff_damage_distribution"))},null,8,["title"]),t(se,{title:s.$t("general.resonator"),onClick:O[2]||(O[2]=g=>l(oe)(l(A),"#resonator"))},null,8,["title"]),(c(!0),x(Q,null,le(l(_).resonator_template.getResonatorNames(),(g,M)=>(c(),x("div",mt,[g?(c(),x(Q,{key:0},[t(se,{onClick:r=>l(oe)(l(A),`#resonator${M}`)},{default:o(()=>[e("span",ct,a(s.$t(g)),1)]),_:2},1032,["onClick"]),t(se,{onClick:r=>l(oe)(l(A),`#resonator${M}_skill_damage_distribution`)},{default:o(()=>[e("span",ft,a(s.$t("template.damage_analysis.skill_damage_distribution")),1)]),_:2},1032,["onClick"]),t(se,{onClick:r=>l(oe)(l(A),`#resonator${M}_skill_type_damage_distribution`)},{default:o(()=>[e("span",_t,a(s.$t("template.damage_analysis.skill_type_damage_distribution")),1)]),_:2},1032,["onClick"]),t(se,{onClick:r=>l(oe)(l(A),`#resonator${M}_skill_bonus_damage_distribution`)},{default:o(()=>[e("span",pt,a(s.$t("template.damage_analysis.skill_bonus_damage_distribution")),1)]),_:2},1032,["onClick"])],64)):J("",!0)]))),256)),t(se,{title:s.$t("general.rotation"),onClick:O[3]||(O[3]=g=>l(oe)(l(A),"#rotation"))},null,8,["title"]),t(se,{onClick:O[4]||(O[4]=g=>l(oe)(l(A),"#rotation_damage"))},{default:o(()=>[e("span",vt,a(s.$t("template.damage_analysis.rotation_damage")),1)]),_:1}),t(se,{onClick:O[5]||(O[5]=g=>l(oe)(l(A),"#detailed_damage"))},{default:o(()=>[e("span",gt,a(s.$t("template.damage_analysis.detailed_damage")),1)]),_:1})]),_:1})]),right:o(()=>[l(_)?(c(),X(ee,{key:0},{default:o(()=>[t(z,{class:"mt-1 mb-2"},{default:o(()=>[e("h1",null,a(R.value),1)]),_:1}),t(z,{class:"my-1"},{default:o(()=>[e("h2",bt,a(s.$t("template.damage_analysis.team_damage_distribution")),1)]),_:1}),e("div",ht,[t(ee,{class:"bg-blue-grey-darken-4"},{default:o(()=>[e("div",$t,[t(z,{class:"ma-1 text-truncate"},{default:o(()=>[e("span",Vt,a(s.$t("general.template_id"))+": ",1),e("span",yt,a(s.$t(l(_).resonator_template.id)),1)]),_:1}),t(z,{class:"ma-1 text-truncate"},{default:o(()=>[e("span",wt,a(s.$t("general.monster_id"))+": ",1),e("span",xt,a(s.$t(l(_).resonator_template.monster_id)),1)]),_:1}),t(z,{class:"ma-1 text-truncate"},{default:o(()=>[e("span",kt,a(s.$t("general.team_dps"))+": ",1),e("span",Ut,a(l(_).damage_distribution.getTeamDPSString()),1)]),_:1}),(c(!0),x(Q,null,le(l(_).resonator_template.getResonatorNames(),g=>(c(),x(Q,null,[g?(c(),x("div",St,[e("img",{class:"resonator-icon mr-2",src:l(F).getIconSrcByName(g)},null,8,Ct),t(de,{location:"bottom"},{activator:o(({props:M})=>[e("div",ae({class:"d-flex flex-column align-start bg-grey-darken-4 w-100",ref_for:!0},M),[l(_).damage_distribution.getResonatorMaxDPSPercentage(g)>.5?(c(),x("div",{key:0,class:ue(`barh d-flex flex-row-reverse align-center bg-${l(_).resonator_template.getResonatorElementEn(g)}`),style:ie(`width: ${l(_).damage_distribution.getResonatorMaxDPSPercentageString(g)};`)},[e("span",Nt," DPS: "+a(l(_).damage_distribution.getResonatorDPSString(g))+" ("+a(l(_).damage_distribution.getResonatorMaxDPSPercentageString(g))+") ",1)],6)):(c(),x("div",Ft,[e("div",{class:ue(`barh d-flex bg-${l(_).resonator_template.getResonatorElementEn(g)}`),style:ie(`width: ${l(_).damage_distribution.getResonatorMaxDPSPercentageString(g)};`)},null,6),e("span",Mt," DPS: "+a(l(_).damage_distribution.getResonatorDPSString(g))+" ("+a(l(_).damage_distribution.getResonatorMaxDPSPercentageString(g))+") ",1)]))],16)]),default:o(()=>[e("div",Rt,[e("div",Tt,[e("span",null,a(s.$t(g)),1)]),e("div",It,[e("span",Bt,a(s.$t("general.damage"))+": ",1),e("span",null,a(l(_).damage_distribution.getResonatorDamageString(g)),1)]),e("div",Dt,[e("span",Pt,a(s.$t("general.dps"))+": ",1),e("span",null,a(l(_).damage_distribution.getResonatorDPSString(g)),1)]),e("div",At,[e("span",Et,"("+a(s.$t("general.denominator"))+": ",1),e("span",null,a(s.$t("general.team_dps"))+")",1)])])]),_:2},1024)])):J("",!0)],64))),256))])]),_:1})]),t(z,{class:"my-1"},{default:o(()=>[e("h2",qt,a(s.$t("template.damage_analysis.buff_damage_distribution")),1)]),_:1}),e("div",Lt,[t(ee,{class:"bg-blue-grey-darken-4"},{default:o(()=>[e("div",jt,[t(z,{class:"ma-1 text-truncate"},{default:o(()=>[e("span",Kt,a(s.$t("general.template_id"))+": ",1),e("span",Ot,a(s.$t(l(_).resonator_template.id)),1)]),_:1}),t(z,{class:"ma-1 text-truncate"},{default:o(()=>[e("span",Wt,a(s.$t("general.monster_id"))+": ",1),e("span",zt,a(s.$t(l(_).resonator_template.monster_id)),1)]),_:1}),t(z,{class:"ma-1 text-truncate"},{default:o(()=>[e("span",Ht,a(s.$t("general.team_dps"))+": ",1),e("span",Jt,a(l(_).damage_distribution.getTeamDPSString()),1)]),_:1}),(c(!0),x(Q,null,le(l(_).getDamageDistributionsWithBuffsBars(),g=>(c(),x("div",Gt,[t(de,{location:"bottom"},{activator:o(({props:M})=>[e("div",ae({class:"d-flex flex-column align-start bg-grey-darken-4 w-100",ref_for:!0},M),[g.percentage>.5?(c(),x("div",{key:0,class:ue("barh d-flex flex-row-reverse align-center bg-white"),style:ie(`width: ${g.percentageString};`)},[e("span",aa,a(g.text)+" ("+a(g.percentageString)+") ",1)],4)):(c(),x("div",oa,[e("div",{class:ue("barh d-flex bg-white"),style:ie(`width: ${g.percentageString};`)},null,4),e("span",na,a(g.text)+" ("+a(g.percentageString)+") ",1)]))],16)]),default:o(()=>[e("div",Qt,[e("div",Zt,[e("span",Xt,a(s.$t("general.damage"))+": ",1),e("span",null,a(g.damageString),1)]),e("div",Yt,[e("span",ea,a(s.$t("general.dps"))+": ",1),e("span",null,a(g.dpsString),1)]),e("div",la,[e("span",ta,"("+a(s.$t("general.denominator"))+": ",1),e("span",null,a(s.$t("general.team_dps"))+")",1)])])]),_:2},1024)]))),256))])]),_:1})]),t(z,{class:"my-1"},{default:o(()=>[e("h2",sa,a(s.$t("general.resonator")),1)]),_:1}),(c(!0),x(Q,null,le(l(_).resonator_template.getResonatorNames(),(g,M)=>(c(),x("div",da,[g?(c(),x(Q,{key:0},[t(z,{class:"my-1"},{default:o(()=>[e("h3",{id:`resonator${M}`},a(s.$t(g)),9,ia)]),_:2},1024),t(V,{class:"my-1",resonator:l(_).getResonatorModelByName(g)},null,8,["resonator"]),t(z,{class:"my-1"},{default:o(()=>[e("h4",{id:`resonator${M}_skill_damage_distribution`},a(s.$t("template.damage_analysis.skill_damage_distribution")),9,ua)]),_:2},1024),e("div",ra,[t(ee,{class:"bg-blue-grey-darken-4"},{default:o(()=>[e("div",ma,[t(z,{class:"ma-1 text-truncate"},{default:o(()=>[e("span",ca,a(s.$t("general.template_id"))+": ",1),e("span",fa,a(s.$t(l(_).resonator_template.id)),1)]),_:1}),t(z,{class:"ma-1 text-truncate"},{default:o(()=>[e("span",_a,a(s.$t("general.monster_id"))+": ",1),e("span",pa,a(s.$t(l(_).resonator_template.monster_id)),1)]),_:1}),t(z,{class:"ma-1 text-truncate"},{default:o(()=>[e("span",va,a(s.$t("general.resonator_dps"))+": ",1),e("span",ga,a(l(_).damage_distribution.getResonatorDPSString(g)),1)]),_:2},1024),(c(!0),x(Q,null,le(l(_).damage_distribution.getResonatorSkillBars(g),r=>(c(),x("div",ba,[t(de,{location:"bottom"},{activator:o(({props:D})=>[e("div",ae({class:"d-flex flex-column align-start bg-grey-darken-4 w-100",ref_for:!0},D),[r.percentage>.5?(c(),x("div",{key:0,class:ue("barh d-flex flex-row-reverse align-center bg-white"),style:ie(`width: ${r.percentageString};`)},[e("span",Sa,a(r.text)+" ("+a(r.percentageString)+") ",1)],4)):(c(),x("div",Ca,[e("div",{class:ue("barh d-flex bg-white"),style:ie(`width: ${r.percentageString};`)},null,4),e("span",Ra,a(r.text)+" ("+a(r.percentageString)+") ",1)]))],16)]),default:o(()=>[e("div",ha,[e("div",$a,[e("span",null,a(r.data.type),1)]),e("div",Va,[e("span",ya,a(s.$t("general.damage"))+": ",1),e("span",null,a(r.damageString),1)]),e("div",wa,[e("span",xa,a(s.$t("general.dps"))+": ",1),e("span",null,a(r.dpsString),1)]),e("div",ka,[e("span",Ua,"("+a(s.$t("general.denominator"))+": ",1),e("span",null,a(s.$t(g))+" "+a(s.$t("general.dps"))+")",1)])])]),_:2},1024)]))),256))])]),_:2},1024)]),t(z,{class:"my-1"},{default:o(()=>[e("h4",{id:`resonator${M}_skill_type_damage_distribution`},a(s.$t("template.damage_analysis.skill_type_damage_distribution")),9,Ta)]),_:2},1024),e("div",Ia,[t(ee,{class:"bg-blue-grey-darken-4"},{default:o(()=>[e("div",Ba,[t(z,{class:"ma-1 text-truncate"},{default:o(()=>[e("span",Da,a(s.$t("general.template_id"))+": ",1),e("span",Pa,a(s.$t(l(_).resonator_template.id)),1)]),_:1}),t(z,{class:"ma-1 text-truncate"},{default:o(()=>[e("span",Aa,a(s.$t("general.monster_id"))+": ",1),e("span",Ea,a(s.$t(l(_).resonator_template.monster_id)),1)]),_:1}),t(z,{class:"ma-1 text-truncate"},{default:o(()=>[e("span",Na,a(s.$t("general.resonator_damage"))+": ",1),e("span",Fa,a(l(_).damage_distribution.getResonatorDamageString(g)),1)]),_:2},1024),(c(!0),x(Q,null,le(l(_).damage_distribution.getResonatorSkillTypeBars(g),r=>(c(),x("div",Ma,[t(de,{location:"bottom"},{activator:o(({props:D})=>[e("div",ae({class:"d-flex flex-column align-start bg-grey-darken-4 w-100",ref_for:!0},D),[r.percentage>.5?(c(),x("div",{key:0,class:ue("barh d-flex flex-row-reverse align-center bg-white"),style:ie(`width: ${r.percentageString};`)},[e("span",za,a(s.$t(`general.resonator_skills.${r.text}`))+" ("+a(r.percentageString)+") ",1)],4)):(c(),x("div",Ha,[e("div",{class:ue("barh d-flex bg-white"),style:ie(`width: ${r.percentageString};`)},null,4),e("span",Ja,a(s.$t(`general.resonator_skills.${r.text}`))+" ("+a(r.percentageString)+") ",1)]))],16)]),default:o(()=>[e("div",qa,[e("div",La,[e("span",null,a(s.$t(`general.resonator_skills.${r.text}`)),1)]),e("div",ja,[e("span",Ka,a(s.$t("general.damage"))+": ",1),e("span",null,a(r.damageString),1)]),e("div",Oa,[e("span",Wa,"("+a(s.$t("general.denominator"))+": ",1),e("span",null,a(s.$t(g))+" "+a(s.$t("general.damage"))+")",1)])])]),_:2},1024)]))),256))])]),_:2},1024)]),t(z,{class:"my-1"},{default:o(()=>[e("h4",{id:`resonator${M}_skill_bonus_damage_distribution`},a(s.$t("template.damage_analysis.skill_bonus_damage_distribution")),9,Ga)]),_:2},1024),e("div",Qa,[t(ee,{class:"bg-blue-grey-darken-4"},{default:o(()=>[e("div",Za,[t(z,{class:"ma-1 text-truncate"},{default:o(()=>[e("span",Xa,a(s.$t("general.template_id"))+": ",1),e("span",Ya,a(s.$t(l(_).resonator_template.id)),1)]),_:1}),t(z,{class:"ma-1 text-truncate"},{default:o(()=>[e("span",eo,a(s.$t("general.monster_id"))+": ",1),e("span",lo,a(s.$t(l(_).resonator_template.monster_id)),1)]),_:1}),t(z,{class:"ma-1 text-truncate"},{default:o(()=>[e("span",to,a(s.$t("general.resonator_damage"))+": ",1),e("span",ao,a(l(_).damage_distribution.getResonatorDamageString(g)),1)]),_:2},1024),(c(!0),x(Q,null,le(l(_).damage_distribution.getResonatorSkillBonusBars(g),r=>(c(),x("div",oo,[t(de,{location:"bottom"},{activator:o(({props:D})=>[e("div",ae({class:"d-flex flex-column align-start bg-grey-darken-4 w-100",ref_for:!0},D),[r.percentage>.5?(c(),x("div",{key:0,class:ue("barh d-flex flex-row-reverse align-center bg-white"),style:ie(`width: ${r.percentageString};`)},[e("span",co,a(s.$t(`general.resonator_bonus.${r.text}`))+" ("+a(r.percentageString)+") ",1)],4)):(c(),x("div",fo,[e("div",{class:ue("barh d-flex bg-white"),style:ie(`width: ${r.percentageString};`)},null,4),e("span",_o,a(s.$t(`general.resonator_bonus.${r.text}`))+" ("+a(r.percentageString)+") ",1)]))],16)]),default:o(()=>[e("div",no,[e("div",so,[e("span",null,a(s.$t(`general.resonator_bonus.${r.text}`)),1)]),e("div",io,[e("span",uo,a(s.$t("general.damage"))+": ",1),e("span",null,a(r.damageString),1)]),e("div",ro,[e("span",mo,"("+a(s.$t("general.denominator"))+": ",1),e("span",null,a(s.$t(g))+" "+a(s.$t("general.damage"))+")",1)])])]),_:2},1024)]))),256))])]),_:2},1024)])],64)):J("",!0)]))),256)),t(z,{class:"my-1"},{default:o(()=>[e("h2",po,a(s.$t("general.rotation")),1)]),_:1}),e("div",vo,[l(_).resonator_template.id?(c(),X(f,{key:0,class:"my-1",rotation:l(_).resonator_template.getRotation(),jump:"calculated_row"},null,8,["rotation"])):J("",!0)]),t(z,{class:"my-1"},{default:o(()=>[e("h3",go,a(s.$t("template.damage_analysis.rotation_damage")),1)]),_:1}),l(_).damage_distribution.rows.length>0?(c(),x("div",bo,[t(ee,{class:"bg-blue-grey-darken-4"},{default:o(()=>[e("div",ho,[t(z,{class:"ma-1 text-truncate"},{default:o(()=>[e("span",$o,a(s.$t("general.template_id"))+": ",1),e("span",Vo,a(s.$t(l(_).resonator_template.id)),1)]),_:1}),t(z,{class:"ma-1 text-truncate"},{default:o(()=>[e("span",yo,a(s.$t("general.monster_id"))+": ",1),e("span",wo,a(s.$t(l(_).resonator_template.monster_id)),1)]),_:1}),t(z,{class:"ma-1 text-truncate"},{default:o(()=>[e("span",xo,a(s.$t("general.team_dps"))+": ",1),e("span",ko,a(l(_).damage_distribution.getMaxTeamDPSString()),1)]),_:1}),(c(!0),x(Q,null,le(l(_).getCalculatedRowBars(),(g,M)=>(c(),x("div",Uo,[e("img",{class:"resonator-icon mr-2",src:l(F).getIconSrcByName(g.data.resonator_name)},null,8,So),t(de,{width:"400",location:"bottom"},{activator:o(({props:r})=>[e("div",ae({id:`rotation_damage${M}`,class:"d-flex flex-column align-start bg-grey-darken-4 w-100 cursor-pointer",ref_for:!0},r,{onClick:D=>l(oe)(l(A),`#calculated_row${M}`)}),[g.percentage>.5?(c(),x("div",{key:0,class:ue(`barh d-flex flex-row-reverse align-center bg-${g.data.color}`),style:ie(`width: ${g.percentageString};`)},[e("span",Oo,a(s.$t(g.text))+" ("+a(g.percentageString)+") ",1)],6)):(c(),x("div",Wo,[e("div",{class:ue(`barh d-flex bg-${g.data.color}`),style:ie(`width: ${g.percentageString};`)},null,6),e("span",zo,a(s.$t(g.text))+" ("+a(g.percentageString)+") ",1)]))],16,Ko)]),default:o(()=>[e("div",Co,[e("div",Ro,[e("span",null,a(s.$t("general.nth_row",{n:M+1})),1)]),e("div",To,[e("span",Io,a(s.$t("general.resonator"))+": ",1),e("span",null,a(s.$t(g.data.resonator_name)),1)]),e("div",Bo,[e("span",Do,a(s.$t("general.resonator_skill_id"))+": ",1),e("span",Po,a(s.$t(g.data.skill_id)),1)]),e("div",Ao,[e("span",Eo,a(s.$t("general.damage"))+": ",1),e("span",null,a(l(rl)(g.damage)),1)]),e("div",No,[e("span",Fo,a(s.$t("general.time_start"))+": ",1),e("span",null,a(s.$t(g.data.time_start)),1)]),e("div",Mo,[e("span",qo,a(s.$t("general.time_end"))+": ",1),e("span",null,a(s.$t(g.data.time_end)),1)]),e("div",Lo,[e("span",jo,"("+a(s.$t("general.denominator"))+": ",1),e("span",null,a(s.$t("general.damage"))+" "+a(l(rl)(g.data.baseDamage))+")",1)])])]),_:2},1024)]))),256))])]),_:1})])):J("",!0),l(_).damage_distribution.rows.length>0?(c(),x("div",Ho,[t(z,{class:"my-1"},{default:o(()=>[e("h3",Jo,a(s.$t("template.damage_analysis.detailed_damage")),1)]),_:1}),(c(!0),x(Q,null,le(l(_).damage_distribution.rows,(g,M)=>(c(),x("div",{id:`calculated_row${M}`,class:"d-flex flex-column my-1"},[e("div",Qo,[e("img",{class:"resonator-icon mr-4",src:l(F).getIconSrcByName(g.resonator_name)},null,8,Zo),e("span",Xo,a(s.$t(g.resonator_name)),1),e("span",null,a(s.$t("general.nth_row",{n:M+1})),1),e("div",Yo,[l(_).resonator_template.getRotationIndices().includes(M.toString())?(c(),X(H,{key:0,class:"mr-2",onClick:r=>l(oe)(l(A),`#rotation${M}`)},{default:o(()=>[P(a(s.$t("general.back_to",{to:s.$t("general.rotation")})),1)]),_:2},1032,["onClick"])):J("",!0),t(H,{onClick:r=>l(oe)(l(A),`#rotation_damage${M}`)},{default:o(()=>[P(a(s.$t("general.back_to",{to:s.$t("template.damage_analysis.rotation_damage")})),1)]),_:2},1032,["onClick"])])]),t(z,{class:"my-1"},{default:o(()=>[e("h4",null,a(s.$t("general.skill")),1)]),_:1}),t(Be,{class:"table my-1",items:E(g),"disable-sort":"","hide-default-footer":"","items-per-page":2},null,8,["items"]),e("div",en,[t(z,{class:"my-1"},{default:o(()=>[e("h4",null,a(s.$t("general.damage")),1)]),_:1}),t(Be,{class:"table my-1",items:te(g),"disable-sort":"","hide-default-footer":"","items-per-page":2},null,8,["items"])]),e("div",ln,[t(z,{class:"my-1"},{default:o(()=>[e("h4",null,a(s.$t("general.buff")),1)]),_:1}),t(Be,{class:"table my-1",items:v(g),"disable-sort":"","hide-default-footer":"","items-per-page":-1},null,8,["items"])]),e("div",tn,[t(z,{class:"my-1"},{default:o(()=>[e("h4",null,a(s.$t("general.calculation")),1)]),_:1}),t(u,{calculation:g.calculation},null,8,["calculation"])])],8,Go))),256))])):J("",!0)]),_:1})):J("",!0)]),_:1})}}}),on=We(an,[["__scopeId","data-v-ef294a3d"]]),nn={class:"d-flex flex-column w-100"},sn={class:"d-flex flex-row ml-auto mb-4"},dn={key:0,class:"d-flex flex-row mb-4"},un=be({__name:"TemplateDamageAnalysis",props:{id:{type:String,required:!0}},setup(p){const m=p.id,I=ye(m),L=j(new zl);function _(){L.value.calculateByTemplate(I.data)}return(F,R)=>(c(),x("div",nn,[e("div",sn,[t(H,{onClick:R[0]||(R[0]=h=>_())},{default:o(()=>[P(a(F.$t("general.analyze")),1)]),_:1})]),L.value?(c(),x("div",dn,[t(on,{damageAnalysis:L.value},null,8,["damageAnalysis"])])):J("",!0)]))}}),rn={class:"d-flex flex-column w-100"},mn={class:"d-flex flex-row mb-4"},cn={class:"d-flex flex-row mb-4"},fn={class:"d-flex flex-row mb-4"},_n={class:"d-flex flex-row mb-4"},pn={class:"d-flex flex-row mb-4"},vn={class:"d-flex flex-row mb-4"},gn={class:"d-flex flex-row mb-4"},bn={class:"d-flex flex-row mb-4"},hn=be({__name:"TemplateEcho",props:{i:{type:Number,required:!0},j:{type:Number,required:!0},id:{type:String,required:!0}},setup(p){const A=p,m=A.i,I=A.j,L=A.id,_=ye(L),{t:F}=De(),R=_.data.calculation.resonators[m].echoes,h=R.getEcho(I);return Ue(()=>h.cost,()=>{h.updateMainAffixKeysByCost()}),(w,S)=>(c(),x("div",rn,[e("div",mn,[t(fe,{modelValue:l(h)._item,"onUpdate:modelValue":[S[0]||(S[0]=k=>l(h)._item=k),S[1]||(S[1]=k=>{l(R).updateEchoByEchoItem(l(I),k)})],items:l(h).getEchoItems(),label:w.$t("general.name"),variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","items","label"])]),e("div",cn,[t(K,{modelValue:l(h).sonata,"onUpdate:modelValue":S[2]||(S[2]=k=>l(h).sonata=k),items:l(h)._sonatas,label:w.$t("general.sonata"),disabled:l(h)._sonatas.length===0,variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","items","label","disabled"])]),e("div",fn,[t(K,{modelValue:l(h).cost,"onUpdate:modelValue":[S[3]||(S[3]=k=>l(h).cost=k),S[4]||(S[4]=k=>{l(R).updateEchoByCost(l(I),k)})],label:w.$t("general.echo_cost"),items:l(h).getCosts(),variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","label","items"])]),e("div",_n,[e("span",null,a(w.$t("general.main_affix")),1)]),e("div",pn,[(c(),X(K,{class:"mr-6 w-50",modelValue:l(h)._main_affix_item,"onUpdate:modelValue":[S[5]||(S[5]=k=>l(h)._main_affix_item=k),S[6]||(S[6]=k=>{l(R).updateEchoMainAffix(l(I),k)})],items:l(h)._main_affix_items,label:w.$t(l(je)(l(h)._main_affix_item.value)),key:l(h)._main_affix_item.value,variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","items","label"])),(c(),X(T,{class:"w-50",modelValue:l(h).main_affix[l(h)._main_affix_item.value],"onUpdate:modelValue":[S[7]||(S[7]=k=>l(h).main_affix[l(h)._main_affix_item.value]=k),l(R).resetPolicy],label:w.$t(l(je)(l(h)._main_affix_item.value)),key:l(h).main_affix[l(h)._main_affix_item.value],variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","label","onUpdate:modelValue"]))]),e("div",vn,[e("span",null,a(w.$t("general.fixed_main_affix")),1)]),(c(),x("div",{class:"d-flex flex-row mb-4",key:l(h)._fixed_main_affix_key},[(c(),X(T,{modelValue:l(h).main_affix[l(h)._fixed_main_affix_key],"onUpdate:modelValue":[S[8]||(S[8]=k=>l(h).main_affix[l(h)._fixed_main_affix_key]=k),l(R).resetPolicy],label:w.$t(l(je)(l(h)._fixed_main_affix_key)),key:l(h).main_affix[l(h)._fixed_main_affix_key],variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","label","onUpdate:modelValue"]))])),e("div",gn,[e("span",null,a(w.$t("general.sub_affix")),1)]),(c(!0),x(Q,null,le(l(h).getSubAffixKeys(),k=>(c(),x("div",bn,[(c(),X(fe,{modelValue:l(h).sub_affix[k],"onUpdate:modelValue":[E=>l(h).sub_affix[k]=E,l(R).resetPolicy],items:l(kl)[k],label:w.$t(l(je)(k)),key:k,variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items","label"]))]))),256))]))}}),$n={class:"d-flex flex-column w-100"},Vn={class:"d-flex flex-row mb-4"},yn={class:"d-flex flex-row mb-4"},wn={class:"d-flex flex-row mb-4"},xn={class:"d-flex flex-row mb-4"},kn=be({__name:"TemplateAutoFillEcho",props:{i:{type:Number,required:!0},id:{type:String,required:!0}},setup(p){const A=p,m=A.i,I=A.id,_=ye(I).data.calculation.resonators[m],F=_.echoes,R=_.weapon;return(h,w)=>(c(),x("div",$n,[e("div",Vn,[t(K,{modelValue:l(F).base_attr,"onUpdate:modelValue":[w[0]||(w[0]=S=>l(F).base_attr=S),w[1]||(w[1]=S=>l(Ye)(l(_).resonator,l(R),l(F)))],items:l(cl)(),label:h.$t("general.base_attr"),variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","items","label"])]),e("div",yn,[t(K,{modelValue:l(F).main_skill_bonus,"onUpdate:modelValue":[w[2]||(w[2]=S=>l(F).main_skill_bonus=S),w[3]||(w[3]=S=>l(Ye)(l(_).resonator,l(R),l(F)))],items:l(fl)(),label:h.$t("general.main_skill_bonus"),variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","items","label"])]),e("div",wn,[t(fe,{modelValue:l(F).getEcho(0)._item,"onUpdate:modelValue":[w[4]||(w[4]=S=>l(F).getEcho(0)._item=S),w[5]||(w[5]=S=>l(F).getEcho(0).updateByEchoItem())],items:l(F).getEcho(0).getEchoItems(),label:h.$t("general.nth_echo",{n:1}),variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","items","label"])]),e("div",xn,[t(K,{modelValue:l(F).policy,"onUpdate:modelValue":[w[6]||(w[6]=S=>l(F).policy=S),w[7]||(w[7]=S=>l(Ye)(l(_).resonator,l(R),l(F)))],items:l(F).getEchoPolicyItems(),label:h.$t("general.echo_policy"),variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","items","label"])]),(c(!0),x(Q,null,le(l(F).echoes,(S,k)=>(c(),x("div",{class:"d-flex flex-row mb-4",key:k},[t(K,{modelValue:S.sonata,"onUpdate:modelValue":E=>S.sonata=E,items:S._sonatas,label:h.$t("general.nth_sonata",{n:k+1}),variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items","label"])]))),128))]))}}),Un={class:"d-flex flex-row w-100"},Sn={class:"d-flex flex-column w-100 mr-6"},Cn={class:"d-flex flex-row mb-4"},Rn={class:"d-flex flex-row mb-4"},Tn={class:"d-flex flex-row mb-4"},In={class:"d-flex flex-row mb-4"},Bn={class:"d-flex flex-row mb-4"},Dn={class:"d-flex flex-row mb-4"},Pn={class:"d-flex flex-row mb-4"},An={class:"d-flex flex-row mb-4"},En={class:"d-flex flex-row mb-4"},Nn={class:"d-flex flex-row mb-4"},Fn={class:"d-flex flex-row mb-4"},Mn={class:"d-flex flex-row mb-4"},qn={class:"d-flex flex-row mb-4"},Ln={class:"d-flex flex-row mb-4"},jn={class:"d-flex flex-row mb-4"},Kn={class:"d-flex flex-row mb-4"},On={class:"d-flex flex-row mb-4"},Wn={class:"d-flex flex-row mb-4"},zn={class:"d-flex flex-row mb-4"},Hn={class:"d-flex flex-row mb-4"},Jn={class:"d-flex flex-row mb-4"},Gn={class:"d-flex flex-row mb-4"},Qn={class:"d-flex flex-row mb-4"},Zn={class:"d-flex flex-row mb-4"},Xn={class:"d-flex flex-row mb-4"},Yn={class:"d-flex flex-row mb-4"},es={class:"d-flex flex-row mb-4"},ls={class:"d-flex flex-row mb-4"},ts={class:"d-flex flex-row mb-4"},as={class:"d-flex flex-row mb-4"},os={class:"d-flex flex-row mb-4"},ns={class:"d-flex flex-row mb-4"},ss={class:"d-flex flex-row mb-4"},ds={class:"d-flex flex-row mb-4"},is={class:"d-flex flex-column w-100"},us={class:"d-flex flex-row mb-4"},rs={class:"d-flex flex-column text-grey-lighten-1"},ms={class:"d-flex flex-row mb-4"},cs={class:"d-flex flex-row mb-4"},fs={class:"d-flex flex-row mb-4"},_s={class:"d-flex flex-row mb-4"},ps={class:"d-flex flex-row mb-4"},vs={class:"d-flex flex-row mb-4"},gs=be({__name:"TemplateResonator",props:{id:{type:String,required:!0},i:{type:Number,required:!0}},setup(p){let m=ze().query.spoiler;m==="true"||m===!0?m=!0:m=!1;const I=p,L=I.id,_=I.i,F=ye(L),{t:R}=De(),h=Oe();h.getNames(m);const w=h.getLevels();h.getChains();const S=h.getSkillLevels(),k=_l(),E=k.getNames(m),te=k.getTunes(),v=F.data.calculation.resonators[_].resonator,s=F.data.calculation.resonators[_].weapon;F.data.calculation.resonators[_].echoes;function O(V){return E.includes(V)?!0:R("general.error")}function B(){s.updateRowWeaponByName()}return(V,f)=>(c(),x("div",Un,[e("div",Sn,[e("div",Cn,[e("h2",null,a(V.$t("general.input")),1)]),e("div",Rn,[e("span",null,a(V.$t("general.resonator")),1)]),e("div",Tn,[t(K,{modelValue:l(v).level,"onUpdate:modelValue":[f[0]||(f[0]=u=>l(v).level=u),l(v).updateByLevel],items:l(w),label:V.$t("general.level"),variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","items","label","onUpdate:modelValue"])]),e("div",In,[t(T,{modelValue:l(v).energy_regen,"onUpdate:modelValue":f[1]||(f[1]=u=>l(v).energy_regen=u),label:V.$t("general.energy_regen"),variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","label"])]),e("div",Bn,[e("span",null,a(V.$t("general.weapon")),1)]),e("div",Dn,[t(fe,{modelValue:l(s).name,"onUpdate:modelValue":[f[2]||(f[2]=u=>l(s).name=u),B],items:l(E),label:V.$t("general.name"),rules:[O],variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","items","label","rules"])]),e("div",Pn,[t(K,{modelValue:l(s).level,"onUpdate:modelValue":[f[3]||(f[3]=u=>l(s).level=u),B],items:l(s).getLevels(),label:V.$t("general.level"),variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","items","label"])]),e("div",An,[t(K,{modelValue:l(s).tune,"onUpdate:modelValue":[f[4]||(f[4]=u=>l(s).tune=u),B],items:l(te),label:V.$t("general.tune"),variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","items","label"])]),e("div",En,[e("span",null,a(V.$t("general.skill_level")),1)]),e("div",Nn,[t(K,{modelValue:l(v).normal_attack_lv,"onUpdate:modelValue":f[5]||(f[5]=u=>l(v).normal_attack_lv=u),items:l(S),label:V.$t("general.resonator_skills.normal_attack"),variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","items","label"])]),e("div",Fn,[t(K,{modelValue:l(v).resonance_skill_lv,"onUpdate:modelValue":f[6]||(f[6]=u=>l(v).resonance_skill_lv=u),items:l(S),label:V.$t("general.resonator_skills.resonance_skill"),variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","items","label"])]),e("div",Mn,[t(K,{modelValue:l(v).forte_circuit_lv,"onUpdate:modelValue":f[7]||(f[7]=u=>l(v).forte_circuit_lv=u),items:l(S),label:V.$t("general.resonator_skills.forte_circuit"),variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","items","label"])]),e("div",qn,[t(K,{modelValue:l(v).resonance_liberation_lv,"onUpdate:modelValue":f[8]||(f[8]=u=>l(v).resonance_liberation_lv=u),items:l(S),label:V.$t("general.resonator_skills.resonance_liberation"),variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","items","label"])]),e("div",Ln,[t(K,{modelValue:l(v).intro_skill_lv,"onUpdate:modelValue":f[9]||(f[9]=u=>l(v).intro_skill_lv=u),items:l(S),label:V.$t("general.resonator_skills.intro_skill"),variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","items","label"])]),e("div",jn,[t(Ke,{modelValue:l(v).inherent_skill_1,"onUpdate:modelValue":f[10]||(f[10]=u=>l(v).inherent_skill_1=u),label:V.$t("general.resonator_skills.inherent_skill_1"),variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","label"])]),e("div",Kn,[t(Ke,{modelValue:l(v).inherent_skill_2,"onUpdate:modelValue":f[11]||(f[11]=u=>l(v).inherent_skill_2=u),label:V.$t("general.resonator_skills.inherent_skill_2"),variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","label"])]),e("div",On,[e("span",null,a(V.$t("general.stat_bonus")),1)]),e("div",Wn,[t(T,{modelValue:l(v).stat_bonus.hp_p,"onUpdate:modelValue":f[12]||(f[12]=u=>l(v).stat_bonus.hp_p=u),label:V.$t("general.hp_p"),variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","label"])]),e("div",zn,[t(T,{modelValue:l(v).stat_bonus.atk_p,"onUpdate:modelValue":f[13]||(f[13]=u=>l(v).stat_bonus.atk_p=u),label:V.$t("general.atk_p"),variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","label"])]),e("div",Hn,[t(T,{modelValue:l(v).stat_bonus.def_p,"onUpdate:modelValue":f[14]||(f[14]=u=>l(v).stat_bonus.def_p=u),label:V.$t("general.def_p"),variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","label"])]),e("div",Jn,[t(T,{modelValue:l(v).stat_bonus.crit_rate,"onUpdate:modelValue":f[15]||(f[15]=u=>l(v).stat_bonus.crit_rate=u),label:V.$t("general.crit_rate"),variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","label"])]),e("div",Gn,[t(T,{modelValue:l(v).stat_bonus.crit_dmg,"onUpdate:modelValue":f[16]||(f[16]=u=>l(v).stat_bonus.crit_dmg=u),label:V.$t("general.crit_dmg"),variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","label"])]),e("div",Qn,[t(T,{modelValue:l(v).stat_bonus.bonus_resonance_skill,"onUpdate:modelValue":f[17]||(f[17]=u=>l(v).stat_bonus.bonus_resonance_skill=u),label:V.$t("general.bonus_resonance_skill"),variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","label"])]),e("div",Zn,[t(T,{modelValue:l(v).stat_bonus.bonus_basic_attack,"onUpdate:modelValue":f[18]||(f[18]=u=>l(v).stat_bonus.bonus_basic_attack=u),label:V.$t("general.bonus_basic_attack"),variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","label"])]),e("div",Xn,[t(T,{modelValue:l(v).stat_bonus.bonus_heavy_attack,"onUpdate:modelValue":f[19]||(f[19]=u=>l(v).stat_bonus.bonus_heavy_attack=u),label:V.$t("general.bonus_heavy_attack"),variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","label"])]),e("div",Yn,[t(T,{modelValue:l(v).stat_bonus.bonus_resonance_liberation,"onUpdate:modelValue":f[20]||(f[20]=u=>l(v).stat_bonus.bonus_resonance_liberation=u),label:V.$t("general.bonus_resonance_liberation"),variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","label"])]),e("div",es,[t(T,{modelValue:l(v).stat_bonus.bonus_healing,"onUpdate:modelValue":f[21]||(f[21]=u=>l(v).stat_bonus.bonus_healing=u),label:V.$t("general.bonus_healing"),variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","label"])]),e("div",ls,[t(T,{modelValue:l(v).stat_bonus.bonus_physics,"onUpdate:modelValue":f[22]||(f[22]=u=>l(v).stat_bonus.bonus_physics=u),label:V.$t("general.bonus_physics"),variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","label"])]),e("div",ts,[t(T,{modelValue:l(v).stat_bonus.bonus_glacio,"onUpdate:modelValue":f[23]||(f[23]=u=>l(v).stat_bonus.bonus_glacio=u),label:V.$t("general.bonus_glacio"),variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","label"])]),e("div",as,[t(T,{modelValue:l(v).stat_bonus.bonus_fusion,"onUpdate:modelValue":f[24]||(f[24]=u=>l(v).stat_bonus.bonus_fusion=u),label:V.$t("general.bonus_fusion"),variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","label"])]),e("div",os,[t(T,{modelValue:l(v).stat_bonus.bonus_electro,"onUpdate:modelValue":f[25]||(f[25]=u=>l(v).stat_bonus.bonus_electro=u),label:V.$t("general.bonus_electro"),variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","label"])]),e("div",ns,[t(T,{modelValue:l(v).stat_bonus.bonus_aero,"onUpdate:modelValue":f[26]||(f[26]=u=>l(v).stat_bonus.bonus_aero=u),label:V.$t("general.bonus_aero"),variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","label"])]),e("div",ss,[t(T,{modelValue:l(v).stat_bonus.bonus_spectro,"onUpdate:modelValue":f[27]||(f[27]=u=>l(v).stat_bonus.bonus_spectro=u),label:V.$t("general.bonus_spectro"),variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","label"])]),e("div",ds,[t(T,{modelValue:l(v).stat_bonus.bonus_havoc,"onUpdate:modelValue":f[28]||(f[28]=u=>l(v).stat_bonus.bonus_havoc=u),label:V.$t("general.bonus_havoc"),variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","label"])])]),e("div",is,[e("div",us,[e("h2",null,a(V.$t("general.result")),1)]),e("div",rs,[e("div",ms,[e("span",null,a(V.$t("general.resonator")),1)]),e("div",cs,[t(T,{modelValue:l(v).hp,"onUpdate:modelValue":f[29]||(f[29]=u=>l(v).hp=u),label:V.$t("general.hp"),variant:"outlined",density:"compact","hide-details":"",readonly:""},null,8,["modelValue","label"])]),e("div",fs,[t(T,{modelValue:l(v).atk,"onUpdate:modelValue":f[30]||(f[30]=u=>l(v).atk=u),label:V.$t("general.atk"),variant:"outlined",density:"compact","hide-details":"",readonly:""},null,8,["modelValue","label"])]),e("div",_s,[t(T,{modelValue:l(v).def,"onUpdate:modelValue":f[31]||(f[31]=u=>l(v).def=u),label:V.$t("general.def"),variant:"outlined",density:"compact","hide-details":"",readonly:""},null,8,["modelValue","label"])]),e("div",ps,[e("span",null,a(V.$t("general.weapon")),1)]),e("div",vs,[t(T,{modelValue:l(s).atk,"onUpdate:modelValue":f[32]||(f[32]=u=>l(s).atk=u),label:V.$t("general.atk"),variant:"outlined",density:"compact","hide-details":"",readonly:""},null,8,["modelValue","label"])]),l(s).stat_bonus.getKeys().length>0?(c(),x("div",{class:"d-flex flex-column w-100",key:l(s).stat_bonus.getKeys().length},[(c(!0),x(Q,null,le(l(s).stat_bonus.getKeys(),u=>(c(),x("div",{class:"d-flex flex-row mb-4",key:u},[t(T,{modelValue:l(s).stat_bonus[u],"onUpdate:modelValue":N=>l(s).stat_bonus[u]=N,label:V.$t(`general.${u}`),variant:"outlined",density:"compact","hide-details":"",readonly:""},null,8,["modelValue","onUpdate:modelValue","label"])]))),128))])):J("",!0),l(s).passive_stat_bonus.getKeys().length>0?(c(),x("div",{class:"d-flex flex-column w-100",key:l(s).passive_stat_bonus.getKeys().length},[(c(!0),x(Q,null,le(l(s).passive_stat_bonus.getKeys(),u=>(c(),x("div",{class:"d-flex flex-row mb-4",key:u},[t(T,{modelValue:l(s).passive_stat_bonus[u],"onUpdate:modelValue":N=>l(s).passive_stat_bonus[u]=N,label:V.$t(`general.${u}`),variant:"outlined",density:"compact","hide-details":"",readonly:""},null,8,["modelValue","onUpdate:modelValue","label"])]))),128))])):J("",!0)])])]))}}),bs=We(gs,[["__scopeId","data-v-94cbfbce"]]);function hs(p,A,m){if(A==null)return p;if(Array.isArray(A))throw new Error("Multiple matches is not implemented");return typeof A=="number"&&~A?t(Q,null,[t("span",{class:"v-autocomplete__unmask"},[p.substr(0,A)]),t("span",{class:"v-autocomplete__mask"},[p.substr(A,m)]),t("span",{class:"v-autocomplete__unmask"},[p.substr(A+m)])]):p}const $s=Bl({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:Boolean,search:String,...tt({filterKeys:["title"]}),...lt(),...Kl(at({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...jl({transition:!1})},"VAutocomplete"),tl=Il()({name:"VAutocomplete",props:$s(),emits:{"update:focused":p=>!0,"update:search":p=>!0,"update:modelValue":p=>!0,"update:menu":p=>!0},setup(p,A){let{slots:m}=A;const{t:I}=Dl(),L=j(),_=Te(!1),F=Te(!0),R=Te(!1),h=j(),w=j(),S=Qe(p,"menu"),k=ce({get:()=>S.value,set:y=>{var q;S.value&&!y&&((q=h.value)!=null&&q.Î¨openChildren.size)||(S.value=y)}}),E=Te(-1),te=ce(()=>{var y;return(y=L.value)==null?void 0:y.color}),v=ce(()=>k.value?p.closeText:p.openText),{items:s,transformIn:O,transformOut:B}=ot(p),{textColorClasses:V,textColorStyles:f}=Pl(te),u=Qe(p,"search",""),N=Qe(p,"modelValue",[],y=>O(y===null?[null]:Al(y)),y=>{const q=B(y);return p.multiple?q:q[0]??null}),g=ce(()=>typeof p.counterValue=="function"?p.counterValue(N.value):typeof p.counterValue=="number"?p.counterValue:N.value.length),M=Gl(p),{filteredItems:r,getMatches:D}=Ql(p,s,()=>F.value?"":u.value),b=ce(()=>p.hideSelected?r.value.filter(y=>!N.value.some(q=>q.value===y.value)):r.value),ne=ce(()=>!!(p.chips||m.chip)),$=ce(()=>ne.value||!!m.selection),He=ce(()=>N.value.map(y=>y.props.value)),we=ce(()=>{var q;return(p.autoSelectFirst===!0||p.autoSelectFirst==="exact"&&u.value===((q=b.value[0])==null?void 0:q.title))&&b.value.length>0&&!F.value&&!R.value}),_e=ce(()=>p.hideNoData&&!b.value.length||M.isReadonly.value||M.isDisabled.value),re=j(),Je=Zl(re,L);function he(y){p.openOnClear&&(k.value=!0),u.value=""}function Z(){_e.value||(k.value=!0)}function Ce(y){_e.value||(_.value&&(y.preventDefault(),y.stopPropagation()),k.value=!k.value)}function Pe(y){var q;y.key!==" "&&nl(y)&&((q=L.value)==null||q.focus())}function Ae(y){var i,d,C;if(M.isReadonly.value)return;const q=L.value.selectionStart,Y=N.value.length;if(["Enter","ArrowDown","ArrowUp"].includes(y.key)&&y.preventDefault(),["Enter","ArrowDown"].includes(y.key)&&(k.value=!0),["Escape"].includes(y.key)&&(k.value=!1),we.value&&["Enter","Tab"].includes(y.key)&&!N.value.some(W=>{let{value:n}=W;return n===b.value[0].value})&&me(b.value[0]),y.key==="ArrowDown"&&we.value&&((i=re.value)==null||i.focus("next")),["Backspace","Delete"].includes(y.key)){if(!p.multiple&&$.value&&N.value.length>0&&!u.value)return me(N.value[0],!1);if(~E.value){y.preventDefault();const W=E.value;me(N.value[E.value],!1),E.value=W>=Y-1?Y-2:W}else y.key==="Backspace"&&!u.value&&(E.value=Y-1);return}if(p.multiple)if(y.key==="ArrowLeft"){if(E.value<0&&q>0)return;const W=E.value>-1?E.value-1:Y-1;N.value[W]?E.value=W:(E.value=-1,L.value.setSelectionRange((d=u.value)==null?void 0:d.length,(C=u.value)==null?void 0:C.length))}else if(y.key==="ArrowRight"){if(E.value<0)return;const W=E.value+1;N.value[W]?E.value=W:(E.value=-1,L.value.setSelectionRange(0,0))}else~E.value&&nl(y)&&(E.value=-1)}function Ee(y){if(sl(L.value,":autofill")||sl(L.value,":-webkit-autofill")){const q=s.value.find(Y=>Y.title===y.target.value);q&&me(q)}}function Ne(){var y;p.eager&&((y=w.value)==null||y.calculateVisibleItems())}function Ge(){var y;_.value&&(F.value=!0,(y=L.value)==null||y.focus())}function Fe(y){_.value=!0,setTimeout(()=>{R.value=!0})}function Re(y){R.value=!1}function Me(y){(y==null||y===""&&!p.multiple&&!$.value)&&(N.value=[])}const xe=Te(!1);function me(y){let q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!(!y||y.props.disabled))if(p.multiple){const Y=N.value.findIndex(d=>(p.valueComparator||Ol)(d.value,y.value)),i=q??!~Y;if(~Y){const d=i?[...N.value,y]:[...N.value];d.splice(Y,1),N.value=d}else i&&(N.value=[...N.value,y]);p.clearOnSelect&&(u.value="")}else{const Y=q!==!1;N.value=Y?[y]:[],u.value=Y&&!$.value?y.title:"",ol(()=>{k.value=!1,F.value=!0})}}return Ue(_,(y,q)=>{var Y;y!==q&&(y?(xe.value=!0,u.value=p.multiple||$.value?"":String(((Y=N.value.at(-1))==null?void 0:Y.props.title)??""),F.value=!0,ol(()=>xe.value=!1)):(!p.multiple&&u.value==null&&(N.value=[]),k.value=!1,N.value.some(i=>{let{title:d}=i;return d===u.value})||(u.value=""),E.value=-1))}),Ue(u,y=>{!_.value||xe.value||(y&&(k.value=!0),F.value=!y)}),Ue(k,()=>{if(!p.hideSelected&&k.value&&N.value.length){const y=b.value.findIndex(q=>N.value.some(Y=>q.value===Y.value));El&&window.requestAnimationFrame(()=>{var q;y>=0&&((q=w.value)==null||q.scrollToIndex(y))})}}),Ue(()=>p.items,(y,q)=>{k.value||_.value&&!q.length&&y.length&&(k.value=!0)}),Nl(()=>{const y=!!(!p.hideNoData||b.value.length||m["prepend-item"]||m["append-item"]||m["no-data"]),q=N.value.length>0,Y=T.filterProps(p);return t(T,ae({ref:L},Y,{modelValue:u.value,"onUpdate:modelValue":[i=>u.value=i,Me],focused:_.value,"onUpdate:focused":i=>_.value=i,validationValue:N.externalValue,counterValue:g.value,dirty:q,onChange:Ee,class:["v-autocomplete",`v-autocomplete--${p.multiple?"multiple":"single"}`,{"v-autocomplete--active-menu":k.value,"v-autocomplete--chips":!!p.chips,"v-autocomplete--selection-slot":!!$.value,"v-autocomplete--selecting-index":E.value>-1},p.class],style:p.style,readonly:M.isReadonly.value,placeholder:q?void 0:p.placeholder,"onClick:clear":he,"onMousedown:control":Z,onKeydown:Ae}),{...m,default:()=>t(Q,null,[t(Xl,ae({ref:h,modelValue:k.value,"onUpdate:modelValue":i=>k.value=i,activator:"parent",contentClass:"v-autocomplete__content",disabled:_e.value,eager:p.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:p.transition,onAfterEnter:Ne,onAfterLeave:Ge},p.menuProps),{default:()=>[y&&t(nt,ae({ref:re,selected:He.value,selectStrategy:p.multiple?"independent":"single-independent",onMousedown:i=>i.preventDefault(),onKeydown:Pe,onFocusin:Fe,onFocusout:Re,tabindex:"-1","aria-live":"polite",color:p.itemColor??p.color},Je,p.listProps),{default:()=>{var i,d,C;return[(i=m["prepend-item"])==null?void 0:i.call(m),!b.value.length&&!p.hideNoData&&(((d=m["no-data"])==null?void 0:d.call(m))??t(se,{key:"no-data",title:I(p.noDataText)},null)),t(Yl,{ref:w,renderless:!0,items:b.value},{default:W=>{var ke;let{item:n,index:U,itemRef:G}=W;const pe=ae(n.props,{ref:G,key:n.value,active:we.value&&U===0?!0:void 0,onClick:()=>me(n,null)});return((ke=m.item)==null?void 0:ke.call(m,{item:n,index:U,props:pe}))??t(se,ae(pe,{role:"option"}),{prepend:qe=>{let{isSelected:Le}=qe;return t(Q,null,[p.multiple&&!p.hideSelected?t(ll,{key:n.value,modelValue:Le,ripple:!1,tabindex:"-1"},null):void 0,n.props.prependAvatar&&t(ut,{image:n.props.prependAvatar},null),n.props.prependIcon&&t(Ie,{icon:n.props.prependIcon},null)])},title:()=>{var qe,Le;return F.value?n.title:hs(n.title,(qe=D(n))==null?void 0:qe.title,((Le=u.value)==null?void 0:Le.length)??0)}})}}),(C=m["append-item"])==null?void 0:C.call(m)]}})]}),N.value.map((i,d)=>{function C(G){G.stopPropagation(),G.preventDefault(),me(i,!1)}const W={"onClick:close":C,onKeydown(G){G.key!=="Enter"&&G.key!==" "||(G.preventDefault(),G.stopPropagation(),C(G))},onMousedown(G){G.preventDefault(),G.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},n=ne.value?!!m.chip:!!m.selection,U=n?Ml(ne.value?m.chip({item:i,index:d,props:W}):m.selection({item:i,index:d})):void 0;if(!(n&&!U))return t("div",{key:i.value,class:["v-autocomplete__selection",d===E.value&&["v-autocomplete__selection--selected",V.value]],style:d===E.value?f.value:{}},[ne.value?m.chip?t(ql,{key:"chip-defaults",defaults:{VChip:{closable:p.closableChips,size:"small",text:i.title}}},{default:()=>[U]}):t(et,ae({key:"chip",closable:p.closableChips,size:"small",text:i.title,disabled:i.props.disabled},W),null):U??t("span",{class:"v-autocomplete__selection-text"},[i.title,p.multiple&&d<N.value.length-1&&t("span",{class:"v-autocomplete__selection-comma"},[P(",")])])])})]),"append-inner":function(){var W;for(var i=arguments.length,d=new Array(i),C=0;C<i;C++)d[C]=arguments[C];return t(Q,null,[(W=m["append-inner"])==null?void 0:W.call(m,...d),p.menuIcon?t(Ie,{class:"v-autocomplete__menu-icon",icon:p.menuIcon,onMousedown:Ce,onClick:Fl,"aria-label":I(v.value),title:I(v.value),tabindex:"-1"},null):void 0])}})}),Ll({isFocused:_,isPristine:F,menu:k,search:u,filteredItems:r,select:me},L)}}),Vs={class:"d-flex flex-column w-100"},ys={class:"d-flex flex-column"},ws={class:"d-flex flex-row ml-auto"},xs={class:"d-flex flex-column"},ks={class:"d-flex flex-row ml-auto"},Us={class:"d-flex flex-column"},Ss={class:"d-flex flex-row ml-auto"},Cs={class:"d-flex flex-column"},Rs={class:"d-flex flex-row ml-auto"},Ts={class:"d-flex flex-column"},Is={class:"d-flex flex-row ml-auto"},Bs={class:"d-flex flex-column"},Ds={class:"d-flex flex-row ml-auto"},Ps={class:"d-flex flex-column"},As={class:"d-flex flex-row ml-auto"},Es={class:"d-flex flex-column"},Ns={class:"d-flex flex-row mb-2 ml-auto"},Fs={key:0,class:"d-flex flex-row w-100"},Ms=["innerHTML"],qs={class:"d-flex flex-column"},Ls={class:"d-flex flex-column w-100"},js={id:"table",class:"d-flex flex-row ml-auto mb-2"},Ks={key:0,class:"d-flex flex-row w-100"},Os=["innerHTML"],Ws={key:0,class:"d-flex flex-column w-100"},zs={class:"d-flex flex-row mb-4"},Hs={key:1,class:"d-flex flex-column w-100"},Js={class:"d-flex flex-row mb-4"},Gs={class:"d-flex flex-column w-100"},Qs={class:"d-flex flex-column w-100"},Zs={class:"d-flex flex-row mb-4"},Xs=["id"],Ys={class:"d-flex flex-row mb-4"},hl=be({__name:"TemplateRotation",props:{id:{type:String,required:!0}},setup(p){const A=pl(),{t:m}=De();let L=ze().query.spoiler;L==="true"||L===!0?L=!0:L=!1;const F=p.id,R=Oe(),h=R.getNames(L),w=j(void 0),S=j([]),k=j(!1),E=j([]),te=j(!1),v=j(void 0),s=j(!1),O=j(void 0),B=j(!1),V=j(void 0),f=j(!1),u=j(void 0),N=j(!1),g=j(void 0),M=j(!1),r=j(void 0),D=j(void 0),b=j([]),ne=j(!1),$=j(void 0);j([]);const He=[{title:m("general.row"),key:"id"},{title:m("general.name"),key:"name"},{title:m("general.buff_type"),key:"type"},{title:m("general.value"),key:"value"},{title:m("general.stack"),key:"stack"},{title:m("general.buff_duration"),key:"duration",width:"100%"}],we=j(""),_e=j(!1),re=j(void 0),Je=[{title:"",key:"tools"},{title:m("general.row"),key:"id"},{title:m("general.resonator"),key:"resonator_name"},{title:m("general.action"),key:"action"},{title:m("general.resonator_skill_id"),key:"skill_id"},{title:m("general.hits"),key:"hit"},{title:m("general.time_start"),key:"time_start"},{title:m("general.time_end"),key:"time_end"},{title:m("general.real_dmg_no_crit"),key:"real_dmg_no_crit"},{title:m("general.real_dmg_crit"),key:"real_dmg_crit"},{title:m("general.calculated_damage"),key:"calculation.result.damage_no_crit"},{title:m("general.calculated_crit_damage"),key:"calculation.result.damage_crit"},{title:m("general.calculate_expected_damage"),key:"calculation.result.damage"}],he=ye(F),Z=j([new ul]);he.data.rows.length>0&&(Z.value=he.data.rows,Ae(Z.value),Pe(Z.value));const Ce=j([]);function Pe(i){i.length>0?E.value=dt(i):E.value=[]}function Ae(i){i.forEach((d,C)=>{d.id=C})}function Ee(i){let d=0;return i.forEach(C=>{C.selected&&(d+=1)}),d}function Ne(i,d){const C=i.selected;switch(d){case"row":C&&(w.value=i.id),!C&&i.id===w.value&&(w.value=void 0),k.value=!1;break;case"buff":C&&(D.value=i.id),!C&&i.id===D.value&&(D.value=void 0);break}}function Ge(){const i=Z.value[re.value];i.id===re.value&&(i.comment=we.value.toString(),_e.value=!1,we.value="")}function Fe(i){i.forEach(d=>{d.selected=!1})}function Re(i,d,C,W){if(d=Number(d),!isNaN(d)&&(C=Number(C),!isNaN(C))){for(let n=0;n<C;n++){let U;switch(W){case"row":U=new ul;break;case"buff":U=new Wl;break}U&&i.splice(d+n,0,U)}Ae(i)}}function Me(i,d,C,W){if(Re(i,d,C,W),C=Number(C),!isNaN(C))switch(W){case"row":w.value!==void 0&&(w.value+=C);break;case"buff":D.value!==void 0&&(D.value+=C);break}}function xe(i,d,C,W){d+=1,Re(i,d,C,W)}function me(i,d,C){const W=i.length;Re(i,W,d,C)}function y(i){const d=[];for(i.forEach((C,W)=>{C.selected&&d.push(W)});d.length>0;){const C=d.pop();i.splice(C,1)}i.forEach((C,W)=>{C.id=W})}async function q(i){const d=i.resonator_name;if(!d)return;const C=await R.getDamageSkillItems(d);i.skill_ids=C}function Y(i){i.length!==0&&(Ce.value=[],i.forEach(d=>{const C=d.raw;Ce.value.push(C)}))}return Ue(()=>JSON.stringify(Z.value),()=>{Pe(Z.value)}),(i,d)=>{const C=gl,W=vl;return c(),x("div",Vs,[w.value!==void 0?(c(),X(ve,{key:0,modelValue:te.value,"onUpdate:modelValue":d[3]||(d[3]=n=>te.value=n),width:"auto"},{default:o(()=>[t(ge,{"min-width":"400",title:i.$t("general.insert_above_at_n",{n:w.value+1})},{default:o(()=>[t(ee,null,{default:o(()=>[e("div",ys,[t(T,{class:"mb-4",modelValue:v.value,"onUpdate:modelValue":d[0]||(d[0]=n=>v.value=n),label:i.$t("general.row"),placeholder:"0",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","label"]),e("div",ws,[t(H,{class:"mr-2",onClick:d[1]||(d[1]=n=>te.value=!1)},{default:o(()=>[P(a(i.$t("general.cancel")),1)]),_:1}),t(H,{onClick:d[2]||(d[2]=n=>{Me(Z.value,w.value,v.value,"row"),te.value=!1,v.value=void 0})},{default:o(()=>[P(a(i.$t("general.confirm")),1)]),_:1})])])]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"])):J("",!0),w.value!==void 0?(c(),X(ve,{key:1,modelValue:s.value,"onUpdate:modelValue":d[7]||(d[7]=n=>s.value=n),width:"auto"},{default:o(()=>[t(ge,{"min-width":"400",title:i.$t("general.insert_below_at_n",{n:w.value+1})},{default:o(()=>[t(ee,null,{default:o(()=>[e("div",xs,[t(T,{class:"mb-4",modelValue:O.value,"onUpdate:modelValue":d[4]||(d[4]=n=>O.value=n),label:i.$t("general.row"),placeholder:"0",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","label"]),e("div",ks,[t(H,{class:"mr-2",onClick:d[5]||(d[5]=n=>s.value=!1)},{default:o(()=>[P(a(i.$t("general.cancel")),1)]),_:1}),t(H,{onClick:d[6]||(d[6]=n=>{xe(Z.value,w.value,O.value,"row"),s.value=!1,O.value=void 0})},{default:o(()=>[P(a(i.$t("general.confirm")),1)]),_:1})])])]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"])):J("",!0),t(ve,{modelValue:B.value,"onUpdate:modelValue":d[11]||(d[11]=n=>B.value=n),width:"auto"},{default:o(()=>[t(ge,{"min-width":"400",title:i.$t("general.insert_bottom")},{default:o(()=>[t(ee,null,{default:o(()=>[e("div",Us,[t(T,{class:"mb-4",modelValue:V.value,"onUpdate:modelValue":d[8]||(d[8]=n=>V.value=n),label:i.$t("general.row"),placeholder:"0",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","label"]),e("div",Ss,[t(H,{class:"mr-2",onClick:d[9]||(d[9]=n=>B.value=!1)},{default:o(()=>[P(a(i.$t("general.cancel")),1)]),_:1}),t(H,{onClick:d[10]||(d[10]=n=>{me(Z.value,V.value,"row"),B.value=!1,V.value=void 0})},{default:o(()=>[P(a(i.$t("general.confirm")),1)]),_:1})])])]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"]),re.value!==void 0?(c(),X(ve,{key:2,modelValue:_e.value,"onUpdate:modelValue":d[14]||(d[14]=n=>_e.value=n),width:"auto"},{default:o(()=>[t(ge,{"min-width":"1280",title:i.$t("general.nth_row_comment",{n:re.value+1})},{default:o(()=>[t(ee,null,{default:o(()=>[e("div",Cs,[t(bl,{class:"mb-4",modelValue:Z.value[re.value].comment,"onUpdate:modelValue":d[12]||(d[12]=n=>Z.value[re.value].comment=n),variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue"]),e("div",Rs,[t(H,{class:"mr-2",onClick:d[13]||(d[13]=n=>{_e.value=!1})},{default:o(()=>[P(a(i.$t("general.cancel")),1)]),_:1}),t(H,{onClick:Ge},{default:o(()=>[P(a(i.$t("general.confirm")),1)]),_:1})])])]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"])):J("",!0),$.value!==void 0&&D.value!==void 0?(c(),X(ve,{key:3,modelValue:f.value,"onUpdate:modelValue":d[18]||(d[18]=n=>f.value=n),width:"auto"},{default:o(()=>[t(ge,{"min-width":"400",title:i.$t("general.insert_above_at_n",{n:D.value+1})},{default:o(()=>[t(ee,null,{default:o(()=>[e("div",Ts,[t(T,{class:"mb-4",modelValue:u.value,"onUpdate:modelValue":d[15]||(d[15]=n=>u.value=n),label:i.$t("general.row"),placeholder:"0",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","label"]),e("div",Is,[t(H,{class:"mr-2",onClick:d[16]||(d[16]=n=>f.value=!1)},{default:o(()=>[P(a(i.$t("general.cancel")),1)]),_:1}),t(H,{onClick:d[17]||(d[17]=n=>{Me(Z.value[$.value].buffs,D.value,u.value,"buff"),f.value=!1,u.value=void 0})},{default:o(()=>[P(a(i.$t("general.confirm")),1)]),_:1})])])]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"])):J("",!0),$.value!==void 0&&D.value!==void 0?(c(),X(ve,{key:4,modelValue:N.value,"onUpdate:modelValue":d[22]||(d[22]=n=>N.value=n),width:"auto"},{default:o(()=>[t(ge,{"min-width":"400",title:i.$t("general.insert_below_at_n",{n:D.value+1})},{default:o(()=>[t(ee,null,{default:o(()=>[e("div",Bs,[t(T,{class:"mb-4",modelValue:g.value,"onUpdate:modelValue":d[19]||(d[19]=n=>g.value=n),label:i.$t("general.row"),placeholder:"0",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","label"]),e("div",Ds,[t(H,{class:"mr-2",onClick:d[20]||(d[20]=n=>N.value=!1)},{default:o(()=>[P(a(i.$t("general.cancel")),1)]),_:1}),t(H,{onClick:d[21]||(d[21]=n=>{xe(Z.value[$.value].buffs,D.value,g.value,"buff"),N.value=!1,g.value=void 0})},{default:o(()=>[P(a(i.$t("general.confirm")),1)]),_:1})])])]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"])):J("",!0),$.value!==void 0?(c(),X(ve,{key:5,modelValue:M.value,"onUpdate:modelValue":d[26]||(d[26]=n=>M.value=n),width:"auto"},{default:o(()=>[t(ge,{"min-width":"400",title:i.$t("general.insert_bottom")},{default:o(()=>[t(ee,null,{default:o(()=>[e("div",Ps,[t(T,{class:"mb-4",modelValue:r.value,"onUpdate:modelValue":d[23]||(d[23]=n=>r.value=n),label:i.$t("general.row"),placeholder:"0",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","label"]),e("div",As,[t(H,{class:"mr-2",onClick:d[24]||(d[24]=n=>M.value=!1)},{default:o(()=>[P(a(i.$t("general.cancel")),1)]),_:1}),t(H,{onClick:d[25]||(d[25]=n=>{me(Z.value[$.value].buffs,r.value,"buff"),M.value=!1,r.value=void 0})},{default:o(()=>[P(a(i.$t("general.confirm")),1)]),_:1})])])]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"])):J("",!0),$.value!==void 0?(c(),X(ve,{key:6,modelValue:ne.value,"onUpdate:modelValue":d[33]||(d[33]=n=>ne.value=n),width:"auto"},{default:o(()=>[t(ge,{"min-width":"1280",title:i.$t("general.nth_buff",{n:$.value+1})},{default:o(()=>[t(ee,null,{default:o(()=>[e("div",Es,[e("div",Ns,[Ee(Z.value[$.value].buffs)>0?(c(),x("div",Fs,[t(H,{color:"red",class:"mr-2",onClick:d[27]||(d[27]=n=>{y(Z.value[$.value].buffs),D.value=void 0})},{default:o(()=>[P(a(i.$t("general.delete")),1)]),_:1}),t(H,{class:"mr-2",onClick:d[28]||(d[28]=n=>{Fe(Z.value[$.value].buffs),D.value=void 0})},{default:o(()=>[P(a(i.$t("general.cancel_selection")),1)]),_:1})])):J("",!0),D.value!==void 0?(c(),X(H,{key:1,class:"mr-2",onClick:d[29]||(d[29]=n=>f.value=!0)},{default:o(()=>[P(a(i.$t("general.insert_above")),1)]),_:1})):J("",!0),D.value!==void 0?(c(),X(H,{key:2,class:"mr-2",onClick:d[30]||(d[30]=n=>N.value=!0)},{default:o(()=>[P(a(i.$t("general.insert_below")),1)]),_:1})):J("",!0),t(H,{onClick:d[31]||(d[31]=n=>M.value=!0)},{default:o(()=>[P(a(i.$t("general.insert_bottom")),1)]),_:1})]),t(Be,{class:"table mb-2",headers:He,items:Z.value[$.value].buffs,"items-per-page":"10","show-select":"",selected:b.value,"onUpdate:selected":d[32]||(d[32]=n=>b.value=n),"disable-sort":""},{"header.data-table-select":o(()=>d[42]||(d[42]=[])),"item.data-table-select":o(({item:n})=>[t(ll,{modelValue:n.selected,"onUpdate:modelValue":[U=>n.selected=U,U=>Ne(n,"buff")],variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),"item.id":o(({item:n})=>[e("span",null,a(i.$t("general.nth_row",{n:n.id+1})),1)]),"item.name":o(({item:n})=>[t(de,{location:"end",text:n.name,disabled:!n.name},{activator:o(({props:U})=>[t(fe,ae(U,{modelValue:n._item,"onUpdate:modelValue":[G=>n._item=G,G=>Z.value[$.value].buffs[n.id].updateByRowBuff(n._item)],items:l(he).getRowBuffsForSelect(),variant:"outlined",width:"300px",density:"compact","hide-details":""}),{item:o(({props:G,item:pe})=>[t(de,{location:"end",width:"400px",disabled:!pe.value.getHtmlToolTip()},{activator:o(({props:ke})=>[t(se,dl(il({...G,...ke})),null,16)]),default:o(()=>[e("div",{innerHTML:pe.value.tooltip},null,8,Ms)]),_:2},1032,["disabled"])]),_:2},1040,["modelValue","onUpdate:modelValue","items"])]),_:2},1032,["text","disabled"])]),"item.type":o(({item:n})=>[t(fe,{modelValue:n.type,"onUpdate:modelValue":U=>n.type=U,items:l(Ul)(),variant:"outlined",width:"180px",density:"compact","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),"item.value":o(({item:n})=>[t(T,{modelValue:n.value,"onUpdate:modelValue":U=>n.value=U,label:i.$t("general.value"),variant:"outlined",width:"180px",density:"compact","hide-details":""},null,8,["modelValue","onUpdate:modelValue","label"])]),"item.stack":o(({item:n})=>[t(T,{modelValue:n.stack,"onUpdate:modelValue":U=>n.stack=U,label:i.$t("general.stack"),variant:"outlined",width:"180px",density:"compact","hide-details":""},null,8,["modelValue","onUpdate:modelValue","label"])]),"item.duration":o(({item:n})=>[t(T,{modelValue:n.duration,"onUpdate:modelValue":U=>n.duration=U,label:i.$t("general.buff_duration"),variant:"outlined",width:"180px",density:"compact","hide-details":""},null,8,["modelValue","onUpdate:modelValue","label"])]),_:1},8,["items","selected"])])]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"])):J("",!0),t(ee,{class:"mb-12"},{default:o(()=>[e("div",qs,[e("div",Ls,[e("div",js,[Ee(Z.value)>0?(c(),x("div",Ks,[t(H,{color:"red",class:"mr-2",onClick:d[34]||(d[34]=n=>{y(Z.value),w.value=void 0})},{default:o(()=>[P(a(i.$t("general.delete")),1)]),_:1}),t(H,{class:"mr-2",onClick:d[35]||(d[35]=n=>{Fe(Z.value),w.value=void 0})},{default:o(()=>[P(a(i.$t("general.cancel_selection")),1)]),_:1})])):J("",!0),w.value!==void 0?(c(),X(H,{key:1,class:"mr-2",onClick:d[36]||(d[36]=n=>te.value=!0)},{default:o(()=>[P(a(i.$t("general.insert_above")),1)]),_:1})):J("",!0),w.value!==void 0?(c(),X(H,{key:2,class:"mr-2",onClick:d[37]||(d[37]=n=>s.value=!0)},{default:o(()=>[P(a(i.$t("general.insert_below")),1)]),_:1})):J("",!0),t(H,{class:"mr-2",onClick:d[38]||(d[38]=n=>B.value=!0)},{default:o(()=>[P(a(i.$t("general.insert_bottom")),1)]),_:1}),t(H,{onClick:d[39]||(d[39]=n=>l(he).calculate())},{default:o(()=>[P(a(i.$t("general.calculate")),1)]),_:1})]),t(Be,{id:"table",class:"table mb-4",headers:Je,items:Z.value,"items-per-page":"10","onUpdate:currentItems":Y,"show-select":"",selected:S.value,"onUpdate:selected":d[40]||(d[40]=n=>S.value=n),"disable-sort":""},{"header.data-table-select":o(()=>d[43]||(d[43]=[])),"item.data-table-select":o(({item:n})=>[t(ll,{modelValue:n.selected,"onUpdate:modelValue":[U=>n.selected=U,U=>Ne(n,"row")],variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),"item.tools":o(({item:n})=>[t(de,{location:"end",text:i.$t("general.buff")},{activator:o(({props:U})=>[t(Ie,ae({class:"mr-2",color:n.areBuffs()?"blue":"",size:"small",onClick:G=>{ne.value=!0,$.value=n.id}},U),{default:o(()=>d[44]||(d[44]=[P(" mdi-shield-sword ")])),_:2},1040,["color","onClick"])]),_:2},1032,["text"]),t(de,{location:"end",text:n.comment?n.comment:i.$t("general.comment")},{activator:o(({props:U})=>[t(Ie,ae({class:"mr-2",color:n.comment?"blue":"",size:"small",onClick:G=>{_e.value=!0,re.value=n.id}},U),{default:o(()=>d[45]||(d[45]=[P(" mdi-pencil ")])),_:2},1040,["color","onClick"])]),_:2},1032,["text"]),t(de,{location:"end",text:i.$t("general.calculate")},{activator:o(({props:U})=>[t(Ie,ae({size:"small",onClick:G=>l(he).calculateRow(n.id)},U),{default:o(()=>d[46]||(d[46]=[P(" mdi-calculator ")])),_:2},1040,["onClick"])]),_:2},1032,["text"])]),"item.id":o(({item:n})=>[t(H,{onClick:U=>l(oe)(l(A),`#detailed-${n.id}`),variant:"plain",density:"compact"},{default:o(()=>[P(a(i.$t("general.nth_row",{n:n.id+1})),1)]),_:2},1032,["onClick"])]),"item.resonator_name":o(({item:n})=>[t(fe,{modelValue:n.resonator_name,"onUpdate:modelValue":[U=>n.resonator_name=U,U=>q(n)],items:l(h),variant:"outlined",width:"180px",density:"compact","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),"item.action":o(({item:n})=>[t(fe,{modelValue:n.action,"onUpdate:modelValue":U=>n.action=U,items:l(it)(),variant:"outlined",width:"180px",density:"compact","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),"item.skill_id":o(({item:n})=>[t(de,{location:"end",text:n.skill_id,disabled:!n.skill_id},{activator:o(({props:U})=>[t(tl,ae(U,{modelValue:n.skill_id,"onUpdate:modelValue":G=>n.skill_id=G,items:n.skill_ids,"item-value":"title","onUpdate:menu":G=>q(n),width:"180px",variant:"outlined",density:"compact","hide-details":""}),{item:o(({props:G,item:pe})=>[t(de,{location:"end",disabled:!pe.raw.value.tooltip},{activator:o(({props:ke})=>[t(se,dl(il({...G,...ke})),null,16)]),default:o(()=>[e("div",{innerHTML:pe.raw.value.tooltip},null,8,Os)]),_:2},1032,["disabled"])]),_:2},1040,["modelValue","onUpdate:modelValue","items","onUpdate:menu"])]),_:2},1032,["text","disabled"])]),"item.hit":o(({item:n})=>[t(T,{modelValue:n.hit,"onUpdate:modelValue":U=>n.hit=U,label:i.$t("general.hits"),variant:"outlined",width:"68px",density:"compact","hide-details":""},null,8,["modelValue","onUpdate:modelValue","label"])]),"item.time_start":o(({item:n})=>[t(T,{modelValue:n.time_start,"onUpdate:modelValue":U=>n.time_start=U,label:i.$t("general.time_start"),placeholder:"00:00:00",variant:"outlined",width:"180px",density:"compact","hide-details":""},null,8,["modelValue","onUpdate:modelValue","label"])]),"item.time_end":o(({item:n})=>[t(T,{modelValue:n.time_end,"onUpdate:modelValue":U=>n.time_end=U,label:i.$t("general.time_end"),placeholder:"00:00:00",variant:"outlined",width:"180px",density:"compact","hide-details":""},null,8,["modelValue","onUpdate:modelValue","label"])]),"item.real_dmg_no_crit":o(({item:n})=>[t(T,{modelValue:n.real_dmg_no_crit,"onUpdate:modelValue":U=>n.real_dmg_no_crit=U,label:i.$t("general.real_dmg_no_crit"),variant:"outlined",width:"180px",density:"compact","hide-details":""},null,8,["modelValue","onUpdate:modelValue","label"])]),"item.real_dmg_crit":o(({item:n})=>[t(T,{modelValue:n.real_dmg_crit,"onUpdate:modelValue":U=>n.real_dmg_crit=U,label:i.$t("general.real_dmg_crit"),variant:"outlined",width:"180px",density:"compact","hide-details":""},null,8,["modelValue","onUpdate:modelValue","label"])]),"item.calculation.result.damage_no_crit":o(({item:n})=>[t(T,{class:"result",modelValue:n.calculation.result.damage_no_crit,"onUpdate:modelValue":U=>n.calculation.result.damage_no_crit=U,label:i.$t("general.calculated_damage"),variant:"outlined",width:"180px",density:"compact","hide-details":"",readonly:""},null,8,["modelValue","onUpdate:modelValue","label"])]),"item.calculation.result.damage_crit":o(({item:n})=>[t(T,{class:"result",modelValue:n.calculation.result.damage_crit,"onUpdate:modelValue":U=>n.calculation.result.damage_crit=U,label:i.$t("general.calculated_crit_damage"),variant:"outlined",width:"180px",density:"compact","hide-details":"",readonly:""},null,8,["modelValue","onUpdate:modelValue","label"])]),"item.calculation.result.damage":o(({item:n})=>[t(T,{class:"result",modelValue:n.calculation.result.damage,"onUpdate:modelValue":U=>n.calculation.result.damage=U,label:i.$t("general.calculate_expected_damage"),variant:"outlined",width:"180px",density:"compact","hide-details":"",readonly:""},null,8,["modelValue","onUpdate:modelValue","label"])]),_:1},8,["items","selected"])]),E.value.length>0?(c(),x("div",Ws,[e("div",zs,[e("h2",null,a(l(m)("general.rotation")),1)]),t(C,{class:"mb-4",rotation:E.value},null,8,["rotation"])])):J("",!0),Z.value.length>0?(c(),x("div",Hs,[e("div",Js,[e("h2",null,a(l(m)("general.damage_analysis")),1)]),e("div",Gs,[(c(!0),x(Q,null,le(Ce.value,n=>{var U;return c(),x("div",Qs,[e("div",Zs,[e("h3",{id:`detailed-${n.id}`},a(l(m)("general.nth_row",{n:n.id+1})),9,Xs)]),e("div",Ys,[t(H,{class:"ml-auto",onClick:d[41]||(d[41]=G=>l(oe)(l(A),"#table"))},{default:o(()=>[P(a(i.$t("general.back_to",{to:i.$t("general.table")})),1)]),_:1})]),(c(),X(W,{class:"mb-4",calculation:n.calculation,key:(U=n==null?void 0:n.calculation)==null?void 0:U.id},null,8,["calculation"]))])}),256))])])):J("",!0)])]),_:1})])}}});typeof Se=="function"&&Se(hl);const ed=We(hl,[["__scopeId","data-v-1698ebf3"]]),ld={class:"d-flex flex-column w-100"},td={class:"d-flex flex-row w-100 align-center mb-4"},ad={class:"d-flex flex-row mb-4"},od={class:"d-flex flex-row"},nd={class:"d-flex flex-column w-100 mr-6"},sd={class:"d-flex flex-row mb-4"},dd={class:"d-flex flex-row mb-4"},id={class:"d-flex flex-row mb-4"},ud={class:"d-flex flex-row mb-4"},rd={class:"d-flex flex-row mb-4"},md={class:"d-flex flex-row mb-4"},cd={class:"d-flex flex-row mb-4"},fd={class:"d-flex flex-row mb-4"},$l=be({__name:"TemplateBasicInfo",props:{id:{type:String,required:!0}},setup(p){const{t:A}=De();let I=ze().query.spoiler;I==="true"||I===!0?I=!0:I=!1;const _=p.id,F=rt(),R=ye(_),h=Oe(),w=h.getNames(I),S=h.getChains(),k=_l(),E=k.getNames(I),te=k.getTunes(),v=Sl(),s=v.getEchoNames(),O=v.getSonataNames(),B=v.getCosts(),V=v.getAbbrs(),u=st().getMonsterItems();function N(r){if(!r)return;const D=r.id;D&&(R.data.id=D);const b=r.hashed_id;b&&(R.data.hashed_id=b)}function g(r){return E.includes(r)?!0:A("general.error")}function M(r){const D=R.data.calculation.resonators[r].weapon;R.updateResonatorByCalculation(r),D.updateRowWeaponByName()}return(r,D)=>(c(),x("div",ld,[e("div",td,[t(tl,{class:"mr-6",modelValue:l(R).data.id,"onUpdate:modelValue":[D[0]||(D[0]=b=>l(R).data.id=b),N],"max-width":"1080px",items:l(F).getTemplateItems(),label:r.$t("general.template_id"),variant:"outlined",density:"compact","hide-details":"",focused:""},null,8,["modelValue","items","label"]),t(H,{class:"ml-auto",onClick:D[1]||(D[1]=b=>l(R).initTemplateByHashedId())},{default:o(()=>[P(a(r.$t("general.load_built_in_template")),1)]),_:1})]),e("div",ad,[e("h2",null,a(r.$t("general.basic_info")),1)]),t(K,{class:"mb-4","max-width":"400px",modelValue:l(R).data.monster_id,"onUpdate:modelValue":D[2]||(D[2]=b=>l(R).data.monster_id=b),items:l(u),label:r.$t("general.monster_id"),variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","items","label"]),t(T,{class:"mb-4","max-width":"400px",modelValue:l(R).data.duration_1,"onUpdate:modelValue":D[3]||(D[3]=b=>l(R).data.duration_1=b),label:r.$t("general.duration_1"),variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","label"]),t(T,{class:"mb-4","max-width":"400px",modelValue:l(R).data.duration_2,"onUpdate:modelValue":D[4]||(D[4]=b=>l(R).data.duration_2=b),label:r.$t("general.duration_2"),variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","label"]),t(bl,{modelValue:l(R).data.description,"onUpdate:modelValue":D[5]||(D[5]=b=>l(R).data.description=b),label:r.$t("general.description"),variant:"outlined",density:"compact"},null,8,["modelValue","label"]),e("div",od,[(c(!0),x(Q,null,le(l(R).data.resonators,(b,ne)=>(c(),x("div",nd,[e("div",sd,[e("h2",null,a(r.$t("general.resonator_nth",{n:ne+1})),1)]),t(fe,{class:"mb-4","max-width":"400px",modelValue:b.resonator_name,"onUpdate:modelValue":[$=>b.resonator_name=$,D[6]||(D[6]=$=>l(R).updateByResonatorName(0))],items:l(w),label:r.$t("general.resonator_1"),variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items","label"]),t(K,{class:"mb-4",modelValue:b.resonator_chain,"onUpdate:modelValue":[$=>b.resonator_chain=$,$=>l(R).updateResonatorByCalculation(ne)],items:l(S),label:r.$t("general.resonator_chain"),variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items","label"]),t(T,{class:"mb-4",modelValue:b.resonator_energy_regen,"onUpdate:modelValue":[$=>b.resonator_energy_regen=$,$=>l(R).updateResonatorByCalculation(ne)],label:r.$t("general.energy_regen"),variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","onUpdate:modelValue","label"]),t(K,{class:"mb-4",modelValue:b.resonator_base_attr,"onUpdate:modelValue":$=>b.resonator_base_attr=$,items:l(cl)(),label:r.$t("general.base_attr"),variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items","label"]),t(K,{class:"mb-4",modelValue:b.resonator_skill_bonus,"onUpdate:modelValue":$=>b.resonator_skill_bonus=$,items:l(fl)(),label:r.$t("general.main_skill_bonus"),variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items","label"]),t(Ke,{class:"mb-4",modelValue:b.resonator_inherent_skill_1,"onUpdate:modelValue":$=>b.resonator_inherent_skill_1=$,label:r.$t("general.resonator_skills.inherent_skill_1"),variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","onUpdate:modelValue","label"]),t(Ke,{class:"mb-8",modelValue:b.resonator_inherent_skill_2,"onUpdate:modelValue":$=>b.resonator_inherent_skill_2=$,label:r.$t("general.resonator_skills.inherent_skill_2"),variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","onUpdate:modelValue","label"]),e("div",dd,[e("h3",null,a(r.$t("general.weapon")),1)]),t(fe,{class:"mb-4",modelValue:b.resonator_weapon_name,"onUpdate:modelValue":[$=>b.resonator_weapon_name=$,$=>M(ne)],items:l(E),label:r.$t("general.name"),rules:[g],variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items","label","rules"]),t(K,{class:"mb-8",modelValue:b.resonator_weapon_rank,"onUpdate:modelValue":[$=>b.resonator_weapon_rank=$,$=>M(ne)],items:l(te),label:r.$t("general.tune"),variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items","label"]),e("div",id,[e("h3",null,a(r.$t("general.echo")),1)]),e("div",ud,[e("span",null,a(r.$t("general.nth_echo",{n:1})),1)]),t(tl,{class:"mb-4",modelValue:b.resonator_echo_1,"onUpdate:modelValue":$=>b.resonator_echo_1=$,items:l(s),label:r.$t("general.name"),variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items","label"]),t(K,{class:"mb-4",modelValue:b.resonator_echo_sonata_1,"onUpdate:modelValue":$=>b.resonator_echo_sonata_1=$,items:l(O),label:r.$t("general.sonata"),variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items","label"]),t(K,{class:"mb-4",modelValue:b.resonator_echo_cost_1,"onUpdate:modelValue":$=>b.resonator_echo_cost_1=$,items:l(B),label:r.$t("general.echo_cost"),variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items","label"]),t(K,{class:"mb-4",modelValue:b.resonator_echo_affix_1,"onUpdate:modelValue":$=>b.resonator_echo_affix_1=$,items:l(V),label:r.$t("general.main_affix"),variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items","label"]),e("div",rd,[e("span",null,a(r.$t("general.nth_echo",{n:2})),1)]),t(K,{class:"mb-4",modelValue:b.resonator_echo_sonata_2,"onUpdate:modelValue":$=>b.resonator_echo_sonata_2=$,items:l(O),label:r.$t("general.sonata"),variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items","label"]),t(K,{class:"mb-4",modelValue:b.resonator_echo_cost_2,"onUpdate:modelValue":$=>b.resonator_echo_cost_2=$,items:l(B),label:r.$t("general.echo_cost"),variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items","label"]),t(K,{class:"mb-4",modelValue:b.resonator_echo_affix_2,"onUpdate:modelValue":$=>b.resonator_echo_affix_2=$,items:l(V),label:r.$t("general.main_affix"),variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items","label"]),e("div",md,[e("span",null,a(r.$t("general.nth_echo",{n:3})),1)]),t(K,{class:"mb-4",modelValue:b.resonator_echo_sonata_3,"onUpdate:modelValue":$=>b.resonator_echo_sonata_3=$,items:l(O),label:r.$t("general.sonata"),variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items","label"]),t(K,{class:"mb-4",modelValue:b.resonator_echo_cost_3,"onUpdate:modelValue":$=>b.resonator_echo_cost_3=$,items:l(B),label:r.$t("general.echo_cost"),variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items","label"]),t(K,{class:"mb-4",modelValue:b.resonator_echo_affix_3,"onUpdate:modelValue":$=>b.resonator_echo_affix_3=$,items:l(V),label:r.$t("general.main_affix"),variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items","label"]),e("div",cd,[e("span",null,a(r.$t("general.nth_echo",{n:4})),1)]),t(K,{class:"mb-4",modelValue:b.resonator_echo_sonata_4,"onUpdate:modelValue":$=>b.resonator_echo_sonata_4=$,items:l(O),label:r.$t("general.sonata"),variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items","label"]),t(K,{class:"mb-4",modelValue:b.resonator_echo_cost_4,"onUpdate:modelValue":$=>b.resonator_echo_cost_4=$,items:l(B),label:r.$t("general.echo_cost"),variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items","label"]),t(K,{class:"mb-4",modelValue:b.resonator_echo_affix_4,"onUpdate:modelValue":$=>b.resonator_echo_affix_4=$,items:l(V),label:r.$t("general.main_affix"),variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items","label"]),e("div",fd,[e("span",null,a(r.$t("general.nth_echo",{n:5})),1)]),t(K,{class:"mb-4",modelValue:b.resonator_echo_sonata_5,"onUpdate:modelValue":$=>b.resonator_echo_sonata_5=$,items:l(O),label:r.$t("general.sonata"),variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items","label"]),t(K,{class:"mb-4",modelValue:b.resonator_echo_cost_5,"onUpdate:modelValue":$=>b.resonator_echo_cost_5=$,items:l(B),label:r.$t("general.echo_cost"),variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items","label"]),t(K,{class:"mb-4",modelValue:b.resonator_echo_affix_5,"onUpdate:modelValue":$=>b.resonator_echo_affix_5=$,items:l(V),label:r.$t("general.main_affix"),variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items","label"])]))),256))])]))}});typeof Se=="function"&&Se($l);const _d={class:"d-flex flex-row w-100"},pd={class:"d-flex flex-row align-center ml-auto"},vd={class:"d-flex flex-row w-100"},gd={class:"sub-tab d-flex flex-column w-100"},bd={class:"sub-tab d-flex flex-column w-100"},hd={class:"d-flex flex-row w-100"},$d={class:"sub-tab d-flex flex-column w-100"},Vd={class:"sub-tab d-flex flex-row w-100"},yd={class:"d-flex flex-column w-100 mr-6"},wd={class:"d-flex flex-row mb-4"},xd={class:"d-flex flex-column w-100 mr-6"},kd={class:"d-flex flex-row mb-4"},Ud={class:"d-flex flex-column w-100"},Sd={class:"d-flex flex-row mb-4"},Cd={class:"tab d-flex flex-column w-100"},Vl=be({__name:"template_calculator",setup(p){const A=ze();let m=A.query.id;m||(m="template"),A.query.spoiler;const I=ye(m),L=j(""),_=j("basic_info");function F(){const h={template:I.data.getJson()};let w=I.data.id;w?ml(h,w):ml(h)}function R(h){const w=h.target;if(!w.files||w.files.length===0)return[void 0,void 0];const S=w.files[0],k=new FileReader;let E;k.onload=te=>{var v;try{E=JSON.parse((v=te.target)==null?void 0:v.result),I.data=new el(E.template)}catch(s){console.error("Invalid JSON file",s)}},k.readAsText(S)}return(h,w)=>{const S=$l,k=ed,E=bs,te=kn,v=hn,s=un,O=wl;return c(),X(O,null,{default:o(()=>[t(ee,{class:"base-nav nav d-flex flex-columnmx-auto pa-1"},{default:o(()=>[e("div",_d,[t(Ze,{class:"d-flex flex-row align-center","align-tabs":"start",color:"blue-accent-1",modelValue:L.value,"onUpdate:modelValue":w[0]||(w[0]=B=>L.value=B)},{default:o(()=>[t($e,{value:"template"},{default:o(()=>[P(a(h.$t("general.template")),1)]),_:1}),(c(!0),x(Q,null,le(l(I).data.resonators,B=>(c(),x(Q,null,[B.resonator_name?(c(),X($e,{key:0,value:B.resonator_name},{default:o(()=>[P(a(h.$t(B.resonator_name)),1)]),_:2},1032,["value"])):J("",!0)],64))),256)),t($e,{value:"damage_analysis"},{default:o(()=>[P(a(h.$t("general.damage_analysis")),1)]),_:1})]),_:1},8,["modelValue"]),e("div",pd,[t(yl,{class:"mr-2","max-width":"100%","min-width":"200",label:h.$t("general.load_file"),accept:".json",onChange:R,variant:"outlined",density:"compact","hide-details":""},null,8,["label"]),t(H,{class:"mr-2",onClick:F},{default:o(()=>[P(a(h.$t("general.download_json")),1)]),_:1})])])]),_:1}),t(ee,null,{default:o(()=>[t(Xe,{class:"window mx-auto",modelValue:L.value,"onUpdate:modelValue":w[3]||(w[3]=B=>L.value=B)},{default:o(()=>[(c(),X(Ve,{value:"template",key:`${l(I).data.id}`},{default:o(()=>[t(ee,{class:"base-nav d-flex flex-columnmx-auto pa-1"},{default:o(()=>[e("div",vd,[t(Ze,{class:"d-flex flex-row align-center","align-tabs":"start",color:"blue-accent-1",modelValue:_.value,"onUpdate:modelValue":w[1]||(w[1]=B=>_.value=B)},{default:o(()=>[t($e,{value:"basic_info"},{default:o(()=>[P(a(h.$t("general.basic_info")),1)]),_:1}),t($e,{value:"rotation"},{default:o(()=>[P(a(h.$t("general.rotation")),1)]),_:1})]),_:1},8,["modelValue"])])]),_:1}),t(Xe,{class:"mx-auto",modelValue:_.value,"onUpdate:modelValue":w[2]||(w[2]=B=>_.value=B)},{default:o(()=>[t(Ve,{value:"basic_info"},{default:o(()=>[e("div",gd,[t(S,{id:l(m)},null,8,["id"])])]),_:1}),t(Ve,{value:"rotation"},{default:o(()=>[e("div",bd,[t(k,{id:l(m)},null,8,["id"])])]),_:1})]),_:1},8,["modelValue"])]),_:1})),(c(!0),x(Q,null,le(l(I).data.resonators,(B,V)=>(c(),x(Q,{key:`${l(I).data.id}-${V}-${B.resonator_name}`},[B.resonator_name?(c(),X(Ve,{key:0,value:B.resonator_name},{default:o(()=>[t(ee,{class:"base-nav d-flex flex-columnmx-auto pa-1"},{default:o(()=>[e("div",hd,[t(Ze,{class:"d-flex flex-row align-center","align-tabs":"start",color:"blue-accent-1",modelValue:B.subTab,"onUpdate:modelValue":f=>B.subTab=f},{default:o(()=>[t($e,{value:"resonator"},{default:o(()=>[P(a(h.$t("general.resonator")),1)]),_:1}),t($e,{value:"echo"},{default:o(()=>[P(a(h.$t("general.echo")),1)]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"])])]),_:2},1024),t(Xe,{class:"mx-auto",modelValue:B.subTab,"onUpdate:modelValue":f=>B.subTab=f},{default:o(()=>[t(Ve,{value:"resonator"},{default:o(()=>[e("div",$d,[t(E,{id:l(m),i:V},null,8,["id","i"])])]),_:2},1024),t(Ve,{value:"echo"},{default:o(()=>[e("div",Vd,[e("div",yd,[e("div",wd,[e("h2",null,a(h.$t("general.auto_fill")),1)]),t(te,{i:V,id:l(m)},null,8,["i","id"])]),e("div",xd,[e("div",kd,[e("h2",null,a(h.$t("general.manual_input")),1)]),(c(),x(Q,null,le(5,f=>e("div",Ud,[e("div",Sd,[e("h3",null,a(h.$t("general.nth_echo",{n:f})),1)]),t(v,{i:V,j:f-1,id:l(m)},null,8,["i","j","id"])])),64))])])]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["value"])):J("",!0)],64))),128)),(c(),X(Ve,{value:"damage_analysis",key:`${l(I).data.id}-damage-analysis`},{default:o(()=>[e("div",Cd,[t(s,{id:l(m)},null,8,["id"])])]),_:1}))]),_:1},8,["modelValue"])]),_:1})]),_:1})}}});typeof Se=="function"&&Se(Vl);const Zd=We(Vl,[["__scopeId","data-v-0649c04f"]]);export{Zd as default};
